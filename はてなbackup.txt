AUTHOR: kurowasi2525
TITLE: Riot.js製の画像スライダーカスタムタグを作成した話とその際の知見
BASENAME: 2019/02/17/184019
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/17/2019 18:40:19
CATEGORY: JavaScript
CATEGORY: Riot.js
-----
BODY:
<h1>背景</h1>

<p>僕は、とあるプロダクトの開発メンバーで、</p>

<p>1月からの画面の刷新プロジェクトに入りました。</p>

<p>しかし、設計フェーズになってもデザインは確定せず...</p>

<p>ですが、企画の段階でほぼほぼ画像のスライダーがあることは確定していました。<br/>
(結局なくなりましたが...)</p>

<p>なので、使えそうなカスタムタグがありそうか調べてみたのですが、<br/>
<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>やBootstrapを利用していたり、<br/>
拡張性がないなど、満足できるものがありませんでした。</p>

<p>無いなら自分で作ってしまおう！ということで、作ったので、
その際の知見？を記載していこうと思います笑</p>

<h1>RiotImageSlider</h1>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FKurowasi%2Friot-image-slider" title="Kurowasi/riot-image-slider" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/Kurowasi/riot-image-slider">github.com</a></cite></p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>, Bootstrapなどは利用せず、Riot.jsだけで動かすことができます。</p>

<p>プロダクトがIE11, Edge, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>に対応しているため、それらの環境でも動くようにしました。</p>

<p>自分の望む大きさのタグでimage-sliderタグを囲い、<br/>
表示したい画像をimage-sliderタグ内に入れるだけで動きます。</p>

<p>オプションを設定してあげることで、スライド速度やボタンの非表示などもできます。</p>

<h1>汎用性の高いタグを作成することでの知見</h1>

<h2>カスタムタグはblock要素ではない</h2>

<p>ユーザ側で大きさを指定できる方が汎用性は高いと思います。</p>

<p>そこで、カスタムタグの親の大きさに合わせて形が変わるように作ろうと思った時に、<br/>
最初上手くいきませんでした。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">style</span><span class="synIdentifier">=</span><span class="synConstant">&quot;width: 400px; height: 200px;&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span>not-block<span class="synIdentifier">&gt;&lt;/</span>not-block<span class="synIdentifier">&gt;</span> ⇦width: 400px; height: 200px;にはなりませんでした。
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>not-block<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>not-blockタグ<span class="synIdentifier">&lt;/</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">style</span><span class="synIdentifier">&gt;</span>
    :scope <span class="synIdentifier">{</span>
      <span class="synType">width</span>: <span class="synConstant">100%</span>;
      <span class="synType">height</span>: <span class="synConstant">100%</span>;
    <span class="synIdentifier">}</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">style</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>not-block<span class="synIdentifier">&gt;</span>
</pre>


<p>原因はカスタムタグ(not-blockタグ)がBlock要素ではなかったからです。</p>

<p>なので、<code>display: block;</code>を指定してあげると上手く動きます。</p>

<pre class="code lang-html" data-lang="html" data-unlink>  <span class="synIdentifier">&lt;</span><span class="synStatement">style</span><span class="synIdentifier">&gt;</span>
    :scope <span class="synIdentifier">{</span>
      <span class="synType">display</span>: <span class="synConstant">block</span>;
      <span class="synType">width</span>: <span class="synConstant">100%</span>;
      <span class="synType">height</span>: <span class="synConstant">100%</span>;
    <span class="synIdentifier">}</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">style</span><span class="synIdentifier">&gt;</span>
</pre>


<h2>documentから要素の検索を行わない</h2>

<p>カスタムタグ内の要素に対してclickイベントの際の処理を追加する場合、<br/>
最初はdocument.querySelector()やdocument.getElementById()などで、<br/>
要素検索を行い、その要素にイベントが起きた際の処理を追加していました。</p>

<p>最初は上手く動いているように見えたのですが、<br/>
同じタグを複数表示した際に、問題が起きました。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom-tag<span class="synIdentifier">&gt;&lt;/</span>custom-tag<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom-tag<span class="synIdentifier">&gt;</span>/custom-tag<span class="synError">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>custom-tag<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h2</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;custom-class&quot;</span><span class="synIdentifier">&gt;</span>カスタムタグ<span class="synIdentifier">&lt;/</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.on</span>(<span class="synConstant">'mount'</span><span class="synSpecial">, </span><span class="synIdentifier">function</span>()<span class="synSpecial"> </span><span class="synIdentifier">{</span>
<span class="synSpecial">      </span><span class="synStatement">document</span><span class="synSpecial">.querySelector</span>(<span class="synConstant">'.custom-class'</span>)<span class="synSpecial">.addEventListener</span>(<span class="synConstant">'click'</span><span class="synSpecial">, tag.click</span>)
<span class="synSpecial">    </span><span class="synIdentifier">}</span>)
<span class="synSpecial">    tag.click = </span><span class="synIdentifier">function</span>()<span class="synSpecial"> </span><span class="synIdentifier">{</span>
<span class="synSpecial">      console.log</span>(<span class="synConstant">'click'</span>)
<span class="synSpecial">    </span><span class="synIdentifier">}</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom-tagu<span class="synIdentifier">&gt;</span>
</pre>


<p>一つ目の<code>&lt;custom-tag&gt;</code>をクリックした際に、<br/>
consoleには、clickが2回出てしまいます。</p>

<p>documentから参照をしているため、document.querySelectorは両方とも、<br/>
1つ目の<code>custom-tag</code>内の<code>custom-class</code>を参照してしまうのです。<br/>
(普通に考えると当たり前ですが、1つ表示を行いながら作っていた時は気づきませんでした)</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Friot.js.org%2Fja%2Fguide%2F%23%25E3%2582%25A4%25E3%2583%2599%25E3%2583%25B3%25E3%2583%2588%25E3%2583%258F%25E3%2583%25B3%25E3%2583%2589%25E3%2583%25A9" title="カスタムタグ · Riot.js" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://riot.js.org/ja/guide/#%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88%E3%83%8F%E3%83%B3%E3%83%89%E3%83%A9">riot.js.org</a></cite></p>

<p>カスタムタグ内で既に用意しているタグなどであれば、<br/>
onclickとテンプレート変数などを利用すれば大丈夫ですが、<br/>
後述する<code>&lt;yield/&gt;</code>などを利用する場合、そうもいきません。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Friot.js.org%2Fja%2Fguide%2F%23%25E5%2590%258D%25E5%2589%258D%25E4%25BB%2598%25E3%2581%258D%25E8%25A6%2581%25E7%25B4%25A0" title="カスタムタグ · Riot.js" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://riot.js.org/ja/guide/#%E5%90%8D%E5%89%8D%E4%BB%98%E3%81%8D%E8%A6%81%E7%B4%A0">riot.js.org</a></cite></p>

<p>Riot.jsの機能である、名前付き要素を利用することも考えたのですが、<br/>
mountイベント内では、まだ参照できませんでした。</p>

<p>結論としては、Riot.jsのリファレンス内でも使われている、<br/>
<code>this.root</code>から検索するようにしました。<br/>
<code>this.root</code>はカスタムタグを参照しているので、<br/>
カスタムタグ内でしか検索を行わなくなるので、自分の意図した通りの動きになりました。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>custom-tag<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h2</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;custom-class&quot;</span><span class="synIdentifier">&gt;</span>カスタムタグ<span class="synIdentifier">&lt;/</span><span class="synStatement">h2</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.on</span>(<span class="synConstant">'mount'</span><span class="synSpecial">, </span><span class="synIdentifier">function</span>()<span class="synSpecial"> </span><span class="synIdentifier">{</span>
<span class="synSpecial">      tag.root.querySelector</span>(<span class="synConstant">'.custom-class'</span>)<span class="synSpecial">.addEventListener</span>(<span class="synConstant">'click'</span><span class="synSpecial">, tag.click</span>)
<span class="synSpecial">    </span><span class="synIdentifier">}</span>)
<span class="synSpecial">    tag.click = </span><span class="synIdentifier">function</span>()<span class="synSpecial"> </span><span class="synIdentifier">{</span>
<span class="synSpecial">      console.log</span>(<span class="synConstant">'click'</span>)
<span class="synSpecial">    </span><span class="synIdentifier">}</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom-tag<span class="synIdentifier">&gt;</span>
</pre>


<h2>clearIntervalやcancelAnimationFrameを忘れないように</h2>

<p>カスタムタグ内でsetIntervalやrequestAnimationFrameを利用することがあると思います。</p>

<p>カスタムタグをifなどで非表示した際に、カスタムタグの情報がすべて消えてくれる気がしてしまうのですが、<br/>
当たり前ですが、setIntervalなどはwindowオブジェクトのメソッドですので、<br/>
タグが消えても動いてしまいます。</p>

<p>思わぬバグを生まないためにも、タグが消えた際にはちゃんとクリアするようにしましょう。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">  </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">  tag.on</span>(<span class="synConstant">'unmount'</span><span class="synSpecial">, </span><span class="synIdentifier">function</span>()<span class="synSpecial"> </span><span class="synIdentifier">{</span>
<span class="synSpecial">    clearInterval</span>(<span class="synSpecial">tag.intervalId</span>)
<span class="synSpecial">    </span><span class="synStatement">window</span><span class="synSpecial">.cancelAnimationFrame</span>(<span class="synSpecial">tag.requestAnimationId</span>)
<span class="synSpecial">  </span><span class="synIdentifier">}</span>)
<span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
</pre>


<h2><code>&lt;yield/&gt;</code>が便利</h2>

<p>拡張性が高いカスタムタグを作るには、<code>&lt;yield/&gt;</code>はとても重要な機能です。</p>

<p>軽い説明に関しては、他に記事を書いているので、そちらの参照をお願いいたします。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2019%2F02%2F06%2F215822" title="Riot.jsのyield内でテンプレート変数を利用する方法 - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2019/02/06/215822">kurowasi2525.hatenablog.com</a></cite></p>

<h1>最後に</h1>

<p>デザインが確定せず、2日ほど暇な時間があったので、<br/>
自分が使いやすいと思う、スライダーを作ってみたのですが、<br/>
思ったより多くの学びがありました。</p>

<p>僕は、Riot.jsを始めたばかりなので、長年使った人から見ると、<br/>
何を当たり前のことを言っているんだと思われるかもしれません。</p>

<p>何か他に良い手法などがあれば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>などで教えていただけると幸いです。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Riot.jsのyield内でテンプレート変数を利用する方法
BASENAME: 2019/02/06/215822
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/06/2019 21:58:22
CATEGORY: Riot.js
CATEGORY: JavaScript
-----
BODY:
<h1>yieldとは？</h1>

<p>カスタムタグ内で<code>&lt;/yield&gt;</code>を入れることで、</p>

<p>タグをカスタムタグで囲うことで、中身が<code>&lt;yield&gt;</code>部分に出力されます。</p>

<p>index.html</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custome<span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>ここに内容を記載します。<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custome<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>custome<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>yield<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custome<span class="synIdentifier">&gt;</span>
</pre>


<p>上記を実行すると、以下のように</yield>部分に入ります。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custome<span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>ここに内容を記載します。<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custome<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
</pre>


<h1>テンプレート変数が使えない！？</h1>

<p>カスタムタグ内で、他のカスタムタグを呼び出すことは、よくあると思います。</p>

<p>そこで、テンプレート変数を使おうとするとうまく動きません。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>yield<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>{ contents }<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    </span><span class="synIdentifier">this</span><span class="synSpecial">.contents = </span><span class="synConstant">'ここに内容を記載します。'</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<p>上手くいきそうな気がしますが、結果は以下の通り</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<h1><code>&lt;/yield&gt;</code>に入った場合、テンプレート変数の参照は、そのカスタムタグに</h1>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>yield<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.contents = </span><span class="synConstant">'こっちだよ。'</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>{ contents }<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.contents = </span><span class="synConstant">'ここに内容を記載します。'</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<p><code>&lt;/yield&gt;</code>を宣言している方のJSオブジェクトを参照するみたい</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>こっちだよ。<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<h1>解決策</h1>

<p>子要素にデータを渡してあげる</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>yield<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier"> contents=</span><span class="synConstant">{</span><span class="synIdentifier"> contents }&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>{ opts.contents }<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.contents = </span><span class="synConstant">'ここに内容を記載します。'</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<p>子要素のタグにデータをセット<code>contents={ contents }</code></p>

<p>テンプレート変数でオプションを参照するように修正<code>opts.contents</code></p>

<h1>キャメルケースにすると参照されない</h1>

<p>子要素のタグにデータを渡す際に、キャメルケースで記載すると上手く動かなくなります。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>yield<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier"> contentsMessage=</span><span class="synConstant">{</span><span class="synIdentifier"> contentsMessage }&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>{ opts.contentsMessage }<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.contentsMessage = </span><span class="synConstant">'ここに内容を記載します。'</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B1%A5%D0%A5%D6">ケバブ</a>ケースで記載をすれば上手くいきます。</p>

<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>タイトル<span class="synIdentifier">&lt;/</span><span class="synStatement">h1</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>yield<span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>

<span class="synIdentifier">&lt;</span>caller<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span>custom<span class="synIdentifier"> contents-message=</span><span class="synConstant">{</span><span class="synIdentifier"> contentsMessage }&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>{ opts.contentsMessage }<span class="synIdentifier">&lt;/</span><span class="synStatement">p</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span>custom<span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synSpecial">    </span><span class="synIdentifier">var</span><span class="synSpecial"> tag = </span><span class="synIdentifier">this</span>
<span class="synSpecial">    tag.contentsMessage = </span><span class="synConstant">'ここに内容を記載します。'</span>
<span class="synSpecial">  </span><span class="synIdentifier">&lt;/</span><span class="synStatement">script</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span>caller<span class="synIdentifier">&gt;</span>
</pre>


<p><code>contentsMessage</code>を<code>contents-message</code>に変更</p>

<h1>最後に</h1>

<p>最近、業務でRiot.jsを使うようになったのですが、
（今更...）</p>

<p>本当にシンプルなのに高機能！</p>

<p>Vue.jsに負けず劣らず、触っていて楽しい。</p>

<p>これからちょっとずつRiot.jsの記事を書いていけたらと思います笑</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Flutter
BASENAME: 2018/09/02/151626
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/26/2018 22:17:38
-----
BODY:
<h1>記録的な時間で美しいネイティブアプリを構築</h1>

<p>Flutterは記録的な時間で<a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>のネイティブ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%D5%A5%A7%A5%A4%A5%B9">インターフェイス</a>を高品質で作るための<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>のモバイルアプリ<a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>。
Flutterは既存のコードで動作し、の世界中の開発者や組織で使われており、無料で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>である。</p>

<h2>速く開発できる</h2>

<p>ホットリロードは、あなたのアプリが使えるようにミリ秒描画される。
完全カスタマイズ可能な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>の豊富なセットを利用して、数文でネイティブ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%D5%A5%A7%A5%A4%A5%B9">インターフェイス</a>を構築できる。</p>

<h2>表現力豊かで適応性のあるUI</h2>

<p>ネイティブで使うユーザの体験に焦点を当てた機能を素早く出荷できる。
階層かされた<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A1%BC%A5%AD%A5%C6%A5%AF%A5%C1%A5%E3">アーキテクチャ</a>層は、完全にカスタマイズ可能で、
信じられないほど速い<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%C0%A5%EA%A5%F3%A5%B0">レンダリング</a>、表現力豊かで、適応性のあるデザインになる。</p>

<h2>ネイティブのパフォーマンス</h2>

<p>Flutterの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>は、スクロール、ナビゲーション、アイコン、フォントなどの、
すべての重要なプラットフォームの違いを、組み込んでいて、
<a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>両方で完全なネイティブパフォーマンスを提供する。</p>

<h1>始める：<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>にインストール</h1>

<h2>動作環境</h2>

<p>Flutterをインストールして実行するには、あなたの開発環境はこれらの最小限の要件を満たす必要がある。</p>

<ul>
<li>OS：Widnwos7 SP1かそれ以降のもの</li>
<li>ディスクの空き：400MB</li>
<li><p>ツール：Flutterはあなたの環境で利用可能な、これらのツールに依存する</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/PowerShell">PowerShell</a> 5.0かそれより新しいの</li>
<li>Git for <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a></li>
</ul>
</li>
</ul>


<h2>Flutter SKDを手にする</h2>

<ol>
<li>Flutter <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>の最新β版を入手するには、次のインストールバンドルをダウンロード
2, zip-fileを展開し、Flutter SKDをインストールしたい場所flutterを置く</li>
<li>flutter<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ内にあるflutter_console.batファイルを探す。そして、ダブルクリックでスタートする</li>
</ol>


<p>あなたはFlutterコンソールでFlutterコマンドを実行する準備ができた。
既にあるFlutterの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>ジョンをアップデートするには、<a href="https://flutter.io/upgrading/">Upgrading Flutter</a>を見て</p>

<h2>パスの更新</h2>

<p>いつもの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>のコマンドプロントでFlutterコマンドを実行したければ、
次の手順を実行してPATH<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>にFlutterを追加する。</p>

<ul>
<li>コン<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%ED%A1%BC%A5%EB">トロール</a>パネルｰ>ユーザーアカウント-><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>の変更に行く</li>
<li><p>ユーザ変数の下にPathという名前の項目があるかを確認する</p>

<ul>
<li>項目がある場合、既にある値を；を使って分けて、flutter\binまでのフルパスを追加する</li>
<li>項目が存在しない場合、flutter\binのフルパスを値として持つ、Pathという名前のユーザ変数を新しく作成する</li>
</ul>
</li>
</ul>


<p>この変更を完全に適応させるには<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>を再起動する。</p>

<h2>flutter doctorを実行</h2>

<p>Flutter Consoleで、次のコマンドを実行して、
セットアップを完了するためにインストールする必要がある依存関係があるかどうかを確認する。</p>

<pre class="code" data-lang="" data-unlink>$ flutter doctor</pre>


<p>このコマンドは、あなたの環境を確認して、
ターミナルウィンドウにレポートを表示する。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>はFlutterにバンドルされているが、別々に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a>をインストール必要はない。
インストールする必要がある可能性のある他のソフトウェアや実行するタスク（太字で表示）については、
出力を注意深く確認してください。</p>

<p>例えば：</p>

<pre class="code" data-lang="" data-unlink>[-] Android toolchain - develop for Android devices
    • Android SDK at D:\Android\sdk
    ✗ Android SDK is missing command line tools; download from https://goo.gl/XxQghQ
    • Try re-installing or updating your Android SDK,
      visit https://flutter.io/setup/#android-setup for detailed instructions.</pre>


<p>次のセクションでは、どのようにこれらのタスクを実行し、セットアッププロセスを終了することについて述べます。
不足している依存関係をインストールしたら、flutter doctorコマンドを再び実行して、すべてを正しく設定したことを確認する。</p>

<h1><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>の設定</h1>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>のインストール</h2>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>をダウンロード＆インストールする</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>を起動し、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>のセットアップウィザードを実行する。
これは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>を開発する時にFlutterに必要な、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> SKD Platform-Tools, <a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a> Build-Toolsの最新版をインストールする。</li>
</ol>


<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> deviceを立ち上げる</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>実機でFlutterアプリを実行・テストする準備のために、Android4.1以上を実行できる<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>実機が必要</p>

<ol>
<li>実機でDeveloper optionsとUSB debuggingを有効にする。詳しい手順は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> documentを見てください。</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>だけ：<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a> USB Driverをインストール</li>
<li>USBケーブルを使って、電話のプラグをコンピュータに繋ぐ。実機にプロンプトが表示されたら、実機にアクセスできるようにコンピュータで認証する。</li>
<li>ターミナルで、flutter devicesコマンドを実行して、Flutterが<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>実機と接続が認識されているか検証する。</li>
</ol>


<p>デフォルトでは、Flutterはabdツールを基本として<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>ジョンを使います。
Flutterで違うインストールされた<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>を使いたい場合は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/ANDROID">ANDROID</a>_HOMEにインストールした<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リに設定する必要がある。</p>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF">エミュレータ</a>を立ち上げる</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF">エミュレータ</a>でFlutterアプリを実行・テストする準備のために、これらの手順に従う必要がある。</p>

<ol>
<li>マシーンで<a class="keyword" href="http://d.hatena.ne.jp/keyword/VM">VM</a> accelerationを有効にする</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>>Tools><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>>AVD Managerを起動し、Create Virtual Deviceを選択する。(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>サブメニューは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>プロジェクト内にある場合のみ表示される）</li>
<li>デ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>定義を選んでNextを選択する</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF">エミュレータ</a>に欲しい<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>ジョンのシステムイメージを1つ以上選び、Nextを選択する。<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>か<a class="keyword" href="http://d.hatena.ne.jp/keyword/x86">x86</a>_64イメージが推奨されている</li>
<li>Under Emulated PerformanceでHardware-GLES2.0を選択して、hardware accelerationを有効にする</li>
<li>AVD設定が正確化確認して、Finishを選択する
上の手順の詳細は、Managing AVDsを見てください。</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a> Virtual Device Manager上の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB%A5%D0%A1%BC">ツールバー</a>にあるRunをクリックする。<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF">エミュレータ</a>が起動し、選択されたOSの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>ジョンとデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>がデフォルトで表示される。</li>
</ol>


<p>次の手順
Next step： Configure Editor</p>

<h1>始める：<a class="keyword" href="http://d.hatena.ne.jp/keyword/macOS">macOS</a>にインストール</h1>

<h2>動作環境</h2>

<p>Flutterをインストールして実行するには、あなたの開発環境に、これらの最小の要求を満たす必要がある。</p>

<ul>
<li>OS: <a class="keyword" href="http://d.hatena.ne.jp/keyword/macOS">macOS</a>(64bit)</li>
<li>空き容量: 700MB</li>
<li><p>ツール: Flutterは使用する環境で、これらの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a>ツールに依存する</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>, mkdir, rm, git, <a class="keyword" href="http://d.hatena.ne.jp/keyword/curl">curl</a>, unzip, which</li>
</ul>
</li>
</ul>


<h2>Flutter <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>を手に入れる</h2>

<p>1.最新のベータリリースのFlutter <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>を手に入れるために、次のインストールバンドルをダウンロードしてください。<br/>
2.希望の場所でファイルを展開する。</p>

<pre class="code" data-lang="" data-unlink>$ cd ~/development
$ unzip ~/Downloads/flutter_macos_v0.6.0-beta.zip</pre>


<p>3.flutterツールをパスに追加する</p>

<pre class="code" data-lang="" data-unlink>$ export PATH=`pwd`/flutter/bin:$PATH</pre>


<p>上のコマンドは現在のターミナルウィンドウに対して、一時的に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B4%C4%B6%AD%CA%D1%BF%F4">環境変数</a>を設定します。
永久的にパスにFlutterを追加したければ、あなたのパスを更新をみてください。</p>

<p>あなたはFlutterコマンドを実行できる準備ができた。</p>

<p>既存のFlutterの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>ジョンを更新するためには、Flutterを更新をみてください。</p>

<h1>始める：エディターの設定</h1>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a>ツールと組み合わせた<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%AD%A5%B9%A5%C8%A5%A8%A5%C7%A5%A3%A5%BF">テキストエディタ</a>を使って、Flutterアプリをビルドできる。
しかしながら、より良い体験のために、エディタ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>の1つを使うことを推奨する。
エディタ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>を使うことで、コード補完、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%F3%A5%BF%A5%C3%A5%AF%A5%B9">シンタックス</a>ハイライト、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>エディターアシスタント、実行＆<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0">デバッグ</a>サポート、その他を得ることができる。</p>

<p>下の手順に従って、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/IntelliJ">IntelliJ</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/VSCode">VSCode</a>にエディター<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>を追加してください。
違うエディタを使いたい場合は、スキップして大丈夫です。
次の手順の最初のアプリを作って実行に行ってください。</p>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a></h2>

<p>Flutterと<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>をインストール</p>

<p>Flutterは二つの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>をサポートしている</p>

<ul>
<li>Flutter<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>はFlutter開発のワークフローを強化する（実行、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%D0%A5%C3%A5%B0">デバッグ</a>、ホットリロード、その他）</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>はコード解析を提供する（コードの検証、コード保管、その他）</li>
</ul>


<p>これらをインストールするには</p>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>を立ち上げる</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>設定を開く（<a class="keyword" href="http://d.hatena.ne.jp/keyword/macOS">macOS</a>なら、Preferences>Plugins。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>&amp;<a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>はFile>Settings>Plugins）</li>
<li>Browse repositories...を選択して、Flutter<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>を選択して、installをクリック</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>をインストールするプロンプトが出たら、Yesをクリック</li>
<li>プロンプトが表示されたら、Restartをクリック</li>
</ol>


<h1>始める：<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C6%A5%B9%A5%C8%A5%C9%A5%E9%A5%A4%A5%D6">テストドライブ</a></h1>

<p>このページでは、Flutterで試運転する方法を説明する。
テンプレートから新しいFlutterアプリを作成し、実行し、Hot Reloadで変更する方法を学習する。</p>

<p>Flutterはフレキシブルなツールキットで、Flutterアプリを作成、ビルド、実行に最適な開発ツールを選択してください。</p>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a></h2>

<h3>新しいアプリの作成</h3>

<ol>
<li>File>New Flutter Projectを選択</li>
<li>Flutter aplicationというプロジェクトタイプを選択して、Nextを押す</li>
<li>プロジェクト名（例えばmyapp）を打ち込み、Nextを押す</li>
<li>Finishをクリック</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>がSKDをインストールすること、プロジェクトを作成するのを待ちます</li>
</ol>


<p>上のコマンドが、Material Componentsを使った簡単なデモアプリを含むmyappという名前のFlutterプロジェクト<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リを作成する。</p>

<p>プロジェクト<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リにlib/main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>というアプリのためのコードがある。</p>

<h3>アプリの実行</h3>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>のメイン<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB%A5%D0%A1%BC">ツールバー</a>を見つける</li>
<li>target selectorでアプリを実行するための<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>デ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>を選ぶ。有効なものがリストにない場合は、Tools><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>>AVD Managerを選び、これらを作成してください。詳しい内容は、Managing AVDsを見てください。</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C4%A1%BC%A5%EB%A5%D0%A1%BC">ツールバー</a>にあるRun iconをクリックするか、メニューアイテムのRun>Runを呼び出してください。</li>
<li>動いたら、あなたのデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>かシュミレーターにアプリが起動したか確認してください。</li>
</ol>


<h3>ホットリロードを試す</h3>

<p>Flutterはホットリロードを使って高速な開発サイクルを提供する。
ホットリロードは、アプリケーションの状態を失ったり、再起動することなく、実行中のアプリケーションのコードをリロードできる機能。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を少しだけ変更してみてみると、<a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>か<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%DE%A5%F3%A5%C9%A5%E9%A5%A4%A5%F3">コマンドライン</a>ツールにホットリロードを求めると、シミュレータ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%DF%A5%E5%A5%EC%A1%BC%A5%BF">エミュレータ</a>、またはデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>の変更を確認できる。</p>

<ol>
<li>文字列を変更する
'You have pushed the button this many times:'を'You have clicked the button this many times:'にする</li>
<li>Stopボタンを押さないで、アプリを実行した状態にする。</li>
<li>変更を確認するには、Save Allを呼び出すか、Hot Reloadをクリックする（稲妻アイコンが付いたボタン）</li>
</ol>


<h1>初めてのFlutterアプリを書く　Part1</h1>

<p>これはあなたの初めてのFlutterアプリを作成するためのガイドです。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A5%D6%A5%B8%A5%A7%A5%AF%A5%C8%BB%D8%B8%FE">オブジェクト指向</a>、変数・ループ・条件分岐など基本的なプログラミングの概念に親しみがあれば、この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C1%A5%E5%A1%BC%A5%C8%A5%EA%A5%A2%A5%EB">チュートリアル</a>を終わらせることができる。
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a>やモバイルプログラミングの経験は必要ない。</p>

<p>このガイドは、2つのcodelabで構成されたPart１です。
Part2は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a> Developersで見つけることができる。
Part1も<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a> Developersで見ることができる。</p>

<h2>Part1で構築するもの</h2>

<p>スタートアップのために名前を生成して提案する簡単なモバイルアプリを実装する。
ユーザは名前を選択、未選択できて、一番気に入ったものを保存できる。
コードはずらずらと名前を生成する。
ユーザはスクロールできて、さらに多くの名前が生成される。
制限はなく、ユーザはずっとスクロールできる。</p>

<p>Part1の完成したアプリがどのように動くのかアニメーションするGIFを見てください。</p>

<p><em>Part1で何を学べるか</em>
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>で自然にみられるFlutterアプリをどのように書くか
- Flutterアプリの基本構造
- パッケージを見つけて使って、機能を拡張する
- 高速な開発サイクルのためにホットリロードを使う
- ステートフルな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>の実装方法
- ずらずらと読み込まれる、無限のリストを作成する方法</p>

<p>codelabのPart2では、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6">インタラクティブ</a>性を追加し、アプリのテーマを変更し、新しいスクリーンにナビゲーションする能力を追加する。（Flutterでrouteを呼ぶ)</p>

<p>どのように使う
このlabを完成させるには、Flutter <a class="keyword" href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>とエディターの二つが必要。
codelabでは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>を推奨しているが、あなたが好むエディタを使うこともできる。</p>

<p>次のデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>を使って、このcodelabを実行することができる。
- 物理的なデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>（<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>か<a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>）をあなたのコンピュータと接続して、開発モードにする
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>シュミレータ
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>シュミレータ</p>

<h2>Step1：Flutterアプリのスターターを作る</h2>

<p>最初のFlutterアプリケーションの使い方の手順を使用して、シンプルなテンプレートのFlutterアプリケーションを作成する。
myappの代わりに、startup_namerという名前を付ける。</p>

<p>ヒント：<a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>のオプションとして「New Flutter Project」が表示されない場合は、Flutterおよび<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a>用に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>がインストールされていることを確認してください。</p>

<p>このcodelabで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a>コードが存在するlib/main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>を編集していく。</p>

<ol>
<li>lib/main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>のコンテンツを置き換える。lib/main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>からコードのすべてを削除する。次のコードに置き換えると、"<a class="keyword" href="http://d.hatena.ne.jp/keyword/Hello%20World">Hello World</a>"とスクリーンの真ん中に表示される。</li>
</ol>


<p>Tip：コードをアプリに貼り付けると、字下げでゆがんでしまうことがある。Flutterツールでこれを自動的に修正することができる。
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a> / <a class="keyword" href="http://d.hatena.ne.jp/keyword/IntelliJ">IntelliJ</a> IDEA: コードを右クリックして、Reformat Code with dartfmtを選択
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/VSCode">VSCode</a>; 右クリックしてFormat Documentを選択
- Terminal: Run flutter format <filename></p>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>で緑の矢印をクリックしてアプリを実行する。あなたのデ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>によって、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>か<a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>で出力がかわる。</li>
</ol>


<p>Tip：物理デ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%B9">バイス</a>で最初に実行する時、しばらくロードする。その後に、ホットリロードを使うことができ、早く更新できる。アプリを実行している場合、保存するとホットリロードが実行される。</p>

<p>注目
- このサンプルはマテリアルアプリを作成する。マテリアルはモバイルとWebで基本となるビジュアル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%B6%A5%A4%A5%F3%B8%C0%B8%EC">デザイン言語</a>である。Flutterは豊富なマテリアル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>を提供する。
- メインメソッドはfat arrow(=>)表記法で指定する。fat arrow表記法を使うことで、関数やメソッドを一行で書ける。
- このアプリは、アプリ自体を作ることができる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>であるStatelessWidgetを継承している。Flutterで一番使われている<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>で、alignment, padding, layoutを含んでいる。
- Scaffoldマテリアルライブラリの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>は、デフォルトのアプリケーション<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>、タイトル、およびホームスクリーン用の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>ツリーを保持するボディプロパティを提供する。この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>のサブツリーはかなり複雑になる。
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>の主な仕事はbuild(), 他のより低いレベルの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>に関して<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>を表示する方法を説明するメソッドを提供すること。
- この例の本文はCenter, Text子<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>を含む<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>で構成されている。Center<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>のサブツリーを画面の中央に揃える。</p>

<h2>Step2：外部パッケージを使う</h2>

<p>この手順では、english_wordsという名前の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>のパッケージを使い始める。
english_wordsは、数千の最も使われる英単語に加えて役に立つ関数が含まれている。</p>

<p>english_wordsパッケージと他の多くの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>パッケージは、pub.dartlang.orgで見つけることができる。</p>

<ol>
<li>pubspecファイルはアセットやFlutterアプリの依存関係を管理する。pubspec.<a class="keyword" href="http://d.hatena.ne.jp/keyword/yaml">yaml</a>で、english_words(3.1以上)を依存関係のリストに追加する。下のハイライト部分を追加。</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>のエディタビューでpubspecを表示しながらPackages getをクリックする。これで、あなたのプロジェクトにパッケージがpullされる。コンソールに次のように表示されるでしょう。</li>
</ol>


<p>Packages getを行うと、pubspec.lockファイルが自動生成され、プロジェクトにpullされた全てのパッケージのリストとそれらの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>ジョンのナン<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A1%BC">バー</a>が記述されてる。</p>

<ol>
<li>lib/main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>で、新しいパッケージをインポートする</li>
</ol>


<p>入力時に、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android%20Studio">Android Studio</a>はライブラリーをインポートするように提案してくれる。
その時、インポートの文字列が灰色に描画され、インポートされたライブラリが使用されていないことがわかる（今の所は）</p>

<ol>
<li>文字列"<a class="keyword" href="http://d.hatena.ne.jp/keyword/Hello%20World">Hello World</a>"を使用する代わりに、英語の単語パッケージを使用してテキストを生成する。</li>
</ol>


<p>次のように変更する</p>

<ol>
<li>アプリを実行しているなら、ホットリロードボタンを使うことでアプリを実行したまま更新できる。ホットリロードをクリックかプロジェクトを保存するたびに、実行しているアプリにランダムに選ばれた違う文字を見ることができる。これは、文字がMaterialAppが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EC%A5%F3%A5%C0%A5%EA%A5%F3%A5%B0">レンダリング</a>を必要とするたびに実行されるbuildメソッド内で生成されるか、Flutter Inspectorでプラットフォームを切り替えるためです。</li>
</ol>


<h3>問題？</h3>

<p>アプリが正しく実行されてない場合、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BF%A5%A4%A5%D7%A5%DF%A5%B9">タイプミス</a>を探す。必要な場合は、次のリンクのコードを使用してトラックに戻る
- pubspec.<a class="keyword" href="http://d.hatena.ne.jp/keyword/yaml">yaml</a>
- lib/main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a></p>

<h2>Step3：ステートフル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>を追加</h2>

<p>ステートレス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>は不変である。不変とはすべての値はfinalであり、プロパティを変更することが出来ないという意味である。</p>

<p>ステートフル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>が動いている間、変更される状態を維持している。ステートフル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>を実装するには、最低でも二つのクラスが必要である。
State(2)クラスでStatefulWidget(1)クラスの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>を作成する。
StatefulWidgetクラス自体は不変だが、Stateクラスは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>のずっと維持する。</p>

<p>この手順では、ステートフル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>であるStateクラスを作成するRandomWordsとRandomWordsStateを追加する。
RandomWordsは、ステートレス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>である既存のMyAppの中で子供としてRandomWordsを使う。</p>

<ol>
<li>最小限のステートクラスを作成する。main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>の下に追加する。</li>
</ol>


<p>State<RandomWords>と宣言しているところに注意してください。
これは、汎用的に使うことができるStateクラスをRandomWordsでの使用に特化させてることを示している。
アプリのロジックと状態のすべては、RandomWords<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>で状態を維持する。
このクラスは、ユーザのスクロールで無限に伸びる生成された単語と、ユーザは、ハートアイコンをトグルすることで、リストからこれらを追加や削除できるお気に入りの単語を保存できる。</p>

<p>RandomWordsStateはRandomWordsに依存している。次に追加する。</p>

<ol>
<li>main.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dart">dart</a>にステートフル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>のRandomWordsを追加する。このRandomWords<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>は、Stateクラスを作成することのほかにほとんどしない。</li>
</ol>


<p>ステートクラスを追加した後に、<a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>はクラスがビルドメソッドが書けているという。次に、単語を生成するコードをMyAppからRandomWordsStateに移動し、単語を生成する基本的なbuildメソッドを追加する。</p>

<ol>
<li><p>RandomWordsStateにbuildメソッドを追加する</p></li>
<li><p>MyAppから単語を生成するコードを削除する</p></li>
<li><p>アプリを再起動する。アプリをホットリロードやアプリを保存するたびに単語が表示されるという前と同じ振る舞いをする。</p></li>
</ol>


<h2>Step4：無限にスクロールできるListViewを作成する</h2>

<p>この手順では、RandomWordsStateを単語のリストを作成と表示をするように拡張する。
ListView<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>でリストを表示し、ユーザのスクロールで無限に伸びる。
ListViewのbuilderは、factoryコンスト<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%AF">ラク</a>トを使うと、必要に応じて遅延ビューを構築することができる。</p>

<ol>
<li>提案された単語を保存するために、RandomwWordsStateクラスに_suggestionsリストを追加する。更に、大きいフォントサイズを作成するためのbiggerFont変数を追加。</li>
</ol>


<p>次に、RandomwordsStateクラスに_buildSuggestions()関数を追加する。このメソッドは提案された単語を表示するListViewを構築する。</p>

<p>このListViewクラスはbuilderプロパティを提供する。
itemBuilderは、ファクトリービルダーであり、コールバック関数は無名関数として指定される。
二つの引数が関数に渡される。BuildContextと行要素のであるiである。
この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%C6%A5%EC%A1%BC%A5%BF">イテレータ</a>は、0から始まり、提案された単語の関数が呼ばれるたびに増加していく。
このモデルは、ユーザのスクロールで無限に伸びる、提案されたリストを許す。</p>

<ol>
<li>以下のように、RandomWordsStateクラスに_buildSuggestions()関数の全体を追加する（好みなら、コメントを削除してください）</li>
</ol>


<p><em>buildSuggestions()関数は単語ごとに1回</em>buildRow()を呼ぶ。この関数は、ListTitleで新しいペアごとに表示され、次のステップでとても魅力的な行を作ることができる。</p>

<ol>
<li><p>RandomWordsStateに_buildRow()関数を追加する</p></li>
<li><p>直接単語生成ライブラリを呼ぶのではなく、RandomWordsStateで_buildSuggestions()を使うためにbuildメソッドを更新する。(Scaffoldは基本的な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%C6%A5%EA%A5%A2%A5%EB%A5%C7%A5%B6%A5%A4%A5%F3">マテリアルデザイン</a>のヴィジュアルレイアウトを実装している)</p></li>
<li><p>MyAppのBuildメソッドのタイトル変えて、homeをRandomWords<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>に更新する。元のメソッドを以下のハイライトされたbuildメソッドに置き換える。</p></li>
<li><p>アプリを再起動する。どのくらいスクロールしても、単語のペアリングのリストが表示される。</p></li>
</ol>


<h2>次の手順</h2>

<p>おめでとう！</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>で動く、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6">インタラクティブ</a>なFlutterアプリを書きました。このcodelabであなたは以下を得た
- ゼロからFlutterアプリを作成した
- <a class="keyword" href="http://d.hatena.ne.jp/keyword/Dart">Dart</a>コードを書いた
- 外部の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B5%A1%BC%A5%C9%A5%D1%A1%BC%A5%C6%A5%A3">サードパーティ</a>ライブラリを利用
- 高速な開発サイクルのためにホットリロードを使う
- ステートフルな<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>の実装
- 無限にスクロールできるリストのlazily loadedを作成</p>

<p>このアプリを拡張した場合は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a> Developers Codelabsのpart2を通して、次の機能を追加する。
- ハートアイコンをクリックしてお気に入りの単語を保存する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A5%E9%A5%AF%A5%C6%A5%A3%A5%D6">インタラクティブ</a>機能を追加
- お気に入りとして保存したものを表示する新しい画面を追加して、新しいルートをナビゲーションに実装
- テーマカラーを変更して、all-whiteなアプリを作成</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: pyinstallerで躓いたところ～Pythonコードをexe化～
BASENAME: 2018/08/11/231337
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/11/2018 23:13:37
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg
-----
BODY:
<h1>はじめに</h1>

<p>友達から頂いた案件で、簡単に実行できるようにして欲しいという依頼があり、</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>コードをPyinstallerでexe化した際に躓いたところを紹介</p>

<p>案件の詳しい話は以下の記事で</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2018%2F08%2F11%2F224559" title="Python with Seleniumで業務自動化した際のTips集 - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2018/08/11/224559">kurowasi2525.hatenablog.com</a></cite></p>

<h1>pyinstallerとは</h1>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>で書かれたプログラムをexeファイルに変換してくれる。</p>

<p>当たり前？ですが、今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>の方対象です。</p>

<h1>ANACONDAをインストール</h1>

<p>なぜか、普通に入れた<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>だと動かなかったため、</p>

<p>ANACONDAを入れたほうがいいと思います。</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.anaconda.com%2Fdownload%2F" title="Downloads - Anaconda" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.anaconda.com/download/">www.anaconda.com</a></cite></p>

<h1>pyinstallerのインストール</h1>

<p>Anaconda Promptを起動</p>

<pre class="code" data-lang="" data-unlink>$ pip install pyinstaller
$ cd exe化するPythonファイルがあるディレクトリ
$ pyinstaller hoge.py</pre>


<p>successみたいのが表示されると、同じ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リに
・buildフォルダ
・distフォルダ
・<a class="keyword" href="http://d.hatena.ne.jp/keyword/hoge">hoge</a>.spec
が作成される</p>

<p>distフォルダ内に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>ファイル名と同じフォルダが作成されている。
今回の場合、<a class="keyword" href="http://d.hatena.ne.jp/keyword/hoge">hoge</a>フォルダ</p>

<p>そのフォルダ内に、exeファイルがあるのでダブルクリックすれば実行されるはず</p>

<h1>躓きポイント</h1>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>コード内で他のファイルを参照していると、落ちてしまう</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>の標準ライブラリ？や自分で作成した<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>ファイルなどは、</p>

<p>ちゃんと参照してくれる。</p>

<h2>import系</h2>

<p>今回僕は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>を使っていて、この<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>はpipで入れたのだが、</p>

<p>この<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>をインポートする部分で落ちてしまう。</p>

<p>解決策としては、インポートしたモジュールを</p>

<p>dist/exe化したフォルダ名内にコピーすると、うまくいく</p>

<p>モジュールを探す方法としては、以下のコマンドを打つことで確認することができる。</p>

<pre class="code" data-lang="" data-unlink>$pip show モジュール名</pre>


<h2>chromedriver, <a class="keyword" href="http://d.hatena.ne.jp/keyword/csv">csv</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>など</h2>

<p>これもimport系と同じように、dist/exe化したフォルダ名内にコピーすれば大丈夫</p>

<h1>最後に</h1>

<p>質問・ご意見などありましたら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>にご連絡くｄさい。</p>

<p>少しでもこの記事が良いと思って貰えたなら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Python with Seleniumで業務自動化した際のTips集
BASENAME: 2018/08/11/224559
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/11/2018 22:45:59
CATEGORY: Selenium
CATEGORY: Python
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg
-----
BODY:
<h1>はじめに</h1>

<p>2018年5月頃に突然、高校の友達Aから連絡が来て食事をすることになった。</p>

<p>Aさんはとあるお店を持つまで出世していて、業務を自動化して欲しいというお話だった。</p>

<p>1件目は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%D7%A5%EC%A5%C3%A5%C9%A5%B7%A1%BC%A5%C8">スプレッドシート</a>だったのでGASを書いて納品。</p>

<p>2件目はWebブラウザをimacrosで自動化している作業があるのだが、</p>

<p>そのプログラムの作成者がメンテナンスできなくなったため、対応して欲しいとのこと。</p>

<p>imacrosを触るのも嫌だったし、詳しく話してみて将来性を考えると<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>の方が良いと判断し、</p>

<p>提案して、合意してもらえた。</p>

<p>最初は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>で書く予定だったのですが、自分が所属している会社で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> with <a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>の自動化テストを、</p>

<p>外注していたので、これをいじれる人間になれば社内価値があがるかもと思い、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>に変更した。（相談済み）</p>

<p>初めて<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>でちゃんと納品できるものを作成したので、そこで得たTips集を残そうと思う。</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">友達からSeleninmでWeb操作の自動化案件を頂いた(元々はimacrosだったのを無理やり変えた)<br><br>貧弱なPCで並列処理をしなければならないのだが、ブラウザと言語は何が良いのだろう<br><br><a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>+ <a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>が一番環境整えやすくて軽そうなイメージ</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/1001085581894402048?ref_src=twsrc%5Etfw">2018年5月28日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<h1><a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a> with <a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>を書く際のTips</h1>

<p>※以下は成功体験から得たものなので、ベストプ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%AF">ラク</a>ティスではなく、
間違っていることも多くあると思いますが、何卒ご容赦ください</p>

<h2>sleepではなくWebDriverWaitを使おう</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>は所詮プログラムなので、ボタンが読み込み終わる前にボタンを押してしまうことがあります。</p>

<p>僕の場合はラズパイ＆<a class="keyword" href="http://d.hatena.ne.jp/keyword/Wifi">Wifi</a>での納品だったので、読み込み速度は不安定です。</p>

<p>そこでsleepを使いたくなってしまいますが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>にはWebDriverWaitという便利なものがあります。</p>

<pre class="code" data-lang="" data-unlink>WebDriverWait(self.browser, 10).until(
    EC.element_to_be_clickable((By.LINK_TEXT, &#39;ログイン&#39;))
).click()</pre>


<p>詳しいことは以下のサイトを参照してください</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fsoftwaretest.jp%2Flabo%2Ftech%2Flabo-294%2F" title="Selenium WebDriverのwaitを活用しよう│ソフトウェアテストラボ｜アプリテスト｜スマートフォンテスト｜株式会社SHIFT" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://softwaretest.jp/labo/tech/labo-294/">softwaretest.jp</a></cite></p>

<h2>WebDriverWaitは一つのメソッドで最初に書き、一回だけにしよう</h2>

<p>これもちゃんと仕様を調べてないのでわからないのですが、</p>

<p>一つのメソッド内に2回以上WebDriverWaitを記述すると、上手くいかない場合があります。</p>

<pre class="code" data-lang="" data-unlink>class Hoge:
    def do(self):
        WebDriverWait()
        WebDriverWait()

if __name__ == &#39;__main__&#39;:
    Hoge().do()</pre>


<p>上記の書き方だと2つ目以降が動かず、Timeoutしてしまう時があります。</p>

<p>ですが、別のメソッドに分けるとうまくいきます。</p>

<pre class="code" data-lang="" data-unlink>class Hoge:
    def done(self):
        WebDriverWait()

    def do(self):
        WebDriverWait()

if __name__ == &#39;__main__&#39;:
    Hoge().done()
    Hoge().do()</pre>


<h2>別ウィンドウで開いてしまうものがある場合</h2>

<pre class="code" data-lang="" data-unlink>WebDriverWait(self.browser, 10).until(
    EC.element_to_be_clickable((By.LINK_TEXT, &#39;別ウィンドウで開く&#39;))
).click()
self.browser.switch_to_window(self.browser.window_handles[1])</pre>


<p>WebDriverのwindow_handlesは立ち上がってるブラウザを配列として持っている。</p>

<p>switch_to_windowで参照するウィンドウを変えることができる。</p>

<h2>close()よりquit()を使おう</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/selenium">selenium</a>-dockerのみの現象かもしれませんが、</p>

<p>自動化実行→閉じる→自動化実行→閉じる→...</p>

<p>のような処理を行いたい場合、close()だと自動化→閉じる→何も起きない。</p>

<p>という現象が起きる。quit()で困ったことはないので、基本quit()でいいんじゃないかと思う。</p>

<h2>WebDriverには使う時に接続しよう</h2>

<p>WebDriverへの接続を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>生成時に行っていました。</p>

<pre class="code" data-lang="" data-unlink>class Hoge:
    __init__(self, config):
        self.browser = webdriver.Remote(
            command_executor = &#39;http://selenium-hub:4444/wd/hub&#39;,
            desired_capabilities = DesiredCapabilities.CHROME
        )
    def main(self):
        # schedule機能を利用
if __name__ == &#39;__main__&#39;:
    config_json = json.load(open(&#39;config.json&#39;))
    for k, v in config_json.imtes():
        Hoge(v).main()</pre>


<p>上記のようなコードだったため、自動化コードを実行するタイミングではなく、</p>

<p>プログラムが起動したタイミングでWebDriverと接続をしていました。</p>

<p>僕の案件の場合は、config.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>に100以上のプロパティがあったので、</p>

<p>起動時に100件以上<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>が作成され、接続を行い重くなってしまいました。</p>

<p>当たり前のことですが、実行するタイミングで接続するようにしましょう。</p>

<h2>ブラウザはなるべく大きくした方が良い</h2>

<p>※2018年8月12日　<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C4%C9%B5%AD">追記</a></p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>は、ページ内に表示されていないもの？はクリックできないときがあるみたい。</p>

<p>そこで解決として、<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>でスクロールするという方法がある。</p>

<p><blockquote class="twitter-tweet" data-lang="HASH(0xb53e630)"><p lang="ja" dir="ltr">anker linkもこちらの方法で解決できた<br><br><a class="keyword" href="http://d.hatena.ne.jp/keyword/selenium">selenium</a>にてButtonがクリックできない時の対処法 on <a href="https://twitter.com/Qiita?ref_src=twsrc%5Etfw">@Qiita</a> <a href="https://t.co/KQ0UQBYVhf">https://t.co/KQ0UQBYVhf</a></p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/1028507075750461440?ref_src=twsrc%5Etfw">August 12, 2018</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>でも、僕の場合は設定ファイルによってクリックする場所が違う。</p>

<p>みたいなコードを書いている部分があったため、</p>

<p>設定によって、初期状態で表示されている場合もあれば、</p>

<p>初期状態で表示されていない場合もある。</p>

<p>なので、スクロールで一番下までみたいのはできない。</p>

<p>場所によってスクロールする場所を決めたりする方法もあるが面倒。</p>

<p>なので僕は、ウィドウサイズを大きくすることで解決した。
（ディスプレイの解像度？などは関係ない）</p>

<pre class="code" data-lang="" data-unlink>self.browser.set_window_size(1024, 2000)</pre>


<h1>自動化した際の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>のTips</h1>

<h2>他の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>ファイルをインポートする</h2>

<pre class="code" data-lang="" data-unlink>/hoge
　┣ main.py
　┗ config.py</pre>


<p>上記のような階層の場合importするだけで簡単に使える</p>

<p>config.py</p>

<pre class="code" data-lang="" data-unlink>CONFIG = {
    &#39;aaa&#39; : 1,
    &#39;bbb&#39; : 2
}</pre>


<p>main.py</p>

<pre class="code" data-lang="" data-unlink>import config

print(config.CONFIG[&#39;aaa&#39;])</pre>


<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>ファイルをインポートする</h2>

<pre class="code" data-lang="" data-unlink>/hoge
　┣ main.py
　┗ config.json</pre>


<p>上記のような構造の場合</p>

<pre class="code" data-lang="" data-unlink>import json

config_json = json.load(open(&#39;config.json&#39;))</pre>


<h2>スケジュール実行する</h2>

<pre class="code" data-lang="" data-unlink>pip install schedule</pre>


<p>毎週月曜の21時に実行したい場合</p>

<pre class="code" data-lang="" data-unlink>import schedule

schedule.every().monday.at(&#39;21:00&#39;).do(実行したい関数)</pre>


<h1>最後に</h1>

<p>初めての<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>&amp;<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>のため、間違っている部分は多くあると思います。</p>

<p>変なところ、質問・ご意見などありましたら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>にご連絡くｄさい。</p>

<p>少しでもこの記事が良いと思って貰えたなら、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Python
BASENAME: 2018/07/25/212822
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 06/16/2018 13:20:42
IMAGE: https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;ASIN=B004W63RT4&amp;Format=_SL160_&amp;ID=AsinImage&amp;MarketPlace=JP&amp;ServiceVersion=20070822&amp;WS=1&amp;tag=kurowasi2525-22
-----
BODY:
<h1>Raspberry Pi3 Bで環境構（Install ~ Docker, Git）</h1>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/MicroSD">MicroSD</a>をフォーマット</h2>

<p>以前Raspberry Pi2 B+で遊んだ時に使った<a class="keyword" href="http://d.hatena.ne.jp/keyword/MicroSD">MicroSD</a>を利用</p>

<p><a href="https://www.amazon.co.jp/gp/product/B004W63RT4/ref=as_li_ss_il?ie=UTF8&psc=1&linkCode=li2&tag=kurowasi2525-22&linkId=489de580ccf6d10d5fd0345c92bb635c" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B004W63RT4&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=kurowasi2525-22" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=kurowasi2525-22&l=li2&o=9&a=B004W63RT4" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p>

<p>とりあえず<a class="keyword" href="http://d.hatena.ne.jp/keyword/FAT32">FAT32</a>にフォーマット</p>

<h2>OSをダウンロード</h2>

<p>以下のサイトからOSをダウンロード</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.raspberrypi.org%2Fdownloads%2Fnoobs%2F" title="Download NOOBS for Raspberry Pi" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.raspberrypi.org/downloads/noobs/">www.raspberrypi.org</a></cite></p>

<p>今回はメインPCの残り容量が20GBしかないので、余計なものを入れたくないので</p>

<p>NOOBS LITEのZIPファイルをダウンロード</p>

<p>展開して、NOOBS_lite_v2_8の中身をすべて<a class="keyword" href="http://d.hatena.ne.jp/keyword/MicroSD">MicroSD</a>の中に入れるだけ</p>

<p>これで準備完了</p>

<h2>セットアップ</h2>

<p>キーボード、マウス、ディスプレイ、有線LANに接続した状態で電源をぶっさす</p>

<p>無事起動したので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Wifi">Wifi</a> networksタブで<a class="keyword" href="http://d.hatena.ne.jp/keyword/Wifi">Wifi</a>に接続</p>

<p>Raspbianを選択し、言語を日本語、キーボードをjpに設定し、インストール</p>

<h2>piユーザ以外のログインユーザに変更</h2>

<p>まずは変更するためのユーザを作成</p>

<pre class="code" data-lang="" data-unlink>$sudo adduser 新しいユーザ名</pre>


<p>オートログインを辞める</p>

<pre class="code" data-lang="" data-unlink>$ sudo vi /etc/lightdm/lightdm.conf

autologin-user=pi
↓
#autologin-user=pi</pre>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Raspberry%20Pi">Raspberry Pi</a>を再起動し、新しく作成したユーザでログイン</p>

<p>piユーザと同じグループに追加</p>

<pre class="code" data-lang="" data-unlink>$ groups pi
$ sudo usermod -G adm,dialout,cdrom,sudo,audio,video,plugdev,games,users,input,netdev,spi,i2c,gpio 新しいユーザ名</pre>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Raspberry%20Pi">Raspberry Pi</a>を再起動し、新しいユーザでログイン</p>

<p>piユーザを削除する</p>

<pre class="code" data-lang="" data-unlink>$ sudo userdel pi</pre>


<h2>日本語入力できるようにする</h2>

<pre class="code" data-lang="" data-unlink>$ sudo apt-get install fcitx-mozc
$ im-config -n fcitx
$ sudo reboot</pre>


<h2>細かい設定</h2>

<p>今回インストールしたのは<a class="keyword" href="http://d.hatena.ne.jp/keyword/GUI">GUI</a>版なので、左上のRasbianマーク->設定-><a class="keyword" href="http://d.hatena.ne.jp/keyword/Raspberry%20Pi">Raspberry Pi</a>の設定</p>

<p>から、色々と設定できる</p>

<p>詳しいことは以下のサイト参照</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fusicolog.nomaki.jp%2Fengineering%2FraspberryPi%2FraspberryPi3.html" title="ラズベリーパイ3の使い方とOSセットアップ方法 | うしこlog" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://usicolog.nomaki.jp/engineering/raspberryPi/raspberryPi3.html">usicolog.nomaki.jp</a></cite></p>

<h2>Dockerのインストール</h2>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.docker.com%2Finstall%2Flinux%2Fdocker-ce%2Fdebian%2F" title="Get Docker CE for Debian" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.docker.com/install/linux/docker-ce/debian/">docs.docker.com</a></cite></p>

<p>上記に書いてある内容を打ち込んでいけば、インストールできる</p>

<p>Install Docker CEの部分からInstall Docker CEの2.まで入力すればOK</p>

<p>詳しいことは以下のサイト参照</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fyuyakato%2Fitems%2F1cdc7fa511f7767c95ac" title="Raspberry Pi 3 Model B(Raspbian)にDockerをインストールする - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/yuyakato/items/1cdc7fa511f7767c95ac">qiita.com</a></cite></p>

<h2>docker-compose出来るようにする</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Linux">Linux</a>系は最初からdocker-composeが入ってないみたい</p>

<p>なので、自分で入れる必要がある。</p>

<pre class="code" data-lang="" data-unlink>$ git clone https://github.com/docker/compose.git
$ cd compose
$ docker build -t dokcer-compose:armhf -f Dockerfile.armhf .
$ docker run --rm --entrypoint=&#34;script/build/linux-entrypoint&#34; -v $(pwd)/dist:/code/dist -v $(pwd)/.git:/code/.git &#34;docker-compose:armhf&#34;
$ sudo cp dist/docker-compose-Linux-armv7l /usr/local/bin/docker-compose
$ sudo chown root:root /usr/local/bin/docker-compose
$ sudo chmod 0755 /usr/local/bin/docker-compose
$ docker-compose version</pre>


<p>詳しいことは以下のサイト参照</p>

<p><a href="https://yagi.tc/archives/2017/04/24/raspberry-pi-2-mastodon/">Raspberry Pi 2&#x3067;Mastodon&#x30A4;&#x30F3;&#x30B9;&#x30BF;&#x30F3;&#x30B9;&#x3092;&#x7ACB;&#x3066;&#x3088;&#x3046;&#x3068;&#x3057;&#x3066;&#x5931;&#x6557;&#x3057;&#x305F;&#x4EF6; - yagi.tc</a></p>

<h2>Gitをインストール</h2>

<p><a href="https://git-scm.com/book/ja/v1/%E4%BD%BF%E3%81%84%E5%A7%8B%E3%82%81%E3%82%8B-Git%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">Git - Git&#x306E;&#x30A4;&#x30F3;&#x30B9;&#x30C8;&#x30FC;&#x30EB;</a></p>

<p>以下のコマンドを打てばインストール完了</p>

<pre class="code" data-lang="" data-unlink>$ sudo apt-get install libcurl4-gnutls-dev libexpat1-dev gettext libz-dev libssl-dev
$ sudo apt-get install git</pre>


<h2>エラー</h2>

<pre class="code" data-lang="" data-unlink>standard_init_linux.go:190: exec user process caused &#34;exec format error&#34;</pre>


<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>のdocker imageのため使うことができない。</p>

<p>そのため、今回は公式のDockerイメージじゃなく</p>

<p><a href="https://hub.docker.com/u/deinchristian/">https://hub.docker.com/u/deinchristian/</a></p>

<h2>Dockerでダメだった</h2>

<h2>pyenv導入</h2>

<pre class="code" data-lang="" data-unlink>$ sudo apt install git gcc make openssl libssl-dev libbz2-dev libreadline-dev libsqlite3-dev
$ git clone https://github.com/yyuu/pyenv.git ~/.pyenv</pre>


<p>~/.bashrc</p>

<pre class="code" data-lang="" data-unlink>$ export PYENV_ROOT=$HOME/.pyenv
$ export PATH=$PYENV_ROOT/bin:$PATH
$ eval &#34;$(pyenv init -)&#34;</pre>




<pre class="code" data-lang="" data-unlink>$ source ~/.bashrc
$ pyenv install --list
$ pyenv install 欲しいバージョン
$ pyenv global 使いたいバージョン</pre>


<h2>file /usr/bin/pip line 9 in module</h2>

<h2><a class="keyword" href="http://d.hatena.ne.jp/keyword/chrome">chrome</a> driverが動くように</h2>

<pre class="code" data-lang="" data-unlink>$ pip install selenium
$ sudo apt-get install chromium-chromedriver

browser = webdriver.Chrome(&#39;/usr/lib/chromium-browser/chromedriver&#39;)</pre>


-----
--------
AUTHOR: kurowasi2525
TITLE: Arukasを触ってみた
BASENAME: 2018/05/05/202852
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 05/05/2018 20:28:52
-----
BODY:
<h1>事前登録</h1>

<p>Arukasのアカウントを使うには，新規登録予約が必要．</p>

<p>メールアドレスとパスワードを入力すると，数日後に登録できるっていうメールが届く．</p>

<p>メールにあるURLに飛んで個人情報を登録．</p>

<p>アカウント作成後，ログインして，クレジットカード情報を登録すると，Arukasを使える状態になる．</p>

<h1>アプリケーションを作成</h1>

<p>アプリケーションを作成を押下すると，アプリ追加画面に行く．</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: さくらのDockerホスティングサービスのArukasを触ってみた
BASENAME: 2018/04/29/234525
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 04/29/2018 23:45:25
-----
BODY:
<h1>はじめに</h1>

<p>前回投稿した記事のシステムを公開したかった．</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2018%2F04%2F29%2F201924" title="IT研修でVuePress+Express+Nuxt on Dockerでシステムを作成した話 - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2018/04/29/201924">kurowasi2525.hatenablog.com</a></cite></p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>でさくらがDocker<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0">ホスティング</a>サービスを</p>

<p>1契約までは無料で使えるという情報を得ていたので，Arukasを使って公開しようと決めた．</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.cles.jp%2Fitem%2F10070" title="さくらが Docker のホスティングサービス「Arukas」を正式サービスに" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.cles.jp/item/10070">blog.cles.jp</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: IT研修でVuePress+Express+Nuxt on Dockerでシステムを作成した話
BASENAME: 2018/04/29/201924
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 04/29/2018 20:19:24
CATEGORY: Docker
CATEGORY: Nuxt.js
CATEGORY: Vue.js
CATEGORY: VuePress
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180429/20180429172257.png
-----
BODY:
<p>前回の投稿から1ヵ月...</p>

<p>入社して1ヵ月が経ち，現在はIT研修を受けている日々．</p>

<p>今回は，そのIT研修で作成したブログシステムについて話していく．</p>

<p>最終成果物はこちら</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>の<a href="https://github.com/Kurowasi/TechDocVuePress">こちら</a></p>

<p><iframe width="459" height="344" src="https://www.youtube.com/embed/k6nyoXXoCQo?feature=oembed" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe><cite class="hatena-citation"><a href="https://youtu.be/k6nyoXXoCQo">youtu.be</a></cite></p>

<h1>この記事で話す内容</h1>

<ul>
<li>このシステムはどんな構成で，どういう形で動いているのか</li>
<li>これを作成するに当たり，ぶつかった大きな4つの壁

<ul>
<li>リアルタイム性のあるDocker環境を作成できない</li>
<li>Docker環境で立ち上げたNuxtがホスト側からアクセスできない</li>
<li>VuePressのサイドバーは自分で設定しないといけない</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>特有のDockerエラー</li>
</ul>
</li>
<li>このシステムを作ってみて，わかったことなど所感</li>
</ul>


<h1>課題</h1>

<p>IT研修の課題で，2週間でブログシステムを作成するというものがあった．</p>

<p>条件は以下の２つ</p>

<ul>
<li>記事を閲覧する画面(ユーザ用)、記事を登録・編集・削除画面(ログイン有の管理者用)</li>
<li>HTML/<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>・Node.js・MS <a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>を利用する</li>
</ul>


<h1>技術構成</h1>

<ul>
<li>VuePress</li>
<li>Nuxt</li>
<li>Vue.js</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/HTML5">HTML5</a></li>
<li>CSS3</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a></li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a></li>
<li>Vuetify</li>
<li>Express</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/MSSQL">MSSQL</a></li>
<li>Docker</li>
<li>Docker-Compose</li>
</ul>


<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180429/20180429172257.png" alt="f:id:kurowasi2525:20180429172257p:plain" title="f:id:kurowasi2525:20180429172257p:plain" class="hatena-fotolife" itemprop="image"></span></p>

<table>
<thead>
<tr>
<th style="text-align:left;"></th>
<th style="text-align:center;"> VuePress       </th>
<th style="text-align:center;"> Express           </th>
<th style="text-align:center;"> Nuxt  </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">Docker</td>
<td style="text-align:center;"> press      </td>
<td style="text-align:center;"> press </td>
<td style="text-align:center;"> nuxt </td>
</tr>
<tr>
<td style="text-align:left;">ポート</td>
<td style="text-align:center;"> 8080      </td>
<td style="text-align:center;"> 3000      </td>
<td style="text-align:center;"> 8888 </td>
</tr>
<tr>
<td style="text-align:left;">機能</td>
<td style="text-align:center;">記事画面 </td>
<td style="text-align:center;"><a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>      </td>
<td style="text-align:center;"> 管理画面 </td>
</tr>
</tbody>
</table>


<p>VuePressで記事を表示</p>

<p>Nuxtで管理画面を表示し，記事を登録した際に，ExpressにPostして，</p>

<p>ExpressがVuePressのdocsにフォルダと記事の内容が書いてあるREADME.mdを作成．</p>

<p>編集画面を開くと，NuxtからExpressにGetし，ExpressがVuePressのdocsフォルダから情報を取得．</p>

<p>という流れ．</p>

<h1>フォルダ構成</h1>

<pre class="code" data-lang="" data-unlink>root/
├ docs/　←VuePress
│     ├ .vuepress/
│     │      ├ public/
│     │      └ config.js
│     ├ about/←記事
│     ├ back/  ←記事
│     └ README.md
│ 
├ nuxt/　←Nuxt
│     ├ Nuxtのフォルダなど（省略）
│     └ Dockerfile
│ 
├ docker-compose.yml
├ Dockerfile
└ index.js　←Express</pre>


<h1>リアルタイム性のあるDocker環境を作成できない</h1>

<p>最初は，DockerfileでホストのrootをDocker環境にCOPYコマンドでコピーを行っていた．</p>

<p>しかし，これだと複数の問題点がある．</p>

<ul>
<li>ホスト側を修正してもDocker側には影響がないため，コンテナを立て直す必要がある</li>
</ul>


<p>　　　※これだと毎回コンテナが立ち上がる時間を待つ必要があり，結果をすぐ見ることができない．</p>

<ul>
<li>Docker環境側のファイルを修正する</li>
</ul>


<p>　　　※これだとコンテナを落とすと編集したものが消えてしまう．</p>

<p>　　　　解決策としてDocker環境のファイルをホスト側にコピーする．</p>

<p>　　　　これはとてもナンセンス</p>

<h2>解決策</h2>

<p>マウント機能を使う．</p>

<p>docker-compose.yml内で<br/>
volums:<br/>
　- ホスト側：Docker側</p>

<p>Dockerコマンドの引数で指定できるみたいだが，面倒だったのでDocker Composeを導入した．</p>

<p>Dockerfile</p>

<pre class="code" data-lang="" data-unlink>FROM node:9.1.0

RUN useradd --user-group --create-home --shell /bin/false app

ENV HOME=/home/app

COPY package.json $HOME/press/
RUN chown -R app:app $HOME/*

USER app
WORKDIR $HOME/press
RUN yarn

CMD [&#34;yarn&#34;, &#34;start&#34;]</pre>


<p>docker-compose.yml</p>

<pre class="code" data-lang="" data-unlink>version: &#34;3&#34;
services:
  press:
    build: .
    ports:
      - &#39;8080:8080&#39;
      - &#39;3000:3000&#39;
    volumes:
      - .:/home/app/press
      - /home/app/press/node_modules
    container_name: &#39;press&#39;</pre>


<p>Node.jsでの開発の主流？はこういう流れっぽい(適当)</p>

<ol>
<li>ホスト側のpackage.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>をDocker環境へコピー</li>
<li>Docker環境内でpackage.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>に記述されているモジュールをインストール (npm install)</li>
<li>Docker環境下にホストの環境をマウント</li>
<li>node_modulesがホスト側に作成されないように，volumesでDocker環境内に閉じ込める</li>
</ol>


<h1>Docker環境で立ち上げたNuxtがホスト側からアクセスできない</h1>

<p>Docker環境でNuxtを立ち上げると，ちゃんと<a class="keyword" href="http://d.hatena.ne.jp/keyword/127.0.0.1">127.0.0.1</a>:3000で立ち上がったと出てくる．</p>

<p>しかし，ホストで立ち上げたようにブラウザに<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a>:3000にアクセスしても表示されない...</p>

<h2>解決策</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/127.0.0.1">127.0.0.1</a>は自分のIPを指してる(詳しくは調べてね)ので，Dockerfileに0.0.0.0を設定してあげる．</p>

<p>実際のNuxt用のDockerfile</p>

<pre class="code" data-lang="" data-unlink>FROM node:9.1.0

RUN useradd --user-group --create-home --shell /bin/false app

ENV HOME=/home/app

COPY package.json $HOME/nuxt/
RUN chown -R app:app $HOME/*

USER app
WORKDIR $HOME/nuxt
RUN yarn

ENV HOST 0.0.0.0

CMD [&#34;yarn&#34;, &#34;dev&#34;]
</pre>


<h3>※追記　2018年5月3日</h3>

<p>Nuxt on Docker for <a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>の場合，ホットリロードがうまくいかない．</p>

<p>なので，nuxt.config.jsに記述してあげる必要がある．</p>

<pre class="code" data-lang="" data-unlink>  watchers: {
    webpack: {
      poll: true
    }
  }</pre>


<h1>VuePressのサイドバーは自分で設定しないといけない</h1>

<p>VuePressは，サイドバーに表示する内容を，<code>root/docs/.vuepress/config.js</code>に書き込まないといけない．</p>

<p>でも，今回は管理者画面からフォルダとREADME.mdを作成するというものになっているため，</p>

<p>サイドバーに表示する内容は自動で行う必要がある．</p>

<h2>解決策</h2>

<p>サイドバーの情報をArray型の変数にする．</p>

<p>その変数に，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ情報を取得して，名前を入れていく形</p>

<p>config.js</p>

<pre class="code" data-lang="" data-unlink>const fs = require(&#39;fs&#39;);
const path = require(&#39;path&#39;);

var dirpath = &#34;./docs&#34;
var dirs = fs.readdirSync(dirpath).filter((f) =&gt; {
  return fs.existsSync(dirpath + &#34;/&#34; + f) &amp;&amp; fs.statSync(dirpath + &#34;/&#34; + f).isDirectory()
})

let sidebarItems = ((dirs) =&gt; {
  let items = [&#39;/&#39;]
  dirs.forEach((d, index) =&gt; {
    if (d !== &#39;.vuepress&#39; &amp;&amp; d !== &#39;admin&#39;) {
      items.push(&#39;/&#39; + d + &#39;/&#39;)
    }
  })
  return items
})(dirs)

module.exports = {
  title: &#39;Death March&#39;,
  description: &#39;社内ドキュメントを管理&#39;,
  themeConfig: {
    sidebar: sidebarItems,
    nav: [
      {
        text: &#39;about&#39;,
        link: &#39;/about/&#39;,
      },
      {
        text: &#39;admin&#39;,
        link: &#39;http://localhost:8888&#39;
      }
    ],
  }
}</pre>


<h1><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>特有のDockerエラー</h1>

<p>エラー</p>

<pre class="code" data-lang="" data-unlink>ERROR: Service &#39;press&#39; failed to build: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)</pre>


<h2>解決策</h2>

<ol>
<li>タスクバー？のDockerアイコンを右クリック</li>
<li>Settings...をクリック</li>
<li>Networkタブに移動</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/DNS">DNS</a> ServerをFixedにチェック</li>
<li>8.8.8.8に設定</li>
</ol>


<p>他にも，何のエラーが出るのか忘れたが，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Daemon">Daemon</a>タブのExperimental featuresにチェックが入っていると，</p>

<p>これも<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>特有の悪さをするみたいなので，チェックを外しておこう．</p>

<h1>所感</h1>

<h2>Dockerについて</h2>

<p>2週間という期間があったが，1週間はDockerの勉強，残りの5日はDocker環境の構築での躓きに費やす形だった．</p>

<p>そのおかげで，Dockerに関する知識は相当付いたと思う．</p>

<p>これからDockerを勉強する人におすすめすることは，とにかく触ること．</p>

<p>Dockerの入門書やサイトを見ても，あまり得られるものはない．</p>

<p>とにかく自分が作りたい環境に近いものを作っているサイトを見つけ，Dockerfileをコピペし，</p>

<p>動く環境を作り，Dockerfileを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%E1%A5%F3%A5%C8%A5%A2%A5%A6%A5%C8">コメントアウト</a>などして，動きを確かめる方がいいと，今回の作成を通した感じた．</p>

<p>一度Dockerfileを作成してしまえば，どんな環境でもすぐにコマンド一つで立ち上げることができ，</p>

<p>ホスト環境でやっていた開発環境と全く同じように開発できるので，本当に便利だと感じた．</p>

<h2>VuePressについて</h2>

<p>vuepressをインストールして，docs<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リにREADME.mdファイルを作成するだけで，</p>

<p>それっぽいドキュメントサイトが作れる．</p>

<p>本当に手軽で感動するので，一度は触って欲しい(2時間もあれば，誰でも完全に理解した状態)</p>

<p>英語なのは残念だが，とりあえずVuePressの公式サイトのガイド部分をコピペしまくれば，ある程度動きがわかる．</p>

<p>それでもわからない部分はVuePressの公式サイト自体の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>が<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>に上がっているので読む．</p>

<p>これである程度のことはできるようになる．</p>

<p>後，細かいことをしたければConfig ReferenceとDefault Theme Configを頑張って読もう．</p>

<h2>Vue.js, Nuxt</h2>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を見てもらうとわかるが，（root/index.html)</p>

<p>最初は，Vue.jsをトランスパイルせずに使っていた（初めてのこと）</p>

<p>そこから，Nuxtへ移行をしたのだが，とてもすんなり行き感動した．</p>

<p>Vue.jsの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Progressive">Progressive</a> Frameworkの一部分を感じた気がした．</p>

<p>これはとても面白い体験で，未だに<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>が使われているプロジェクトがあり，</p>

<p>それを今風に変えていきたいなら，Vue.jsをお勧めする．</p>

<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>→Vue.js→単一ファイル<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a></p>

<p>の順に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%D5%A5%A1%A5%AF%A5%BF%A5%EA%A5%F3%A5%B0">リファクタリング</a>していくのが，いいのではないだろうか．</p>

<h2>まとめ</h2>

<p>今回の課題は，2週間でブログシステムを作成するというものだったが，新しい知識を利用したり，</p>

<p>なぜか，新卒なのに開発フローの改善を提案するために，Slackの運用ルール作成したり，新開発フローを作成したり，</p>

<p>課題とは違うことにも，たくさんの時間を使うことになってしまったが，無事完成させることができた．</p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">新入社員研修終了後に自社に戻り、開発のお偉いさん(役員レベルまで)捕まえて、Git・Slack・Dockerを導入して開発フローを変えようという提案する、ぶっ飛んだ一日でした。<br>うちの同期、マジパネェっす</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/987318816202829824?ref_src=twsrc%5Etfw">2018年4月20日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

<p>新しい知識に時間を使いすぎて，会社の人に怒られてしまったが，今回の課題はDockerfileを使う側から作る側にもなれるようになったし，</p>

<p>VuePressという、まだ情報が少ないものを使うこともできたし，とてもエンジニアらしい感じのことができて満足でした．</p>

<p>どんどん新しい知識を入れていきたいと思います．</p>

<p>このシステムはさくらのDocker<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DB%A5%B9%A5%C6%A5%A3%A5%F3%A5%B0">ホスティング</a>のArukasか，さくらの<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPS">VPS</a>（いつものやつ）に近いうちにあげたいと思ってます．</p>

<p>質問・ご意見などありましたら，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>にご連絡ください．</p>

<p>今回の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>はこちらにあります．（<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>などを使用しているのは，僕の意志ではありません...）</p>

<p>（僕が自由に最新技術を追うことを許してくれる会社さんはいないのだろうか...）</p>

<p>もしよろしければ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p>

<p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p>

<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fgithub.com%2FKurowasi%2FTechDocVuePress" title="Kurowasi/TechDocVuePress" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://github.com/Kurowasi/TechDocVuePress">github.com</a></cite></p>

<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">IT研修でブログシステムを作るってのがあり、VuePress+Express+Nuxt on Dockerで作ったら、他の研修生にドン引きされ、発表会では自社の先輩に趣味全開にしすぎと注意されてしまいました...<a href="https://t.co/wWw0Hiicqb">https://t.co/wWw0Hiicqb</a></p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/990399607287906304?ref_src=twsrc%5Etfw">2018年4月29日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: 人工知能の勉強を始めた
BASENAME: 2018/03/21/133140
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 03/21/2018 13:29:34
-----
BODY:
<p><b><span style="font-size: 150%">背景</span></b></p><p>2, 3年前から<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>が〜、AIが〜と聞くようになりました。</p><p>第三次<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>ブームは2013年頃かららしいのですが、やはりAlphaGoが李世乭さんに勝った時くらいから、</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>ブームが一般的な人にも広まった気がします。</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%B0%CF%B8%EB">囲碁</a>はルールも抽象的で置ける場所も多いためチェスや将棋より圧倒的に難しいと素人ながらに知っていたので、</p><p>AlphaGoが初戦で勝利した段階で驚いたことを今でも覚えています。</p><p>エンジニアとして生き残るためには<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>の勉強は必須だなと感じてはいました。</p><p>しかし、大学の先生から『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>は入力と出力はわかるが、その過程がわからないからダメ』</p><p>『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>のブームは何回もあった。少し進歩しただけで、また問題にぶつかる。そしてまたいつかブームになる』</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>を利用した研究している院生友達も、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>は万能ではないし...とマイナス意見が多い。</p><p>これらの話を聞き、勉強のハードルも高そうなので、やる前から諦めていました。</p><p>『どうせ数年経てばブームは終わる』<br />
『数年経てば誰でも使えるAIツールが出てくる』<br />
『結局AIは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>などの大手企業しか扱うことができない』<br />
『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>は時代が変わる速度も早い。最先端は頭のいい大学でやってるから僕が今やっても全て無駄になる』</p><p>などの言い訳をずーっとしていました。</p><p>その時に、とある記事に出会いました。</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2FKanNishida%2Fitems%2F6c5be204c7795edc74c5%23%25E6%259C%2580%25E5%25BE%258C%25E3%2581%25AB" title="AIのプロジェクトを始めるとぶち当たる5つのハードル - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/KanNishida/items/6c5be204c7795edc74c5#%E6%9C%80%E5%BE%8C%E3%81%AB">qiita.com</a></cite><br />
</p>

    <blockquote>
        <p>もしあなたがAIのテクノロジーの進化に対して無視を決め込み、先に始めた人たちの成功事例を参考にあとで急速に挽回できると思っているのなら、もう一度考え直したほうがいいでしょう。現在のようにテクノロジーが毎日ものすごいスピードで進化している世界では、立ち止まっている場所から一気に飛躍するなどというのは夢の様な話です。なんといっても、ちょっと前までできないと思っていたことが、すでに今日にはできるようになり、それをもとにさらに新たな手法が生まれていくという世界なわけですから。</p>

    </blockquote>
<p><br />
この言葉により僕は本気でAIについての勉強を始めようと決めました。</p><br />
<p><b><span style="font-size: 150%">fast.aiで挫折</span></b></p><p>同時期に有名になった記事でおすすめされていたfast.aiから始めて見ました。</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fkeitakurita%2Fitems%2Fdf3a07135c9cfad810c7" title="ディープラーニングに入門するためのリソース集と学習法（2018年版） - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/keitakurita/items/df3a07135c9cfad810c7">qiita.com</a></cite></p><br />
<p>英語が苦手な自分ですが、記事が英語までは大丈夫でした...</p><p>しかし、当たり前ですが、動画教材で話している内容も英語。</p><p>しかも映像だけで理解することもできない...</p><p>僕はバカなので、もっと簡単な方法にしようと思い、諦めました。</p><br />
<p><b><span style="font-size: 150%">Aidemyで勉強</span></b></p><p>『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>　勉強』的な検索をしてみると、Aidemy | 10秒で始めるAIプログラミング学習サービスAidemyというサイトを見つけました。</p><p>よくあるWebIDE系？の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CA%D9%B6%AF%A5%B5%A5%A4%A5%C8">勉強サイト</a>で、プログラムだけではなく、AIに必要な知識の問題も入っています。</p><p>わかりやすくするために、解説は短く、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>の問題も一部分のみ、問題も４択。</p><p>わかった気にはなれましたが、本当に理解できている気がしないので『2.8.1 ミニバッチ学習』で学習を辞めました。</p><br />
<br />
<p><b><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>は人間を超えるか</span></b></p><p>大学の授業で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>に関する単位は取っていたので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>とは？というものは理解している気がしていたのですが、</p><p>そこの領域にも達していないと思うようになり、昔に買って読んでいなかった『松尾 豊』さんの『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BF%CD%B9%A9%C3%CE%C7%BD">人工知能</a>は人間を超えるか』を読みました。 </p><br />
<br />
<br />
<br />
<p>こちらの本はとても良かったため、以下の記事が勉強に自分がベストだと思い、こちらのSTEPで勉強を始めました。<br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fryosuke1120%2Fitems%2F2e0999a35878b997fdca" title="【人工知能初心者向け】機械学習・Deep Learningプログラミング学習の道筋と参考書籍 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/ryosuke1120/items/2e0999a35878b997fdca">qiita.com</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Nuxt.js＋Firebase Cloud Messaging(FCM)を使ったPWA化が簡単で衝撃的だった
BASENAME: 2018/03/13/082005
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 03/13/2018 08:20:05
CATEGORY: Firebase
CATEGORY: PWA
CATEGORY: Nuxt.js
CATEGORY: Vue.js
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180313/20180313023029.png
-----
BODY:
<p>※この記事は，３時間書けて作成していたが，ミスで保存できていなかったので，一から作り直したため，<br />
やる気がなくなり雑になっています．</p><br />
<p><span style="font-size: 150%"><b>概要</b></span></p><p>Nuxt.jsで作った<span style="color: #0000cc"><span style="font-size: 130%"><b><a href="https://viro.kurowasi.com">&#x30B7;&#x30B9;&#x30C6;&#x30E0;</a></b></span></span>をPWA化させた．</p><p>PWA化を実装してみて，PWAの素晴らしさ・Nuxt.jsの素晴らしさが更にわかったので伝えたい！</p><p>そして，Nuxt.js＋Firebase Clouds Messaging(以下，FCM)に関する記事が少なかったため，実装方法を書いていく．</p><br />
<p><span style="font-size: 150%"><b>背景</b></span></p><p>上記で説明したVIROというシステムは，友達に既に使って貰っている．</p><p>そこで出てきた文句として，</p>

<ul>
<li>毎回ログインすることが面倒</li>
<li>ブラウザの上下が邪魔(URLを入力する部分，戻るボタンや他のタブを表示するボタン)</li>
<li>プッシュ通知が欲しい</li>
</ul><p>などなど...</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB">スマホ</a>アプリのような機能が欲しいというのが基本的だった．</p><p>どう対応するか悩んでいたところ，小学校の同級生がPWAについて推していたことを思い出した．</p><p>調べてみると簡単に実装できそうだったので，PWA化した．</p><br />
<p><span style="font-size: 150%"><b>PWAとは？</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Progressive">Progressive</a> Web Appsの略称で，Webサイトで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB">スマホ</a>アプリのようなUXを実現させるというもの．</p><p>Web Applicationのその先という感じですかね．</p><p>PWAの代表的な例としては，</p>

<ul>
<li>オフライン対応</li>
<li>ホーム画面に追加</li>
<li>プッシュ通知</li>
</ul><p>などがある．</p><br />
<p><span style="font-size: 150%"><b>PWAの利点は？</b></span></p><p>自分が実装してみての利点は，WebAppを作成するだけで，ある程度アプリ層までも作れるということ．</p><p>Web技術でネイティブアプリのようなものを作る技術は前からあったと思う．(<a href="https://ja.monaca.io">Monaca</a>など)</p><p>でも，学習コスト・実装コストは高く，SwiftやKotlinを勉強した方がよくねって思ってしまう．</p><p>しかし，PWA化は学習コスト・実装コストが低いためおすすめである．</p><p>そして，使ってもらう側の一番の利点は，ダウンロード不要ということが一番だと思う．</p><br />
<p>※PWAの利点や詳しい内容は以下のサイト見てください．<br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fedwardkenfox%2Fitems%2F4c0b9550ffa48c1f0445" title="いまさら聞けないPWAとAMP - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/edwardkenfox/items/4c0b9550ffa48c1f0445">qiita.com</a></cite></p><br />
<p><span style="font-size: 150%"><b>Nuxt.jsとは？</b></span></p><p>Vue.jsの環境をいい感じにやってくれて，<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSR">SSR</a>が簡単にできる．</p><p>この記事を見ている方は，Nuxt.jsに詳しい方ばかりだと思うので省略．</p><br />
<p><span style="font-size: 150%"><b>オフライン対応・ホーム画面に追加</b></span></p><p>Nuxt.jsの場合，</p><p>PWAモジュールの追加</p><p>画像の追加</p><p>設定ファイルの修正</p><p>を行うだけで，PWA化ができる(あら簡単)</p><p><a href="https://pwa.nuxtjs.org">Introduction &middot; Nuxt PWA Module</a></p><p>詳しい実装方法は，素晴らしい記事がたくさんあるので，以下のサイトを見てください．</p><p><iframe id="talk_frame_422390" src="//speakerdeck.com/player/3bd4290966ae4e6fb54e3a67d0c0ae2c" width="710" height="596" style="border:0; padding:0; margin:0; background:transparent;" frameborder="0" allowtransparency="true" allowfullscreen="allowfullscreen" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe><cite class="hatena-citation"><a href="https://speakerdeck.com/takanorip/nuxt-dot-jsdeshi-merupwa">speakerdeck.com</a></cite></p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftechblog.scouter.co.jp%2Fentry%2F2017%2F12%2F07%2F080416" title="PWAをNuxt.jsで簡単に体験する - SCOUTER開発者ブログ" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://techblog.scouter.co.jp/entry/2017/12/07/080416">techblog.scouter.co.jp</a></cite></p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.sho-yamane.me%2Fblog%2F4%2F" title="Nuxt.jsでPWA化してみたらとても簡単だった - ShoYamane.me" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.sho-yamane.me/blog/4/">www.sho-yamane.me</a></cite></p><br />
<p>DBに関しては，Firebase Realtime Databaseを利用していたため，既にオフライン対応している．</p><br />
<p><span style="font-size: 150%"><b>プッシュ通知対応</b></span></p><p>プッシュ通知に関しては，Nuxt.jsがOneSignal用のモジュールがあるため，上記の記事を見てもらうとわかる通り，</p><p>OneSignalを使うのが一般的みたい．</p><p><a href="https://pwa.nuxtjs.org/modules/onesignal.html">Onesignal Module &middot; Nuxt PWA Module</a></p><p>今回は，Firebase Realtime Databaseを利用していることやOneSignalは色々と面倒だったので，Firebase Cloud Messagingを利用することにした．</p><br />
<p><iframe width="480" height="270" src="https://www.youtube.com/embed/sioEY4tWmLI?feature=oembed" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe><cite class="hatena-citation"><a href="https://youtu.be/sioEY4tWmLI">youtu.be</a></cite></p><br />
<p>FCMは，</p><p>設定ファイルを書き，</p><p>10行ほど書けば，プッシュ通知を受け取る状態にできる．</p><p>後は，サーバ側からでもフロント側からでも内容を送信すれば通知が表示されるようになる．</p><p>Firebaseの公式から，実装方法の動画があるため，お兄さんの言う通りに書いていけば実装できる．</p><p><iframe width="480" height="270" src="https://www.youtube.com/embed/BsCBCudx58g?feature=oembed" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe><cite class="hatena-citation"><a href="https://youtu.be/BsCBCudx58g">youtu.be</a></cite></p><br />
<p>Firebaseへのプロジェクトの追加は，この記事では省く．</p><p><span style="font-size: 150%"><b>メッセージを受信するようにブラウザを設定する</b></span></p><p>manifest.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>にハードコード値を指定するのだが，Nuxt.jsではnuxt.config.jsに記述する．</p>
<pre class="code" data-lang="" data-unlink>manifest: {
    &#34;gcm_sender_id&#34;: &#34;103953800507&#34;
}</pre><p>この値は固定なので，どんな人でもこの値になる．</p><p>上記の記事で，既にPWAを実装している場合，nameやtitle，lang，theme_colorなどのプロパティが記述されているはず．</p><br />
<p><span style="font-size: 150%"><b>Service Workerの設定</b></span></p><p>Nuxt.jsの場合，static<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リにfirebase-messaging-sw.jsを作成する．</p><p>FCMでは，Service Workerのファイル名が決まっているみたい．(Service Workerをちゃんと理解できてない)</p><p>まず始めに，コンソールから送信者IDを取得する．</p><p>コンソール→プロジェクトの設定→<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>メッセージングタブ</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180313/20180313023029.png" alt="f:id:kurowasi2525:20180313023029p:plain" title="f:id:kurowasi2525:20180313023029p:plain" class="hatena-fotolife" itemprop="image"></span></p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180313/20180313023032.jpg" alt="f:id:kurowasi2525:20180313023032j:plain" title="f:id:kurowasi2525:20180313023032j:plain" class="hatena-fotolife" itemprop="image"></span></p><p>firebase-messaging-sw.js</p>
<pre class="code" data-lang="" data-unlink>importScripts(&#39;https://www.gstatic.com/firebasejs/4.0.0/firebase-app.js&#39;)
importScripts(&#39;https://www.gstatic.com/firebasejs/4.0.0/firebase-messaging.js&#39;)

const config = {
    apiKey: &#34;&#34;,
    messagingSenderId: &#34;コンソールから取得した送信者ID&#34;
}

if (!firebase.apps.length) {
    const firebaseApp = firebase.initializeApp(config)
}

const messaging = firebase.messaging()</pre><p><br />
<span style="font-size: 150%"><b>プッシュ通知の受信を実装</b></span></p><p>今回は，トップ画面で利用している<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>やpagesで実装した．</p><p>僕はcreated()内に実装．</p>
<pre class="code" data-lang="" data-unlink>const messaging = firebase.messaging()
messaging.requestPermission()
    .then(() =&gt; {
        console.log(&#39;Have permission&#39;)
        return messaging.getToken() //ユーザにプッシュ通知を表示する権限の許可を表示
    ]).then((currentToken) =&gt; {
        if (currentToken) {
            // プッシュ通知を受信し，表示できる状態
        }
    }).catch((err) =&gt; {
        console.log(&#39;Error Occurred.&#39;)
    })</pre><p><br />
これで実装完了．</p><p>後は通知を送るのみ．</p><br />
<p><span style="font-size: 150%"><b>プッシュ通知の送信</b></span></p><p>今回は，Firebaseのみで完結させたかったため，フロント側でデータベースのお知らせ情報が追加された場合，</p><p>自分に向けてプッシュ通知を送るという実装にした．</p>
<pre class="code" data-lang="" data-unlink>import firebase from &#39;firebase&#39;

export default {
    created () {
        firebase.database().ref(&#39;notifications/&#39; + uid).on(&#39;value&#39;, (snapshot) =&gt; { //この部分はFirebase Realtime Database部分
                const messaging = firebase.messaging()
                messaging.requestPermission()
                    .then(() =&gt; {
                        console.log(&#39;Have permission&#39;)
                        return messaging.getToken() //ユーザにプッシュ通知を表示する権限の許可を表示
                    }).then((currentToken) =&gt; {
                        if (currentToken) {
                            // この部分までは上記で実装しました．
                            // この部分はデータベースのお知らせ情報が追加などの修正がおきると呼ばれる
                            // 今回はこの部分に送信部分を記述していく
                        }
                    }).catch((err) =&gt; {
                        console.log(&#39;Error Occurred.&#39;)
                    })
        }
    }
}</pre><p>プッシュ通知を送る場合，</p><p>プッシュ通知を送るためのURLに</p><p>受信者の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%AF">トーク</a>ンID</p><p>通知内容</p><p>送信者のサーバーキー(送信者IDの場所と同じ．コンソール→プロジェクトの設定→<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AF%A5%E9%A5%A6%A5%C9">クラウド</a>メッセージングタブ)</p><p>をPOST送信することで送信される．</p>
<pre class="code" data-lang="" data-unlink>if (currentToken) {
    let argObj = { // 受信者のトークンIDと通知内容
        to: currentToken,
        notification: {
            body: &#39;メッセージ内容&#39;
            title: &#39;タイトル&#39;,
            click_action: &#39;クリックした際に開くURL&#39;,
            icon: &#39;アイコン&#39;
        }
    }
    let optionObj = { //送信者のサーバーキー
        headers: {
            &#39;Content-Type&#39;: &#39;application/json&#39;,
            &#39;Authorization&#39;: &#39;サーバーキー&#39;
        }
    }
    axis.post(&#39;https://fcm.googleapis.com/fcm/send&#39;, argObj, optionObj)
}</pre><p><br />
これで送信部分も実装できたと思う．</p><br />
<p><span style="font-size: 150%"><b>所感</b></span></p><p>今回の実装を通して，</p><p>Nuxt.jsやべー！</p><p>Firebaseすげー！</p><p>PWA最高！！！</p><p>ってなりました笑</p><p>オフライン対応やホーム画面に追加などは，Nuxt.jsの場合数分で実装できます．</p><p>本当にやらなきゃ損ってレベル．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>端末を持っていないため，実装した時はさほど感動がなかったのですが，</p><p>友達の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>端末で利用した際に驚きを隠せませんでした．</p><p>ホーム画面に追加をすると，ホーム画面に追加されるわけではなく，</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>アプリをダウンロードすると表示される，アプリ一覧の部分に追加されます．</p><p>アプリを消す際もアンインストールと表示され，起動時にはスプラッシュ画面が表示されます．</p><p>しかも全画面で表示されるので，見た感じは普通のアプリと変わらず，僕はWebAppだけじゃなく，アプリも作ったんだという錯覚と謎の感動・達成感がありました笑</p><p>Firebaseも数行で色々できて本当にすごいです．</p><p>通知が来た時の感動はやばかった...</p><br />
<p><span style="font-size: 150%"><b>結論</b></span></p><p>PWAに未来を感じた</p><p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">昨日、PWA化させたサイトを使ってもらったんだけど、思ったよりすごいわー<br>PWA(笑)とか思ってたけど、すごい革新的なものを見た感じがした<br>Webの未来は明るい</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/971673065384943616?ref_src=twsrc%5Etfw">2018年3月8日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p><br />
<p>※小言<br />
あー</p><p>iOS11.3まだかなー</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>端末欲しいなー</p><br />
<p>もしよろしければ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: npm startで複数のNode.jsのアプリケーションを立ち上げたい【Firebaseのバックアップ編】
BASENAME: 2018/03/12/044306
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 03/12/2018 04:43:06
CATEGORY: Firebase
CATEGORY: Node.js
-----
BODY:
<p><span style="font-size: 150%"><b>結論</b></span><br />
</p>

<ul>
<li>concurrentlyを利用する</li>
<li>-prefixを使う</li>
</ul><p>例）package.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a></p>
<pre class="code" data-lang="" data-unlink>&#34;scripts&#34;: {
    &#34;start&#34;: &#34;concurrently \&#34;npm -prefix ./1つ目のアプリのディレクトリ/ start\&#34; \&#34;npm -prefix ./2つ目のアプリのディレクトリ/ start\&#34;&#34;
}</pre><p>わからないことがあれば，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>に連絡ください．<br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p><br />
<p><span style="font-size: 150%"><b>経緯</b></span></p><p>Firebase Realtime Databaseを利用した<span style="font-size: 130%"><span style="color: #0000cc"><b><a href="https://viro.kurowasi.com">&#x30B7;&#x30B9;&#x30C6;&#x30E0;</a></b></span></span>を最近作りました．<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2018%2F03%2F02%2F005932" title="JSのフレームワークを知らない人間がVue.jsを2ヵ月触ってみたって話 - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2018/03/02/005932">kurowasi2525.hatenablog.com</a></cite></p><p>そこで，データベースの内容をバックアップ取りたいなーと思ったのですが，Blazeプラン(有料)じゃないと使えないみたい...<br />
<a href="https://firebase.google.com/docs/database/rest/backups?hl=ja">&#x81EA;&#x52D5;&#x30D0;&#x30C3;&#x30AF;&#x30A2;&#x30C3;&#x30D7; &nbsp;|&nbsp; Firebase</a></p><p>無料で簡単な方法でやりたいと思い，調べてみました．</p><p><span style="font-size: 150%"><b>方法１</b></span></p><p>まず，初めにこちらの記事を発見．</p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.sss3.co.jp%2Fblog%2F2017%2F10%2F05%2Ffirebase%25E6%25B4%25BB%25E7%2594%25A8%25E8%25AA%25BF%25E6%259F%25BB%25E7%25B7%25A8%25E2%2591%25A2%25E3%2580%2580%25E3%2580%2590database%25E3%2581%25AE%25E3%2583%2590%25E3%2583%2583%25E3%2582%25AF%25E3%2582%25A2%25E3%2583%2583%25E3%2583%2597%25E3%2580%2591%2F" title="firebase活用調査編③【databaseのバックアップ】 | " class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.sss3.co.jp/blog/2017/10/05/firebase%E6%B4%BB%E7%94%A8%E8%AA%BF%E6%9F%BB%E7%B7%A8%E2%91%A2%E3%80%80%E3%80%90database%E3%81%AE%E3%83%90%E3%83%83%E3%82%AF%E3%82%A2%E3%83%83%E3%83%97%E3%80%91/">www.sss3.co.jp</a></cite></p><p>ちょっとやってみたのですが，自分の環境ではうまくいかなかったため，断念</p><p><span style="font-size: 150%"><b>方法２</b></span></p><p>次に，こちらを発見．</p><p><a href="https://firebase.google.com/docs/admin/setup?hl=ja">&#x30B5;&#x30FC;&#x30D0;&#x30FC;&#x306B; Firebase Admin SDK &#x3092;&#x8FFD;&#x52A0;&#x3059;&#x308B; &nbsp;|&nbsp; Firebase</a></p><p>この方法が一番簡単そうなので，これで行くことに決定．</p>
<pre class="code" data-lang="" data-unlink>let fs = require(&#39;fs&#39;)

let admin = require(&#39;firebase-admin&#39;)
let serviceAccount = require(&#39;秘密鍵&#39;)

admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  databaseURL: &#34;https://プロジェクトID.firebaseio.com&#34;
})

setInterval(viroBackup, 5000)

function viroBackup () {
  let db = admin.database()
  db.ref(&#39;/&#39;).once(&#39;value&#39;, (snapshot) =&gt; {
    let now = new Date()
    let dirName = now.getFullYear() + &#39;-&#39; + (Number(now.getMonth()) + 1) + &#39;-&#39; + now.getDate()
    let fileName = now.getHours() + &#39;_&#39; + now.getMinutes() + &#39;_&#39; + now.getSeconds() + &#39;_bk.json&#39;;
    if (!fs.existsSync(dirName)) {
      fs.mkdirSync(dirName)
    }
    fs.writeFileSync(&#39;./&#39; + dirName + &#39;/&#39; + fileName, JSON.stringify(snapshot.val(), null, 4))
  })
}</pre><p>こんな感じで完成．</p><p>でも，問題点が...</p><p>これをどうやって動かすか．</p><p><span style="font-size: 150%"><b>解決策１</b></span></p><p>Node.jsで動かせるやつないかなーって調べたら，nowというサービスを発見．</p><p><a href="https://codeiq.jp/magazine/2017/10/54570/">https://codeiq.jp/magazine/2017/10/54570/</a></p><p>使ってみたのだが，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リを作る権限が無くて失敗．</p><p>設定で出来るのかもしれないが，調べるのが面倒なので却下．</p><p><span style="font-size: 150%"><b>解決策２</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a>を利用する．</p><p>EC2は，金銭面で怖いので却下(知らないものは怖い)．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/AWS">AWS</a> Lambdaを利用したのだが，バックアップを上手く取得できない．</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Fyoshidasts%2Fitems%2Fba7ffc5463d7bf603ce9" title="AWS Lambdaでファイル入出力をしてみる - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/yoshidasts/items/ba7ffc5463d7bf603ce9">qiita.com</a></cite></p><p>Lambdaは，ファイル関係は向かないみたい...</p><br />
<p><span style="font-size: 150%"><b>解決策３</b></span></p><p>1月に作成した<span style="font-size: 130%"><span style="color: #0000cc"><b><a href="http://docheck.kurowasi.com/#/">&#x30B7;&#x30B9;&#x30C6;&#x30E0;</a></b></span></span>が動いているさくら<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPS">VPS</a>で動かす．</p><p>でも，どうやって複数のサービスを動かせばよいのだろうか...</p><p>調べてみると，こちらの記事を発見．</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fqiita.com%2Ftakeo-asai%2Fitems%2Ff1099b8bc5046da5e87b" title="npmのコマンドを同時実行する - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://qiita.com/takeo-asai/items/f1099b8bc5046da5e87b">qiita.com</a></cite></p><p>これでよさそう！</p><p>でもどうやって，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リの違うNode.jsのプロジェクトを実行させれば良いのだろうか...</p><p>こちらの記事で解決できました．</p><p><a href="http://please-sleep.cou929.nu/npm-package-json-with-different-directory.html">npm &#x3067; package.json &#x304C;&#x30AB;&#x30EC;&#x30F3;&#x30C8;&#x30C7;&#x30A3;&#x30EC;&#x30AF;&#x30C8;&#x30EA;&#x306B;&#x306A;&#x3044;&#x5834;&#x5408; - Please Sleep</a></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: JSのフレームワークを知らない人間がVue.jsを2ヵ月触ってみたって話
BASENAME: 2018/03/02/005932
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 03/02/2018 00:59:32
CATEGORY: Vue.js
CATEGORY: Nuxt.js
CATEGORY: Firebase
CATEGORY: JavaScript
-----
BODY:
<p>(この記事では，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>とライブラリは同じとして扱います)</p><p><b><span style="font-size: 150%">前書き</span></b></p><p>最後の更新が2017年9月26日...</p><p>10月～1月は卒業研究を主にやっており，バイトにもあまり行かず，自主勉強なども行っていなかったため，更新できませんでした．</p><p>しかし，1, 2月は時間が出来たので，Vue.jsを触ってました．</p><br />
<p><b><span style="font-size: 150%">筆者はどんな人間？</span></b></p><p>僕は，大学1年生からプログラミングを始め，<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>に触れ<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>を大好きになりました．</p><p>しかし，<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>は１つも使ったことがありません．</p><p>大学の先生からの<br />
『流行りの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を使えることは良いこと．でも，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を作れる人間になりなさい．』<br />
『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を使ってる人は，台風の中にいる人．<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>の仕様変更，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>の流行りに振る舞わされる．』<br />
『<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を作る人間になり，台風の目にいなさい．そうすれば振り回されない』<br />
という言葉が好きで，素の<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>ばかり使っていました．<br />
(無駄な機能が入っているのが好きじゃなかった)</p><p>バイト先で<a class="keyword" href="http://d.hatena.ne.jp/keyword/jQuery">jQuery</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>関係を使うことがあり，ある程度は読めますが，使いこなしているレベルではありませんでした．</p><p>そんな僕がVue.jsを触ったので，思ったことや，勉強の過程？，作ったものなどを書いていこうと思う．</p><br />
<p><b><span style="font-size: 150%">なぜVue.jsを選んだ？</span></b></p><p>2017年の2月頃，ニコニコで配信している時に，リスナーさんにお勧めされたことがVue.jsを知るきっかけでした．</p><p>そこから約半年後の10月頃に，小学校時代の友達に10年ぶりに会うことになりました．</p><p>彼は，高校から独学でプログラミングを勉強し，現在はWeb系の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EA%A1%BC%A5%E9%A5%F3%A5%B9">フリーランス</a>をやっています．</p><p>彼がすごいという噂は何度も聞いており，彼の職場と僕のバイト先が同じ渋谷であったため，仕事終わりに飲もうとなりました．</p><p>彼からReactの素晴らしさやVue.jsがこれから来るという話を聞かしていただき，</p><p>どうしても，JSの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を勉強したくなり，卒業研究ツールを現在流行っている<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>に対応する必要があるという言い訳を考え，</p><p>AngularとReactとVue.jsがどんなものかを軽く勉強しました．</p><p>理由は2017年で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Github">Github</a>でスターを多く貰っていたからというだけ笑</p><p>3つ触ってみて驚いたのは，トランスパイル，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>指向，仮想DOMです．</p><p>JSもわかるし，型で困ったことないからTypeScriptとかやる必要なくね笑．なんでわざわざ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%D1%A5%A4%A5%EB">コンパイル</a>するんだよ笑と思ってた自分を殴りたくなりました．</p><p>HTML, <a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>, JSを１つのファイルに書けたり，サイトをパーツごとに分けられるのも衝撃的でした．</p><p>その中でもVue.jsの最小構成から始められて，プロジェクトの規模ごとに必要な機能を追加していく．という考えに感動し，</p><p>Vue.jsを選びました．</p><br />
<p><b><span style="font-size: 150%">1作品目</span></b></p><p>一番最初に作成したのは，<span style="font-size: 120%"><a href="http://docheck.kurowasi.com/#/">DoCheck</a></span>というサイトです．</p><p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">友達にVue.jsを勧められ、Vueの練習のために作ってる作品<br>仮想通貨関係の資産を管理できるサイトで、Doの部分は完成した。<br>まだ10%もできてないけど、今月中にはCheckの部分は完成させたい <a href="https://t.co/YPmowZuHkI">pic.twitter.com/YPmowZuHkI</a></p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/961914140888465409?ref_src=twsrc%5Etfw">2018年2月9日</a></blockquote><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></p><br />
<p>フロント側はVue.js＋Vuetify</p><p>バックエンドはNode.js(express)＋<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a></p><p>サーバはさくら<a class="keyword" href="http://d.hatena.ne.jp/keyword/VPS">VPS</a></p><p>です．</p><br />
<br />
<br />
<p>Vue.jsのリファレンスと<span style="font-size: 120%"><a href="https://jp.vuejs.org/v2/examples/">Vue.js&#x306E;&#x4F8B;</a></span>を数個やり，次にデザインテンプレートのライブラリを探し始めました．</p><p>とりあえず，なんでもよかったので一番最初に環境構築できたものを使おうと決め，その希望にかなったのがVuetifyでした．</p><p>この選択は間違っていなかったと思いますし，初心者は特に使った方が良いと思います．</p><p>Vuetifyの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>を組み合わせることで，それっぽいサイトができます．</p><p>加えて，Vuetifyには<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>ごとにサンプルコードがたくさんあるので，コピペもでき，</p><p>サンプルコードごとの比較で，何が変わればどんな動きをするのかってのが，すぐわかります．</p><p>Vuetifyで得たデータ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%F3%A5%C7%A5%A3%A5%F3%A5%B0">バインディング</a>の知識はVue.jsに使えます．(というかVue.jsの機能)</p><p>これにより，VuetifyをいじってるだけでVue.jsの知識がついてるって感じでした！</p><br />
<br />
<p>次に，ログイン機能を実装する時に，ルーティング機能が必要になり，vue-routerの勉強を始めました．</p><p>これもvue-routerの公式リファレンスなどを読み，動きを把握しました．</p><p>次に，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B3%A5%F3%A5%DD%A1%BC%A5%CD%A5%F3%A5%C8">コンポーネント</a>間のデータの受け渡しを<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fchibinowa.net%2Fnote%2Fvuejs%2Fvue-4.html" title="Vue.js のコンポーネントと親子間データの送受信" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://chibinowa.net/note/vuejs/vue-4.html">chibinowa.net</a></cite><br />
こちら様のサイトを利用して，行っていました．</p><p>しかし，ログイン情報や様々なフラグ管理が面倒になり，Vuexの勉強を始めました．</p><p>色々なサイトを読みましたが，やはり公式リファレンスが一番良いと思います．</p><br />
<p><b><span style="font-size: 150%">2作品目</span></b></p><p>二番目に作成したのは，<span style="font-size: 120%"><a href="https://viro.kurowasi.com/">VIRO</a></span>というサイトです．</p><p>こちらは，Nuxt.js + Firebaseで作成しました．</p><p>Nuxt.jsを利用することで，vue-routerの部分はフォルダの作成ルールに従えば良いだけなのですごい楽です．</p><p>Vuexに関しても今まで通りで使えます．</p><br />
<p>衝撃を受けたのはfirebaseです．</p><p>Hostingに関しては，<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a>形式の設定ファイルを作成し，firebaseコマンドを打てば，勝手に送ってくれて公開できます．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C6%C8%BC%AB%A5%C9%A5%E1%A5%A4%A5%F3">独自ドメイン</a>も簡単に設定でき，<a class="keyword" href="http://d.hatena.ne.jp/keyword/https">https</a>にも対応してくれます．</p><p>一番衝撃を受けたのは，firebase Authenicationです．</p><p>10行程度のコードを書くだけで，メール＆パスワードでのログインが可能になり，</p><p>10行程度書けば，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>でログインできるようになります．</p><p>後は2行ほど追加すれば，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/Facebook">Facebook</a>にも対応できます．</p><p>Realtime Databaseに関しても簡単です．</p><p>保存するプロパティ名を指定して，後はオブジェクトを代入する形やpushする形でできます．</p><br />
<br />
<p><b><span style="font-size: 150%">所感</span></b></p><p>2ヵ月Vue.jsを触ってみた感想としては，本当に学習コストが低いです．</p><p>ランディングページくらいならVue.jsだけで作成し，<br />
複数のページが必要になったらvue-routerを利用し，<br />
ログイン状態や複数のページで同じ情報を利用することになるのであればVuexを利用</p><p>など，本当に作成するものの規模間に応じて付け足して対応することができます．</p><p>HTML, <a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>, <a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>が１つのファイルにできるので，ページごとや部品ごとに管理できるのは，本当に良いです．</p><p>適当に作っていても，後で読みやすく<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%D5%A5%A1%A5%AF%A5%BF%A5%EA%A5%F3%A5%B0">リファクタリング</a>もしやすいです．</p><p>加えて，Firebaseは本当に神でした．</p><p>個人で何か軽いものを作るならFirebaseは本当にお勧めです．</p><p>Nuxt.js + Firebaseは爆速＆無料で作れるので本当にお勧めです．</p><br />
<p><b><span style="font-size: 150%">宣伝</span></b></p><p><span style="font-size: 120%"><a href="http://docheck.kurowasi.com/#/">DoCheck</a></span><br />
仮想通貨の資産管理サイト</p><p><span style="font-size: 120%"><a href="https://viro.kurowasi.com/">VIRO</a></span><br />
実世界では誰かが払い，仮想の世界で割り勘をするサイト<br />
複数回会うことの信頼を使って借金する感じです</p><p>ふわっちやニコニコでサイト作成の過程を放送してます<br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwhowatch.tv%2Farchives%2F4996983" title="ふわっち - 動画・ラジオの生配信で稼ごう！" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://whowatch.tv/archives/4996983">whowatch.tv</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fcom.nicovideo.jp%2Fcommunity%2Fco3560405" title="エンジニアの卵を育てるコミュ-ニコニコミュニティ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://com.nicovideo.jp/community/co3560405">com.nicovideo.jp</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Laravel＋PostgreSQLでの異なる型のINNER JOINの方法
BASENAME: 2017/09/26/225449
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 09/26/2017 22:54:49
CATEGORY: Laravel
CATEGORY: PostgreSQL
CATEGORY: バイト日記
-----
BODY:
<p>Laravelはデータベースクレリビルダってのがある</p>

    <blockquote>
        <p>データベースクエリビルダはスラスラと書ける(fluent)便利な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%D5%A5%A7%A5%A4%A5%B9">インターフェイス</a>で、クエリを作成し実行するために使用します。アプリケーションで行われるほとんどのデーターベース操作が可能で、サポートしている全データベースシステムに対し使用できます。</p>

    </blockquote>
<p>こいつのおかげで<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>文を書かなくて済む</p><p>SELECT文とかもこんな感じで書ける</p>

    <blockquote>
        <p>$users = DB::table('users')->select('name', 'email as user_email')->get();</p>

    </blockquote>
<p>今回問題のINNER JOIN文もこんな感じでかける</p>

    <blockquote>
        <p>$users = DB::table('users')<br />
            ->join('contacts', 'users.id', '=', 'contacts.user_id')<br />
            ->join('orders', 'users.id', '=', 'orders.user_id')<br />
            ->select('users.*', 'contacts.phone', 'orders.price')<br />
            ->get();</p>

    </blockquote>
<p>今回ぶち当たった壁は違う型でのINNER JOINする方法</p><p>上記の例の場合、usersテーブルのidがint8・contactsテーブルのuser_idがvarcharの場合、</p><p>型が違うためjoinできない</p><p>CASTすればよいと思い、試してみた</p>
<pre class="code" data-lang="" data-unlink>$users = DB::table(&#39;users&#39;)
            -&gt;join(&#39;contacts&#39;, &#39;users.id&#39;, &#39;=&#39;, &#39;contacts.user_id::int&#39;)
            -&gt;get();</pre><p>contacts.user_id::intなんて存在しないよって怒られる</p><p>原因は多分これみたい</p>

    <blockquote>
        <p>Laravelクエリビルダはアプリケーションを<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL%A5%A4%A5%F3%A5%B8%A5%A7%A5%AF%A5%B7%A5%E7%A5%F3">SQLインジェクション</a>攻撃から守るために、PDOパラメーターによる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%F3%A5%C7%A5%A3%A5%F3%A5%B0">バインディング</a>を使用します。バインドする文字列をクリーンにしてから渡す必要はありません。</p>

    </blockquote>
<p>解決方法はDB::raw()メソッド</p>

    <blockquote>
        <p>たまにクエリの中で<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>を直接使用したいことがあります。このような<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>では文字をそのまま埋め込むだけですので、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL%A5%A4%A5%F3%A5%B8%A5%A7%A5%AF%A5%B7%A5%E7%A5%F3">SQLインジェクション</a>をされないように気をつけてください！　<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%B9">エス</a>ケープなしの<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>を使用する場合はDB::rawメソッドを使用します。</p>

    </blockquote>
<p>こんな感じにすれば完了</p>
<pre class="code" data-lang="" data-unlink>$users = DB::table(&#39;users&#39;)
            -&gt;join(&#39;contacts&#39;, &#39;users.id&#39;, &#39;=&#39;, DB::raw(&#39;contacts.user_id::int&#39;))
            -&gt;get();</pre><p></p><br />
<p>参考サイト<br />
<a href="https://readouble.com/laravel/5.3/ja/queries.html">&#x30C7;&#x30FC;&#x30BF;&#x30D9;&#x30FC;&#x30B9;&#xFF1A;&#x30AF;&#x30A8;&#x30EA;&#x30D3;&#x30EB;&#x30C0; 5.3 Laravel</a></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: NVMWで最新verがインストールできない(404 Not Found)
BASENAME: 2017/09/18/163251
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 09/18/2017 16:32:51
CATEGORY: NVM
CATEGORY: NVMW
-----
BODY:
<p><span style="font-size: 150%"><b>概要</b></span><br />
NVMWで最新verがインストールできないので，無理やり最新verを使えるようにした．</p><br />
<p><span style="font-size: 150%"><b>目次</b></span><br />
<a href="#1.">1. 背景</a><br />
<a href="#1.1." style="margin-left: 10px; display: block;">1.1. nvmwとは</a><a href="#2.">2. 目的</a><br />
<a href="#3.">3. エラー内容</a><br />
<a href="#4.">4. 解決策</a><br />
<a href="$5.">5. 感想</a></p><br />
<p><span style="font-size: 150%" id="1."><b>1. 背景</b></span><br />
卒業研究で使っているプログラムは，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>で開発していた．(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>は開発環境を整えやすいから)</p><p>だが，あのペラペラのキーボードと小さい画面では，開発の効率が悪いので<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>で開発することにした．</p><p>そこで問題が起きた．nodeのバージョンが古くてletをエラー扱いする．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>ではnvmwを使っているのだが，昔からv0.10.21以外のバージョンをインストールできない問題があった．</p><br />
<p><span style="font-size: 150%" id="1.1."><b>1.1. nvmwとは</b></span><br />
nvmの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>版．nodeのバージョンを管理できる．</p>
-----
EXTENDED BODY:
<br />
<br />
<p><span style="font-size: 150%" id="2."><b>2. 目的</b></span><br />
nvmw useで最新のバージョンを選択できるようにする．</p><br />
<p><span style="font-size: 150%" id="3."><b>3. エラー内容</b></span><br />
nvmwを利用して，最新バージョンをインストールしようとすると以下のようなバグが発生する．</p>
<pre class="code" data-lang="" data-unlink>C:\Users\高木徹\Desktop&gt;nvmw install v6.10.0
Start installing node/v6.10.0 (x64) to C:\Users\高木徹\.nvmw\v6.10.0
Download from https://nodejs.org/dist/v6.10.0/x64/node.exe, and save it as C:\Users\高木徹\.nvmw\v6.10.0\node.exe
404 Not Found
Download C:\Users\高木徹\.nvmw\v6.10.0\node.exe from https://nodejs.org/dist/v6.10.0/x64/node.exe failed</pre><p><br />
以下の記事を見る感じ，他の人は普通にインストールできている．</p><br />
<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fphoto-tea.com%2Fp%2F17%2Fhexo-start-kit-tools-4-win%2F%23nvmw%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%ABwindows" title="node.jsとnpmとnvmwをインストールしよう。node.jsの環境を用意する（Windows編）" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://photo-tea.com/p/17/hexo-start-kit-tools-4-win/#nvmwのインストールwindows">photo-tea.com</a></cite></p><p><a href="https://nodejs.org/dist/v6.10.0/">https://nodejs.org/dist/v6.10.0/</a>までは存在する．</p><p>その後のx64はなく，win-x64というそれらしきものは存在する．</p><p>ちゃんとしたエンジニアの方は，nvmw自体の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>をいじるのだろうが，僕は面倒なので，プログラムがやることを手作業でやる．</p><br />
<p><span style="font-size: 150%" id="4."><b>4. 解決策</b></span><br />
nvmwは指定されたverのnode.exeをnvmwがある<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リにダウンロードしてるだけ．</p><p>とりあえず今回は，現在の最新verである8.5.0をインストールする．</p><p><a href="https://nodejs.org/dist/v8.5.0/win-x64/">https://nodejs.org/dist/v8.5.0/win-x64/</a>からnode.exeをダウンロード．</p><p>nvmwがある<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ(僕の場合C:\Users\<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a>\.nvmw)に移動．</p><p>v8.5.0というフォルダを作成．</p><p>その中に先ほどダウンロードしたexeファイルを移動．</p><p>nvmwがちゃんと参照できるか確認．</p>
<pre class="code" data-lang="" data-unlink>C:\Users\高木徹\Desktop&gt;nvmw ls
node:
v0.10.21
v8.5.0

iojs:
latest

Current: node/v0.10.21 x64

C:\Users\高木徹\Desktop&gt;nvmw use v8.5.0
Now using node v8.5.0 x64</pre><p><br />
<span style="font-size: 150%" id="5."><b>5. 感想</b></span><br />
無理やりな解決方法だったけど，一応npm installやexpressのnpm startなどが実行できたのでOK．</p><p>僕はそこまでnodeの最新verを追っかける必要がないので，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>をいじる労力より，手動でインストールする労力の方が楽と思いこの手段を取りました．</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Eclipseを使ってSelenium-WebDriverを使ってみた
BASENAME: 2017/09/18/025617
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 09/18/2017 02:56:17
CATEGORY: Eclipse
CATEGORY: Selenium
CATEGORY: WebDriver
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170918/20170918022228.png
-----
BODY:
<p><span style="font-size:150%"><b>概要</b></span></p><p>Selenium3 WebDriverを使って<a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>を自動操作する，環境構築とサンプルコードを作成する．</p><br />
<p><span style="font-size:150%"><b>目次</b></span></p><p><a href="#1.">1. 背景</a><br />
<a href="#1.1." style="margin-left: 10px; display: block;">1.1. Selenium WebDriverとは</a><a href="#2.">2. 目的</a><br />
<a href="#2.1." style="margin-left: 10px; display: block;">2.1. JavaでのWebDriverの使用方法</a><a href="#2.2." style="margin-left: 10px; display: block;">2.2. Eclipseとは</a><a href="#2.3." style="margin-left: 10px; display: block;">2.3. Jarファイルとは</a><a href="#2.4." style="margin-left: 10px; display: block;">2.4. Mavenとは</a><a href="#2.5." style="margin-left: 10px; display: block;">2.5. Gradleとは</a><a href="#3.">3. 環境構築</a><br />
<a href="#3.1." style="margin-left: 10px; display: block;">3.1. WebDriverを取得</a><a href="#3.2." style="margin-left: 10px; display: block;">3.2. EclipseにJarを読み込ませる</a><a href="#3.2.1." style="margin-left: 20px; display: block;">3.2.1. プロジェクト作成</a><a href="#3.2.2." style="margin-left: 20px; display: block;">3.2.2. Jarファイルを参照する</a><a href="#3.2.3." style="margin-left: 20px; display: block;">3.2.3. Chromeの場合</a><a href="#3.3." style="margin-left: 10px; display: block;">3.3. サンプル作成</a><a href="#4.">4. 感想</a><br />
<a href="#5.">5. 参考文献</a></p><br />
<p><span style="font-size: 150%" id="1."><b>1. 背景</b></span></p><p>卒業研究で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriverを使うので，WebDriverの知識が必要．</p><br />
<p><span style="font-size: 150%" id="1.1."><b>1.1. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriverとは</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriverは，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>のコードからブラウザ操作が可能なライブラリ．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>など，各言語のライブラリとして提供されている．</p>
-----
EXTENDED BODY:
<br />
<br />
<p><span style="font-size: 150%" id="2."><b>2. 目的</b></span></p><p>WebDriverの知識を得るために，WebDriverを実行できる環境を構築し，サンプルを作成する．</p><br />
<p><span style="font-size: 150%" id="2.1."><b>2.1. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>でのWebDriverの使用方法</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>でテスト<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を作成する場合，通常の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>開発と同様<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>の実行環境が必要．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>上でのWebDriverのセットアップ方法は，以下の３つである．</p>

<ul>
<li>Jarファイルとして提供されている<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のクライアントライブラリを直接<a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>に追加</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Maven">Maven</a>を使用する</li>
<li>Gradleを使用する</li>
</ul><p><br />
<span style="font-size: 150%" id="2.2."><b>2.2. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>とは</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/IBM">IBM</a>が開発した無料の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%FD%B9%E7%B3%AB%C8%AF%B4%C4%B6%AD">統合開発環境</a>(<a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>)．</p><br />
<p><span style="font-size: 150%" id="2.3."><b>2.3. Jarファイルとは</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> ARchiveの略．拡張子は【.jar】．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%A4%A5%C8%A5%B3%A1%BC%A5%C9">バイトコード</a>(classファイル)やリソース(画像ファイルや音声ファイルなど)をZIPファイル形式に基づくファイル形式で保存したもの．</p><br />
<p><span style="font-size: 150%" id="2.4."><b>2.4. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Maven">Maven</a>とは</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a> Software Foundationで開発されているプロジェクト管理ツール．</p><p>Project Object Model(POM)という考え方に基づき，プロジェクトのビルド，テスト，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%AD%A5%E5%A5%E1%A5%F3%A5%C6%A1%BC%A5%B7%A5%E7%A5%F3">ドキュメンテーション</a>，成果物の配備など，プロジェクトのライフサイクル全体を管理する．</p><br />
<p><span style="font-size: 150%" id="2.5."><b>2.5. Gradleとは</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AA%A1%BC%A5%D7%A5%F3%A5%BD%A1%BC%A5%B9">オープンソース</a>ビルド自動化システム．</p><p>Groovyベースの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C9%A5%E1%A5%A4%A5%F3">ドメイン</a>固有言語(<a class="keyword" href="http://d.hatena.ne.jp/keyword/DSL">DSL</a>)で手順を記述．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Maven">Maven</a>との互換性がある．</p><br />
<p><span style="font-size: 150%" id="3."><b>3. 環境構築</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a> Oxygenと<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のWebDriver(現在の最新ver:3.5.3)を使って構築する．</p><br />
<p><span style="font-size: 150%" id="3.1."><b>3.1. WebDriverを取得</b></span></p><p>まずは，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>公式サイトのダウンロードページにアクセス．</p><p><a href="http://www.seleniumhq.org/download/">http://www.seleniumhq.org/download/</a></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> Client & WebDriver Language BindingsのDownloadをクリック．</p><p>今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のWebDriverを使っていく．</p><p>zipファイルなので展開する．</p><p>(僕の場合は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/selenium">selenium</a>-<a class="keyword" href="http://d.hatena.ne.jp/keyword/java">java</a>-3.5.3でした．)</p><br />
<p><span style="font-size: 150%" id="3.2."><b>3.2. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>にJarを読み込ませる</b></span></p><p>まずは，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>を立ち上げる．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>の環境構築については，前回記事にしたので，よかったら見てください．<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2017%2F09%2F06%2F145442" title="Windows10でPleiades All in Oneを使わずにEclipseの環境を構築した - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2017/09/06/145442">kurowasi2525.hatenablog.com</a></cite></p><br />
<p><span style="font-size: 150%" id="3.2.1."><b>3.2.1. プロジェクト作成</b></span></p><p>メニューのFile→New→<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> Projectをクリック．</p><p>色々入力してプロジェクト作成．(僕は【<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>-WebDriver-Sample】というプロジェクト名にした)</p><br />
<p><span style="font-size: 150%" id="3.2.2."><b>3.2.2. Jarファイルを参照する</b></span></p><p>3.2.1項で作成したプロジェクト内に，libsフォルダを作成する．</p><p>3.1節でダウンロードした，</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/selenium">selenium</a>-<a class="keyword" href="http://d.hatena.ne.jp/keyword/java">java</a>-3.5.3<br />
┣lib ←lib<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ内のすべてのjarファイル①<br />
┃├cglib-nodep-3.2.4.jar<br />
┃├......jar<br />
┃├......jar<br />
┃└<a class="keyword" href="http://d.hatena.ne.jp/keyword/xml">xml</a>-apis-1.4.01.jar<br />
┣client-combined-3.5.3-nodeps.jar ←②<br />
┣client-combined-3.5.3-nodeps-sources.zip<br />
┣LICENSE<br />
┗NOTICE</p><p>①，②をlibsフォルダにコピーする．</p><p>プロジェクト名(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>-WebDriver-Sample)を右クリック<br />
↓<br />
Propertiesをクリック<br />
↓<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> Build Pathをクリック<br />
↓<br />
Librariesをクリック<br />
↓<br />
Add JARs...をクリック<br />
↓<br />
libsフォルダ内のすべてのJarを選択<br />
↓<br />
Apply and Closeをクリック</p><p>こんな感じになると思う．</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170918/20170918022228.png" alt="f:id:kurowasi2525:20170918022228p:plain" title="f:id:kurowasi2525:20170918022228p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p><span style="font-size: 150%" id="3.2.3."><b>3.2.3. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>の場合</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>の場合，ChromeWebDriverが必要になる．</p><p>以下の公式サイトに移動し，Third Party Drivers, Bindings, and Pluginsで<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google%20Chrome">Google Chrome</a> Driverの(今回の場合)2.32をクリック．</p><p>僕は，Windows64bitの環境だが，64bitはないので，『chromedriver_win32.zip』をダウンロード＆展開．</p><p>3.2.1項で作成したプロジェクトに『exe』フォルダを作成．</p><p>その中に，先ほど展開したフォルダ内の『chromedriver.exe』をコピーする．</p><br />
<p><span style="font-size: 150%" id="3.3."><b>3.3. サンプル作成</b></span></p><p>SampleScript.<a class="keyword" href="http://d.hatena.ne.jp/keyword/java">java</a>という<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>ファイルを作成する．</p><p>中身はこのような感じ．</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170918/20170918023140.png" alt="f:id:kurowasi2525:20170918023140p:plain" title="f:id:kurowasi2525:20170918023140p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>実行して，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>が立ち上がり，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>を開き，Selenium3で検索がされたら成功！</p><p>最終的な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ構成はこんな感じ．</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170918/20170918023145.png" alt="f:id:kurowasi2525:20170918023145p:plain" title="f:id:kurowasi2525:20170918023145p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p><span style="font-size: 150%" id="4."><b>4. 感想</b></span></p><p>作り終わっての感想は，思ったより簡単．</p><p>だけど，2点だけ躓いた部分があった．</p><p><dl>
<dt>1. 僕が参考にしていた本やサイトはSelenium2についての記述だった．</dt>
<dd>Selenium2と3では，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リ構成も違うし，jarのファイル数，ファイル名が違う．<br>そのため，少しだけ戸惑った．</dd>
<dt>2. ChromeWebDriver問題</dt>
<dd><a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>の場合は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> WebDriverをダウンロードしたりしなければならないためか，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a>での記事が多かった．<br><a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a>の記事があっても，Selenium2での記事が多い．</dd>
</dl></p><p>色々調べていると，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Maven">Maven</a>を使った方が良いという意見が多かったので，</p><p>今回は，Jarを直接読み込ませて使ったが，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Maven">Maven</a>を使ったサンプルも作っていきたいと思う．</p><br />
<p><span style="font-size: 150%" id="5."><b>5. 参考文献</b></span><br />
<a href="https://www.amazon.co.jp/Selenium%E5%AE%9F%E8%B7%B5%E5%85%A5%E9%96%80-%E8%87%AA%E5%8B%95%E5%8C%96%E3%81%AB%E3%82%88%E3%82%8B%E7%B6%99%E7%B6%9A%E7%9A%84%E3%81%AA%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%86%E3%82%B9%E3%83%88-WEB-PRESS-plus/dp/4774178942/ref=as_li_ss_il?ie=UTF8&qid=1505670482&sr=8-1&keywords=Selenium&linkCode=li2&tag=kurowasi2525-22&linkId=61aea6909207976026d1c80353b86896" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=4774178942&Format=_SL160_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=kurowasi2525-22" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=kurowasi2525-22&l=li2&o=9&a=4774178942" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /><br />
<a href="http://wa3.i-3-i.info/word14171.html">http://wa3.i-3-i.info/word14171.html</a><br />
<a href="http://docs.oracle.com/javase/jp/7/technotes/guides/jar/jarGuide.html">JAR &#x30D5;&#x30A1;&#x30A4;&#x30EB;&#x306E;&#x6982;&#x8981;</a><br />
<a href="http://www.cse.yorku.ca/tech/other/jdk1.2.1/docs/guide/jar/manifest.html">Manifest Format</a><br />
<a href="http://www.techscore.com/tech/Java/ApacheJakarta/Maven/1/#maven-1-1">1. Maven &#x3068;&#x306F; | TECHSCORE(&#x30C6;&#x30C3;&#x30AF;&#x30B9;&#x30B3;&#x30A2;)</a><br />
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/aM5rwHdC0TpIYA" width="427" height="356" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="border:1px solid #CCC; border-width:1px; margin-bottom:5px; max-width: 100%;" allowfullscreen> </iframe> <div style="margin-bottom:5px"> <strong> <a href="https://www.slideshare.net/orekyuu/gradle-36782786" title="Gradle入門" target="_blank">Gradle入門</a> </strong> from <strong><a href="https://www.slideshare.net/orekyuu" target="_blank">orekyuu</a></strong> </div><cite class="hatena-citation"><a href="https://www.slideshare.net/orekyuu/gradle-36782786">www.slideshare.net</a></cite><br />
<a href="http://d.hatena.ne.jp/keyword/gradle">gradle&#x3068;&#x306F; - &#x306F;&#x3066;&#x306A;&#x30AD;&#x30FC;&#x30EF;&#x30FC;&#x30C9;</a><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fweb.plus-idea.net%2F2017%2F05%2Fselenium3-eclipse-java-install%2F" title="Selenium3のインストールとEclipseへのセットアップ(Javaからブラウザを自動で操作する) | ぱーくん plus idea" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://web.plus-idea.net/2017/05/selenium3-eclipse-java-install/">web.plus-idea.net</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fjavaworld.helpfulness.jp%2Fpost-279%2F" title="Selenium入門その6[Selenium3でWebDriver(Java/Junit4)の環境を作成しEdge,Chrome,Firefoxで確認してみる]" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://javaworld.helpfulness.jp/post-279/">javaworld.helpfulness.jp</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fsonomirai.hatenablog.com%2Fentry%2F2017%2F07%2F16%2F161517" title="Selenium3をMacで動かす - 其未来" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://sonomirai.hatenablog.com/entry/2017/07/16/161517">sonomirai.hatenablog.com</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: スマホのWebブラウザで画像が荒い原因とは？
BASENAME: 2017/09/13/232658
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 09/13/2017 23:26:58
CATEGORY: バイト日記
-----
BODY:
<p><a href="#1.">1. 背景</a><br />
<a href="#2.">2. 目的</a><br />
<a href="#3.">3. 調査結果</a><a href="#3.1." style="margin-left: 10px; display: block;">3.1. 解像度の意味は2つある</a><a href="#3.2." style="margin-left: 10px; display: block;">3.2. 解像度</a><a href="#3.3." style="margin-left: 10px; display: block;">3.3. ピクセル/dpi/インチの関係</a><a href="#3.4." style="margin-left: 10px; display: block;">3.4. Retinaディスプレイ登場</a><a href="#3.5." style="margin-left: 10px; display: block;">3.5. Retinaディスプレイでの解決策</a><a href="#4.">4. 結論</a><br />
<a href="#5.">5. 感想</a><br />
<a href="#6.">6. 参考文献</a></p><br />
<p><span style="font-size: 150%" id="1."><b>1. 背景</b></span></p><p>バイト先で，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB">スマホ</a>のブラウザでWebサイトを表示すると，画像が荒いという問題があった．</p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2017%2F04%2F19%2F230841" title="【第一話】社会人になっても使えそうなエンジニア経験談 - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2017/04/19/230841">kurowasi2525.hatenablog.com</a></cite></p><p>上の方は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>サイズを大きくすることなく，解像度を上げることで解決したい．</p><p>僕は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>サイズを大きくしないと画質は上がらないと考えていた．</p>
-----
EXTENDED BODY:
<br />
<br />
<p><span style="font-size: 150%" id="2."><b>2. 目的</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%DE%A5%DB">スマホ</a>のブラウザでWebサイトを表示すると，画像が荒い原因を特定する．</p><br />
<p><span style="font-size: 150%" id="3."><b>3. 調査結果</b></span></p><p>原因は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina%A5%C7%A5%A3%A5%B9%A5%D7%A5%EC%A5%A4">Retinaディスプレイ</a>にあった．</p><br />
<p><span style="font-size: 150%" id="3.1."><b>3.1. 解像度の意味は2つある</b></span></p><p>解像度は，最初，密度としての意味で使われていた．</p><p>後に説明するdpi, <a class="keyword" href="http://d.hatena.ne.jp/keyword/ppi">ppi</a>である．</p><p>例）300dpi</p><p>しかし，現在では，ディスプレイの総<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>数としての意味でも使われるようになった．</p><p>例）1920×1080</p><p>密度での意味では，解像度．</p><p>総<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>数での意味では，画像解像度．</p><p>と分けるみたい．</p><p>(これがいろんな人の混乱を生んでる気がする)</p><br />
<p><span style="font-size: 150%" id="3.2."><b>3.2. 解像度</b></span></p><p>dpi(dots per inch)と呼ばれている．</p><p>1インチ内にドットがどれだけあるかという数値である．</p><p>同じサイズであれば，解像度が高い方がきれいに見える．</p><p>※<a class="keyword" href="http://d.hatena.ne.jp/keyword/ppi">ppi</a>については説明を省略します．ディスプレイで見る場合は，dpi≒<a class="keyword" href="http://d.hatena.ne.jp/keyword/ppi">ppi</a></p><br />
<p><span style="font-size: 150%" id="3.3."><b>3.3. <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>/dpi/インチの関係</b></span></p><p>pixel ＝ inch × dpi</p><p>例）モニタの解像度を高くすると，アイコンが小さくなるのは，dpiが高いせいで少しの面積でアイコンを表示できるから．</p><br />
<p><span style="font-size: 150%" id="3.4."><b>3.4. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina%A5%C7%A5%A3%A5%B9%A5%D7%A5%EC%A5%A4">Retinaディスプレイ</a>登場</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina%A5%C7%A5%A3%A5%B9%A5%D7%A5%EC%A5%A4">Retinaディスプレイ</a>が登場する前までの画像解像度は，</p><p>物理的な値 ＝ 論理的な値</p><p>であった．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina%A5%C7%A5%A3%A5%B9%A5%D7%A5%EC%A5%A4">Retinaディスプレイ</a>の登場で，物理解像度と論理解像度が違うようになった．</p><p>例）iPhone6s<br />
物理解像度　750×1334<br />
論理解像度　375×667</p><p>この場合，普通の大きさで表示したいなら2倍の大きさが必要．</p><br />
<p><span style="font-size: 150%" id="3.5."><b>3.5. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina%A5%C7%A5%A3%A5%B9%A5%D7%A5%EC%A5%A4">Retinaディスプレイ</a>での解決策</b></span></p><p>PCでのディスプレイで表示していたサイズを<a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina">Retina</a>で表示した場合，</p><p>2倍で表示されてしまう(？)ため，画質が悪くなってしまう．</p><p>そこで，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>を大きく作成し，小さく表示することで，解像度を上げるという手法がある．</p><p>例）非<a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina">Retina</a>で1000×1000　150dpiで表示していた場合．</p><p>2000×2000 150dpiで画像を作成．</p><p>Webでは，1000×1000で表示することで，300dpiで表示される．</p><br />
<p><span style="font-size: 150%" id="4."><b>4. 結論</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Retina%A5%C7%A5%A3%A5%B9%A5%D7%A5%EC%A5%A4">Retinaディスプレイ</a>に画像を綺麗に表示する際は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>数を大きく作成し，小さく表示することで，高解像度で表示できる．</p><br />
<p><span style="font-size: 150%" id="5."><b>5. 感想</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>の大きい画像をWebブラウザで小さく表示すれば綺麗に見れる．</p><p>これは感覚ではわかっていただけど，論理的ではないけど，ある程度根拠(？)を述べれるようになったのはよかった．</p><p>正直こんなことないと，いろいろ調べないんだよね...笑</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>の勉強会とかあって，dp(<a class="keyword" href="http://d.hatena.ne.jp/keyword/dip">dip</a>)とか<a class="keyword" href="http://d.hatena.ne.jp/keyword/SVG">SVG</a>とかは知っているんだけど，</p><p>今回みたいな古い規格(？)は調べるのが億劫だから基礎がなくて，こういう時に困っちゃうんだよね．</p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2017%2F06%2F25%2F203356" title="HEIFという画像フォーマットが今後主流になるらしい！？ - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2017/06/25/203356">kurowasi2525.hatenablog.com</a></cite></p><br />
<p><span style="font-size: 150%" id="6."><b>6. 参考文献</b></span></p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftechacademy.jp%2Fmagazine%2F3494" title="Photoshopで写真の解像度を変更する方法【初心者向け】" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://techacademy.jp/magazine/3494">techacademy.jp</a></cite><br />
<a href="https://ja.wikipedia.org/wiki/%E3%82%A4%E3%83%B3%E3%83%81">&#x30A4;&#x30F3;&#x30C1; - Wikipedia</a><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fpaint.syumideget.com%2Findex.php%3F%25E8%25A7%25A3%25E5%2583%258F%25E5%25BA%25A6%25E3%2583%25BB%25E3%2583%2594%25E3%2582%25AF%25E3%2582%25BB%25E3%2583%25AB%25E3%2583%25BB%25E3%2582%25A4%25E3%2583%25B3%25E3%2583%2581" title="解像度・ピクセル・インチ - はじめての簡単ペイント" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://paint.syumideget.com/index.php?%E8%A7%A3%E5%83%8F%E5%BA%A6%E3%83%BB%E3%83%94%E3%82%AF%E3%82%BB%E3%83%AB%E3%83%BB%E3%82%A4%E3%83%B3%E3%83%81">paint.syumideget.com</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2F7968%2Fitems%2F61a1deff80721f412096" title="【単位超入門】ピクセル、ドット、PPI、DPI、解像度、メートル、インチ、ポイント - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/7968/items/61a1deff80721f412096">qiita.com</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Fimusam%2Fitems%2Fcd4f8da49c3ab73d6475" title="今さらだけど、Webデザイン制作における解像度のおはなし - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/imusam/items/cd4f8da49c3ab73d6475">qiita.com</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fyamasha.net%2Fbase" title="WEBデザインを今から始める人のためのPhotoshop３つの基礎知識" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://yamasha.net/base">yamasha.net</a></cite><br />
[<a href="http://un-tech.jp/display-resolution/">http://un-tech.jp/display-resolution/</a><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fyamasha.net%2Fbase" title="WEBデザインを今から始める人のためのPhotoshop３つの基礎知識" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://yamasha.net/base">yamasha.net</a></cite>:embed:cite]<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.capricious.info%2Flog%2F2014%2F06%2F02%2Fretina%2F" title="続 画像サイズ「今後心配なRetina対応について！」" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.capricious.info/log/2014/06/02/retina/">www.capricious.info</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.capricious.info%2Flog%2F2013%2F04%2F07%2Fpixcel%2F" title="画像サイズ「WEBにおける解像度が不要な理由」" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.capricious.info/log/2013/04/07/pixcel/">www.capricious.info</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Windows10でPleiades All in Oneを使わずにEclipseの環境を構築した
BASENAME: 2017/09/06/145442
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 09/06/2017 14:54:42
CATEGORY: Eclipse
CATEGORY: 環境構築
IMAGE: https://ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&amp;MarketPlace=JP&amp;ASIN=4774178942&amp;ServiceVersion=20070822&amp;ID=AsinImage&amp;WS=1&amp;Format=_SL250_&amp;tag=kurowasi2525-22
-----
BODY:
<p><span style="font-size: 150%"><b>概要</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriverを使うため，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>の環境が必要なので構築してみた．</p><br />
<p><span style="font-size: 150%"><b>目次</b></span></p><p><a href="#1.">1. 背景</a><br />
<a href="#1.1." style="margin-left: 10px; display: block;">1.1. Seleniumとは</a><a href="#1.2." style="margin-left: 10px; display: block;">1.2. Selenium WebDriver</a><a href="#1.3." style="margin-left: 10px; display: block;">1.3. Eclipse</a><a href="#2.">2. 目的</a><br />
<a href="#2.1." style="margin-left: 10px; display: block;">2.1. Pleiadesを利用しない理由</a><a href="#3.">3. 環境構築</a><br />
<a href="#3.1." style="margin-left: 10px; display: block;">3.1. Eclipseのインストール</a><a href="#3.2." style="margin-left: 10px; display: block;">3.2. Javaプロジェクトの作成</a><a href="#3.3." style="margin-left: 10px; display: block;">3.3. クラスの作成</a><a href="#3.4." style="margin-left: 10px; display: block;">3.4. HelloWorldコードの記述</a><a href="#3.5." style="margin-left: 10px; display: block;">3.5. 実行</a><a href="#4.">4. 感想</a><br />
<a href="#5.">5. 参考文献</a></p><br />
<p><span style="font-size: 150%" id="1."><b>1. 背景</b></span></p><p>卒業研究で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriverを使うため，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>の環境が必要なので構築してみた．</p><p>WebDriverの言語は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>にした．</p><p>本当はNode.jsにしたかったのだが，僕の内定先は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のシステムで，</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>を使っているみたいなので，目先の利益を追って<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>を選んだ笑．</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<br />
<p><span style="font-size: 150%" id="1.1."><b>1.1. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>とは</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a>は，Webアプリケーションの画面操作を自動化するツール．</p><p>クリックやキー入力，画面に表示された値の取得や画面キャプチャの取得など，</p><p>ブラウザに対するさまざまな操作を自動で行うことができる．</p><br />
<p><span style="font-size: 150%" id="1.2."><b>1.2. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriver</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Selenium">Selenium</a> WebDriverは，<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0%B8%C0%B8%EC">プログラミング言語</a>のコードからブラウザ操作が可能なライブラリ．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/Ruby">Ruby</a>・<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>など，各言語のライブラリとして提供されている．</p><br />
<p><span style="font-size: 150%" id="1.3."><b>1.3. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a></b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/IBM">IBM</a>が開発した無料の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C5%FD%B9%E7%B3%AB%C8%AF%B4%C4%B6%AD">統合開発環境</a>(<a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>)．</p><p>僕の研究室の先生は，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>という言語は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>と組み合わせて初めて完成する言語だと言ってた笑．</p><br />
<p><span style="font-size: 150%" id="2."><b>2. 目的</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>を使い，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Hello%20World">Hello World</a>！を出すプログラムを実行できる環境の構築．</p><p>日本語<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3">プラグイン</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/JVM">JVM</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>などいろいろ入った『<a class="keyword" href="http://d.hatena.ne.jp/keyword/Pleiades">Pleiades</a> All in One』というものがあるが，</p><p>これは無駄な機能も入っていたりするため，これは使わずに構築する．</p><br />
<p><span style="font-size: 150%" id="2.1."><b>2.1. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Pleiades">Pleiades</a>を利用しない理由</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>のインストールの記事を探すと，大体<a class="keyword" href="http://d.hatena.ne.jp/keyword/Pleiades">Pleiades</a>のインストール方法がある．</p><p>今回<a class="keyword" href="http://d.hatena.ne.jp/keyword/Pleiades">Pleiades</a>を利用しない理由は３つ．</p>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Pleiades">Pleiades</a>は重い</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>で問題にぶつかった場合，英語での記事が多く，メニュバーの操作を日本語に変換する労力が面倒</li>
<li>いっぱい記事あるし，今更<a class="keyword" href="http://d.hatena.ne.jp/keyword/Pleiades">Pleiades</a>のインストール方法の記事書いてもね</li>
</ol><p></p><br />
<p><span style="font-size: 150%" id="3."><b>3. 環境構築</b></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>の環境構築・整ったのか確認を行う．</p><br />
<p><span style="font-size: 150%" id="3.1."><b>3.1. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a>のインストール</b></span></p><p>まずは，公式サイトにアクセス．</p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.eclipse.org%2F" title="The Platform for Open Innovation and Collaboration | The Eclipse Foundation" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.eclipse.org/">www.eclipse.org</a></cite></p><p>いろんなところに『DOWNLOAD』ってあるけど，とりあえず左上のメニューの『GETTING STARTED』をクリック．</p><p>①Get Started<br />
　Download and install the <a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>.</p><p>『DOWNLOAD <a class="keyword" href="http://d.hatena.ne.jp/keyword/ECLIPSE">ECLIPSE</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a>』をクリック！</p><p><a href="http://www.eclipse.org/downloads/">Eclipse Downloads | The Eclipse Foundation</a>で『DOWNLOAD 64 BIT』をクリック．</p><p>今回は，OXYGENが最新バージョンみたい</p><p>またまたページ遷移して，『DOWNLOAD』をクリック．(どんだけDOWNLOADをクリックさせるんだよ笑)</p><p>『<a class="keyword" href="http://d.hatena.ne.jp/keyword/eclipse">eclipse</a>-inst-<a class="keyword" href="http://d.hatena.ne.jp/keyword/win64">win64</a>.exe』がダウンロードできたので，クリックしてインストール！</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170906/20170906131715.png" alt="f:id:kurowasi2525:20170906131715p:plain" title="f:id:kurowasi2525:20170906131715p:plain" class="hatena-fotolife" itemprop="image"></span></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%E9">インストーラ</a>が起動した．(結構種類があるんだな)</p><p>とりあえず，今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>言語のWebDriverを使うので，上位互換である『<a class="keyword" href="http://d.hatena.ne.jp/keyword/Eclipse">Eclipse</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/IDE">IDE</a> for <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java%20EE">Java EE</a> Developers』をインストール．</p><p>デスクトップにショートカットが作成された．</p><p>ダブルクリックで起動．</p><p>いつものworkspaceの指定が出てきたね．</p><br />
<p><span style="font-size: 150%" id="3.2."><b>3.2. <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>プロジェクトの作成</b></span></p><p>まずは，プロジェクトの作成を行う．</p><p>アイコンが並ぶメニューの一番左の新規作成をクリック．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> Projectをクリック．</p><p>Project nameをHelloWorldに設定.</p><p>Finishをクリック．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D1%A1%BC%A5%B9%A5%DA%A5%AF%A5%C6%A5%A3%A5%D6">パースペクティブ</a>を開くか？みたいな質問をされた．</p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.hitachi.co.jp%2FProd%2Fcomp%2Fsoft1%2Fcosminexus%2Fuseful%2Ftips%2F081202_eclipse-workbench-workspace.html" title="クラウドサービスプラットフォーム Cosminexus：Eclipse用語「ワークベンチ」「パースペクティブ」「エディター」「ビュー」「ワークスペース」について：ソフトウェア：日立" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.hitachi.co.jp/Prod/comp/soft1/cosminexus/useful/tips/081202_eclipse-workbench-workspace.html">www.hitachi.co.jp</a></cite></p><p>とりあえず，開くを押して，Pakage <a class="keyword" href="http://d.hatena.ne.jp/keyword/Explorer">Explorer</a>にHelloWorldプロジェクトが表示された．</p><p><span style="font-size: 150%" id="3.3."><b>3.3. クラスを作成</b></span></p><p>今度はクラスの作成を行う．</p><p>Pakageにhello_worldと設定．</p><p>NameにMainを設定.</p><p>public static void main(String[] args)にチェックをして，</p><p>Generate commentsにチェックを入れて，</p><p>Finishをクリック．</p><br />
<p><span style="font-size: 150%" id="3.4."><b>3.4. HelloWorldコードの記述</b></span></p><p>次に，<a class="keyword" href="http://d.hatena.ne.jp/keyword/Hello%20World">Hello World</a>!を表示させるコードを記述．</p><p>Mainクラスのmainという名前の静的メソッド内に．</p>
<pre class="code lang-java" data-lang="java" data-unlink>System.out.println(<span class="synConstant">&quot;Hello World!&quot;</span>);
</pre><p>を記述．(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>初心者向けではないので，ここまで丁寧に説明する必要ないか笑)</p><br />
<p><span style="font-size: 150%" id="3.5."><b>3.5. 実行</b></span></p><p>最後に実行．</p><p>メニュバーのRun→Run As→1 <a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a> Applicationを選択．</p><p>下のConsole部分に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Hello%20World">Hello World</a>!が表示されたら完成．<br />
(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>のPathとかは自動でやってくれるのね)</p><br />
<p><span style="font-size: 150%" id="4."><b>4. 感想</b></span></p><p>これで完成と言ってよいのかわからないが一応完成．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Java">Java</a>系のPathとかを設定したり，もっと構築が大変だと思ってたけど，案外楽だった．</p><p>昔は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%C8%A1%BC%A5%E9">インストーラ</a>なんてなかったんだっけ？(前に構築した時は，もっと苦労した記憶が)</p><br />
<p>もしよろしければ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p><span style="font-size: 150%" id="5."><b>5. 参考文献</b></span></p><p><a target="_blank"  href="https://www.amazon.co.jp/gp/product/4774178942/ref=as_li_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4774178942&linkCode=as2&tag=kurowasi2525-22&linkId=34a40d7875a39fa98e938747424bb948"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&MarketPlace=JP&ASIN=4774178942&ServiceVersion=20070822&ID=AsinImage&WS=1&Format=_SL250_&tag=kurowasi2525-22" ></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=kurowasi2525-22&l=am2&o=9&a=4774178942" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwindows.blogo.jp%2Fprogramming%2Feclipse_java_install" title="Windows10にEclipse(java)をインストール" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://windows.blogo.jp/programming/eclipse_java_install">windows.blogo.jp</a></cite></p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fblog.codecamp.jp%2Feclipse" title="【入門編】Eclipseを使ったJavaプログラミングを基礎から解説" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://blog.codecamp.jp/eclipse">blog.codecamp.jp</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Laradockを使っていて、Postgresに接続できなかった問題
BASENAME: 2017/09/05/232301
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 09/05/2017 23:23:01
CATEGORY: Laradock
CATEGORY: バイト日記
CATEGORY: PostgreSQL
-----
BODY:
<p><span style="font-size: 150%"><b>目次</b></span><br />
<a href="#1.">1. 背景</a><br />
<a href="#2.">2. 解決策</a><br />
<a href="#3.">3. 余談</a></p><br />
<p><span style="font-size: 150%" id="1."><b>1. 背景</b></span></p><br />
<p>バイト先でLaradockを使っているのだが，Postgresに接続できない問題があった．</p><p>ローカルからLaradockでのPostgresに</p><p>　ホスト：<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a><br />
　ユーザ：default<br />
　パスワード：secret<br />
　ポート：5432<br />
　データベース：default</p><p>で接続しようとするとできなかった．</p><p>ローカル環境には，Laradockで作ったものではなく，<a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a>コマンドでインストールしたPostgresが起動していた．</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a>コマンドで入れたPostgresに対しての接続はできた．</p><p>同じポート5432に２つ作ることはできないだろうけど，</p><p>ここらへんはDockerの知識が足りないため，勉強しようと思います．</p><p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">Dockerに対する知識が足りないな<br>ちゃんと勉強しないと</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/904897654177521664">2017年9月5日</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a>コマンドで起動したPostgresを落とせばいいのだろうが，</p><p>こちらも違う環境で使っていて，デーモン化？で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BC%AB%C6%B0%B5%AF%C6%B0">自動起動</a>するようになっているので，</p><p>後で面倒になりそうだから，止めたくない．</p><br />
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EF%A1%BC%A5%AF%A5%B9%A5%DA%A1%BC%A5%B9">ワークスペース</a>に入って，Postgresに接続しようとするが，</p><p>以下のようなエラーが出る．<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>$ docker-compose exec workspace bash
# psql -l

psql: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket &#34;/var/run/postgresql/.s.PGSQL.5432&#34;?psql: could not connect to server: No such file or directory</pre><p>/var/run/ <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リまでは存在するのだが，<a class="keyword" href="http://d.hatena.ne.jp/keyword/postgresql">postgresql</a>という<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リは見当たらない．</p><p>色々調べて，試したのだが解決しない．</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<br />
<p><span style="font-size: 150%" id="2."><b>2. 解決策</b></span></p><br />
<p>自分が取った解決策は，</p><p>ローカルのポート？を変えて，Dockerのコンテナ内のポート？に接続するという方法</p><p>docker-compose.yml</p>
<pre class="code" data-lang="" data-unlink>### PostgreSQL Container ####################################

#      - &#34;${POSTGRES_PORT}:5432&#34;
       - &#34;5444:5432&#34;

### PostgreSQL PostGis Container ############################

#      - &#34;${POSTGRES_PORT}:5432&#34;
       - &#34;5444:5432&#34;</pre><p><br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/PostgreSQL">PostgreSQL</a>って書いてあるやつは，全部変えちゃったけど，多分どっちかで大丈夫そう笑．</p><p>反映されているか，確認</p>
<pre class="code" data-lang="" data-unlink>$ docker ps
CONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS              PORTS                                        NAMES
hoge                laradock_apache2     &#34;hoge                &#34;   10 minutes ago      Up 10 minutes       0.0.0.0:443-&gt;443/tcp, 0.0.0.0:8001-&gt;80/tcp   laradock_apache2_1
hoge                laradock_php-fpm     &#34;hoge                &#34;   10 minutes ago      Up 10 minutes       9000/tcp                                     laradock_php-fpm_1
hoge                laradock_workspace   &#34;hoge                &#34;   10 minutes ago      Up 10 minutes       0.0.0.0:2222-&gt;22/tcp                         laradock_workspace_1
hoge                laradock_postgres    &#34;hoge                &#34;   10 minutes ago      Up 10 minutes       0.0.0.0:5444-&gt;5432/tcp                       laradock_postgres_1</pre><p></p><br />
<p>ローカルからLaradockでのPostgresに</p><p>　ホスト：<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a><br />
　ユーザ：default<br />
　パスワード：secret<br />
　ポート：5444<br />
　データベース：default</p><p>接続することができた．</p><p>これであってはいないと思うのだが，一応僕はこの方法で解決した．</p><br />
<p><span style="font-size: 150%" id="3."><b>3. 余談</b></span></p><br />
<p>※パートナーさんが同じようなはまり方をしていたのだが，<br />
パートナーさんは，コンテナのデータなどを消して，<br />
ほとんど一から環境を作りなおしたら，うまく接続できるようになっていた．</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: バイトでRepositoryパターンを使ったよ
BASENAME: 2017/08/29/222904
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/29/2017 22:29:04
CATEGORY: バイト日記
CATEGORY: Laravel
-----
BODY:
<p>今日のタスクは前回の続き<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2017%2F08%2F22%2F224954" title="久しぶりにNVMを使ってNodeの環境構築を行って、Laravel5にはCSRFチェックを行ってるって知りました - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2017/08/22/224954">kurowasi2525.hatenablog.com</a></cite></p><br />
<p>前回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/IoC">IoC</a>とは何かなどを理解できていなかった<br />
この一週間の暇な時間で</p><p><a href="https://www.amazon.co.jp/dp/B00WHEJDKK/ref=as_li_ss_il?_encoding=UTF8&btkr=1&linkCode=li3&tag=kurowasi2525-22&linkId=4e4affc27606553962856b6e1308030d" target="_blank"><img border="0" src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B00WHEJDKK&Format=_SL250_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=kurowasi2525-22" ></a><img src="https://ir-jp.amazon-adsystem.com/e/ir?t=kurowasi2525-22&l=li3&o=9&a=B00WHEJDKK" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /></p><p>を読んで<a class="keyword" href="http://d.hatena.ne.jp/keyword/IoC">IoC</a>やDIを勉強したから大丈夫だろう<br />
(この本はLaravelの概念系が書いてある本。パソコンの前でカタカタやりながら読む本ではないですね)<br />
(電車などで読むのには適していると思う)</p><br />
<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Fbmf_san%2Fitems%2Fc8d7b38b5f1f5747c2fd" title="Laravel リポジトリパターンの実装 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/bmf_san/items/c8d7b38b5f1f5747c2fd">qiita.com</a></cite></p><br />
<p>1. まずはModelに対応するRepositoryを作成<br />
(今回はすでにRepositoryが作成してあった)</p><p>2. 次にControllerに対応するアプリケーションを作成</p><p>3. Service Providerに作成したアプリケーションをmake&bind</p><p>4. 次にControllerに対応するReponseを作成</p><p>5. Service Provideに作成したReponseをmake&bind</p><p>6. 次にControllerに対応するResponseを作成</p><p>7. Service Provideに作成したResponseをmake&bind</p><br />
<br />
<p>一応流れが完成した<br />
後はvalidationを行う機能・DBに情報を記録する機能を作成するのみ</p><br />
<br />
<p>Laravelのvalidationについて調べていこう</p><br />
<p>こちらの記事が便利そう<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Ffagai%2Fitems%2F9904409d3703ef6f79a2" title="Laravelのバリデーションで指定できる内容をざっくりまとめ直しました。 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/fagai/items/9904409d3703ef6f79a2">qiita.com</a></cite></p><br />
<br />
<p>DBの仕様と詳細設計の仕様を見ながらValidationコードを書いていく</p><p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">詳細設計とDB定義書とLaravelのModelが全然違うんですが。。。<br>詳細設計での名前とDB定義書での名前は違うし、DB定義書に書いてあるプロパティがModelではなかったりするし<br><br>何を信じれば良いのだろうか</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/902375202847203328">2017年8月29日</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><p>上記の理由により、まぁまぁ適当な感じで完成</p><p>その後DBに情報を記録する機能の作成も終わり</p><br />
<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">Laravelで<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>ーパターンを適用させるだけでこんなに時間がかかってしまった</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/902422145950564352">2017年8月29日</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><br />
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%DD%A5%B8%A5%C8%A5%EA">リポジトリ</a>ーパターンというか、今回のプロジェクトのルールに従うのに大きく時間を取られました<br />
今回のは、</p><p>自作のControllerは、【自作のApplication】と【自作のRequest】と【自作のResponse】と【Request】と依存関係<br />
自作のApplicationは、【自作のRepository】と依存関係</p><p>みたいにとても複雑になっていた<br />
(上記の書き方で合っているのかわからない)</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: 久しぶりにNVMを使ってNodeの環境構築を行って、Laravel5にはCSRFチェックを行ってるって知りました
BASENAME: 2017/08/22/224954
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/22/2017 22:49:54
CATEGORY: 環境構築
CATEGORY: Node.js
CATEGORY: NVM
CATEGORY: Laravel
CATEGORY: バイト日記
-----
BODY:
<p><span style="font-size: 200%"><b>NVMを使ったNodeのバージョン管理できる環境構築</b></span><br />
※環境構築手順書の記事ではありません。<br />
※正しい手順でやりたい場合は、他のサイトを読むことをお勧めします。</p><br />
<p>最初は別プロジェクトの環境構築から<br />
フロント側をVue.js バック側をnodeのexpressを使うらしい<br />
expressは昔に使ったことがある。Vue.jsは触りたいと思っていたからすごい嬉しい</p><br />
<br />
<p>まずは、npmを入れよう<br />
会社のPCには<a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a>が入っているから、今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a>を使って入れよう</p>
<pre class="code" data-lang="" data-unlink>$ brew --version
Homebrew 1.2.1
$ brew install node</pre><p><br />
あ。。。<a class="keyword" href="http://d.hatena.ne.jp/keyword/brew">brew</a>のupdateするのを忘れてた。。。<br />
いつも先にupdateをするんだけど、まぁいいか</p>
<pre class="code" data-lang="" data-unlink>node 5.3.0 is already installed</pre><p><br />
あれ？もう入ってるやんけ笑</p>
<pre class="code" data-lang="" data-unlink>$node ls-remote</pre><p><br />
なんでエラー吐くんやって思ったけど、nvmだったわ笑<br />
久しぶりすぎて色々忘れてた笑</p><p>nodeは入ってたけど、nvmが入っていないので入れていきます</p>
<pre class="code" data-lang="" data-unlink>curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.32.1/install.sh | bash</pre><p>.<a class="keyword" href="http://d.hatena.ne.jp/keyword/bash">bash</a>_profileの中身を見たけど、pathの設定がしてあった<br />
Why?　勝手にやってくれるようになったの？</p><br />
<p>Gitからプロジェクトをcloneして、npm install</p><p>なんかnodeのバージョンが変みたいなエラーが出てた気がする<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>$npm run hoge</pre><p>起動しない。。。webpack関係のエラーみたい<br />
nvmでnodeのバージョンを変えて色々やってみる<br />
(バージョンの指定がしていない環境構築手順書ってどうなん？)</p><br />
<p>色々やってみたけど<br />
nodeのバージョンをv6.11.2にして、エラーが出まくっててよくわからなかったので、<br />
エラーに書いてあったコマンドを実行<br />
バージョンの違いによって起きた問題をリビルドして直す感じ？</p>
<pre class="code" data-lang="" data-unlink>npm rebuild node-sass --force</pre><p><br />
 正直何が問題だったのかよくわかりませんでしたが、<br />
うまく動作するようになりました</p><br />
<p>多分、npm installをした際のnodeのバージョンが古くて、うまくモジュールをインストールできていなかった？<br />
nodeのバージョンをあげて、リビルドすることでいい感じの環境になったのかな？</p><br />
<p>環境構築は完了<br />
次の作業に移る</p><br />
<br />
<br />
<br />
<p><span style="font-size: 200%"><b>Laradockのシステムの修正</b></span><br />
次は前回の続きで、Laravelの案件</p><p>アプリケーションからDockerを起動して、<br />
Laradockを起動</p>
<pre class="code" data-lang="" data-unlink>$docker-compose up -d apache2 postgres
$docker ps</pre><p></p><p>URLにアクセスして、ちゃんと表示される<br />
では、<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>から最新verを持ってこよう</p><br />
<p>なんかめちゃくちゃコンフリクトしてる。。。<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>$git reset --hard</pre><p>とかやっても、ローカルの変更が元に戻ってもpullしようとするとコンフリクトが起きて<br />
もう一度statusを見てみると、新しいファイルと変更だらけ。。。</p><p>よくわからないから、社員さんに聞いたけど、<br />
削除して、もう一度クローンした方が早いよと言われてそうすることに<br />
Laravelのバージョンを変えたのがコンフリクト大量発生の原因らしい</p><br />
<p>あまりこういうパワー系は好きじゃないけど、やるか<br />
調べたいけど、一応バイトだから給料もらってるわけだし、自己満足にお金をもらうわけにはいかない<br />
最短時間でできるならそれをやらなければ</p><br />
<p>元に戻った<br />
DBのMigrationをするみたい<br />
MigrationはNodeでしかやったことないから、<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>ではどうやってやるんだろう<br />
laravel Migration 検索検索！</p><br />
<p>どうやら</p>
<pre class="code" data-lang="" data-unlink>$php artisan migrate</pre><p> でいけるみたい</p><br />
<p>DBに接続しようとしてSequel Proを使ったんだけど、これってPostgres対応していないんだね笑<br />
今まで会社でもプライベートでもコマンドでやってたから知らなかった</p><p>PSequelがいいみたいなので、これをインストールしてみる</p><br />
<p>PSequelを使って接続を試みたが、なぜか失敗<br />
コマンドで接続を試みるが、失敗<br />
だけど、今回のシステムを立ち上げてPostgresからデータを取ってくる画面に行くと、<br />
ちゃんとエラーは起きていない(データベースを作っただけで中身は入れてないから、表は空白)</p><br />
<p>色々調査したんだけどわからなかった<br />
自分の中の結論は、他のプロジェクトでPostgresを扱っていて、そいつがデーモンで動き続けている<br />
よって、接続しようとすると、そっちに接続しようとして、そのUsernameはないよと言われるって感じ<br />
でも、なぜ二つのDocker環境のPostgresに直接接続する方法を今度調べておこう</p><br />
<p>とりあえず、情報を登録する画面の作成に入る</p><br />
<br />
<br />
<p>色々あったけど、今回知ったのはLaravel5からPOST送信で<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSRF">CSRF</a>チェックってのを行っているらしい<br />
だから、Formの中に<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSRF">CSRF</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%AF">トーク</a>ンを渡すコードを書くみたい<br />
<a href="http://start-now.link/100/archives/3133">&raquo; Laravel&#x306E;&#x30D5;&#x30A9;&#x30FC;&#x30E0;&#x9001;&#x4FE1;&#x3067;&#x300C;TokenMismatchException in VerifyCsrfToken.php&#x300D;&#x30A8;&#x30E9;&#x30FC;&#x306E;&#x5BFE;&#x51E6;&#x65B9;&#x6CD5;&#x3002;&#xFF5C;&#x30B3;&#x30EF;&#x30FC;&#x30AD;&#x30F3;&#x30B0;&#x30B9;&#x30DA;&#x30FC;&#x30B9;&#x7BA1;&#x7406;&#x4EBA;&#x306E;&#x30D6;&#x30ED;&#x30B0;</a></p><br />
<p><span style="font-size: 200%"><b>感想</b></span><br />
LaravelでDBに登録する画面を作成していて思ったのは、Laravelの知識がとても足りていない<br />
そして、<a class="keyword" href="http://d.hatena.ne.jp/keyword/IoC">IoC</a>などの概念を理解できていないということ</p><p>今度調べてブログに書きたいと思う</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Chrome62からHTTPページのinputタグに警告が表示されるようになるらしい
BASENAME: 2017/08/19/223030
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/19/2017 22:30:30
CATEGORY: 気になる話題
CATEGORY: Google Chrome
-----
BODY:
<p><span style="font-size: 200%"><b>はじめに</b></span></p><p>Web系Developerの方々に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>さんから悪魔のメッセージがきてるみたい<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>で結構話題になってた<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>Chrome62でHTTPページのフォームにテキストを入力すると、
「保護されていません」という警告が表示されるようになります。
また、シークレットモードを使用している場合は、
HTTPページにアクセスするだけで「保護されていません」と表示されます。

長期的には、HTTPで配信されるすべてのページを「保護されていません」と明示することを計画しており、
この新しい警告はその一環です。</pre><p><br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>なくすぞ！<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>なくすぞ！<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flash">Flash</a>なくすぞ！<br />
の次は<a class="keyword" href="http://d.hatena.ne.jp/keyword/HTTPS">HTTPS</a>にするぞ！を本格的に開始するみたい</p><br />
<p>inputの警告が出るってことは、ほとんどのサイトを<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>に対応させなきゃいけないから結構面倒だね</p><br />
<p>小学校時代の同級生は、投稿した記事の<a class="keyword" href="http://d.hatena.ne.jp/keyword/Facebook">Facebook</a>のいいねが全部消えてしまうのを残念がっていた<br />
まぁ対策はあるみたいだけど、結構面倒みたい(鼻ほじ)</p><br />
<p><span style="font-size: 200%"><b>感想</b></span></p><p>僕がこの流れを見て思ったことは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>って安全なの？ってこと<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google">Google</a>さんは<a class="keyword" href="http://d.hatena.ne.jp/keyword/HTTPS">HTTPS</a>への流れにもってこうとしてるけど、<br />
前に僕が研究室友達に聞いた話だと、<br />
『<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>には重大な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C8%BC%E5%C0%AD">脆弱性</a>があり<a class="keyword" href="http://d.hatena.ne.jp/keyword/TLS">TLS</a>への移行の流れが来てる』っていう話を前に聞いた</p><br />
<br />
<p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fjp.globalsign.com%2Fservice%2Fssl%2Fknowledge%2Fssltls_brittle.html" title="SSLとTLSの違いと脆弱性の問題｜GMOグローバルサイン【公式】" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://jp.globalsign.com/service/ssl/knowledge/ssltls_brittle.html">jp.globalsign.com</a></cite></p><br />
<br />
<p>僕は<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/TLS">TLS</a>とかのセキュリティ関係は詳しくないので、よくわかりませんが<br />
『<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>に移行させておいて、すぐに<a class="keyword" href="http://d.hatena.ne.jp/keyword/TLS">TLS</a>に変えてね！』とかになったら面倒だろうな<br />
(<a class="keyword" href="http://d.hatena.ne.jp/keyword/SSL">SSL</a>から<a class="keyword" href="http://d.hatena.ne.jp/keyword/TLS">TLS</a>に変えるのが難しいのかもよくわかってない)</p><br />
<p>誰か詳しい方いらしたら教えてください！笑</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: AdminLTEってのを触ってみたよ
BASENAME: 2017/08/15/204239
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/15/2017 20:42:39
CATEGORY: AdminLTE
CATEGORY: バイト日記
-----
BODY:
<p><span style="font-size: 200%"><b>はじめに</b></span></p><p>今日はネイティブアプリを管理するためのWeb管理画面の機能追加がお仕事</p><p>まずは前回構築したLaradockを起動しよう！</p>
<pre class="code" data-lang="" data-unlink>$ docker-compose up -d apache2 postgres</pre><p>エラーが出た</p>
<pre class="code" data-lang="" data-unlink>ERROR: Couldn&#39;t connect to Docker daemon. You might need to start Docker for Mac.</pre><p><br />
Docker for <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>ってインストールしたらパソコン起動時に勝手に起動するのかと思ってた<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BC%AB%C6%B0%B5%AF%C6%B0">自動起動</a>の設定があると思うけど、家に帰ってから調べることにしよう</p><br />
<p>Laradockの起動もできたし、URLにアクセスしたらちゃんと表示される<br />
これで準備完了！<br />
けど、今回のシステムの情報を全く知らないからドキュメントを読んでいこう</p><br />
<p>社員さん曰く、できるだけパーツ化してやって欲しいとのこと<br />
見た目はAdminLTEを使っているらしい(初めて聞いた)<br />
表が多いためうまくパーツ化できていないらしい<br />
(現在はテーブルで実装)<br />
テーブルはあまり好きじゃないから<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flex">Flex</a>かGrid Layoutを使いたいところ<br />
(前勉強したけど、その後使ってないから使ってみたい笑)</p><p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fkurowasi2525.hatenablog.com%2Fentry%2F2017%2F06%2F14%2F031853" title="floatもflexも古い？Grid Layout Moduleの時代が来るらしい - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2017/06/14/031853">kurowasi2525.hatenablog.com</a></cite></p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<br />
<p>ドキュメント見たり、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>見たりしたけど、正直どこまでやればいいのかわからない。。。<br />
画面レイアウトもふわっとしてるし、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>はAdminLTEのパーツをコピペして表の中身が直書き<br />
(完成品はPostgresからデータを取ってくるもの)</p><br />
<p>ようわからんから、まずはAdminLTEについて勉強しよう</p><br />
<p><span style="font-size: 200%"><b>AdminLTE</b></span><br />
</p>

<ul>
<li>Bootstrap3をベースにした、管理画面等のテンプレートテーマ</li>
<li>MITライセンス</li>
</ul><p>簡単に調べて使って見た結果、誰でもコピペでかっこいいデザインのサイト作れますよっていう<br />
いつものやつですね</p><br />
<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.casleyconsulting.co.jp%2Fblog-engineer%2F%25E3%2583%2587%25E3%2582%25B6%25E3%2582%25A4%25E3%2583%25B3%2F%25E3%2581%258B%25E3%2581%25A3%25E3%2581%2593%25E3%2581%2584%25E3%2581%2584%25E7%2594%25BB%25E9%259D%25A2%25E3%2581%258C%25E4%25BD%259C%25E3%2582%258C%25E3%2581%25BE%25E3%2581%2599%25E3%2580%2582%25E3%2581%259D%25E3%2581%2586%25E3%2580%2581%25E3%2580%258Cadminlte%25E3%2580%258D%25E3%2581%25AA%25E3%2582%2589%25E3%2581%25AD%2F" title="かっこいい画面が作れます。そう、「AdminLTE」ならね" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.casleyconsulting.co.jp/blog-engineer/%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3/%E3%81%8B%E3%81%A3%E3%81%93%E3%81%84%E3%81%84%E7%94%BB%E9%9D%A2%E3%81%8C%E4%BD%9C%E3%82%8C%E3%81%BE%E3%81%99%E3%80%82%E3%81%9D%E3%81%86%E3%80%81%E3%80%8Cadminlte%E3%80%8D%E3%81%AA%E3%82%89%E3%81%AD/">www.casleyconsulting.co.jp</a></cite></p><br />
<br />
<br />
<p>自分でやったやり方は<br />
ドキュメントを読んで、大まかな形を作る<br />
(header, footer, <a class="keyword" href="http://d.hatena.ne.jp/keyword/sidebar">sidebar</a>)←ここら辺は基本のページみたいのがあるから、それをコピペで十分</p><p><span style="font-size: 150%"><a href="https://adminlte.io/docs/2.4/installation">AdminLTE - Installation</a></span></p><p>contentのところに以下のページの使いたいものの構造を見ながらコピペ<br />
後はClassを書き換えたり、たまに自分で作ったClassを適応させる感じでした</p><p><span style="font-size: 150%"><a href="https://adminlte.io/themes/AdminLTE/index2.html">AdminLTE 2 | Dashboard</a></span></p><br />
<br />
<p>使い方や導入方法は調べたらたくさん出てくるので、調べてください！笑</p><p>ほんの少しだけど、今日数ページ作成してみて思ったのは、<br />
表とかフォームとかを作るだけなら、他のでよさそう<br />
わざわざ勉強して導入するほど素晴らしいものだとは思えなった</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>をある程度勉強している人なら、わざわざこれを使うほどでもないってのが僕の感想<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>の勉強が面倒で、このサイトのパーツを丸々でいいから使いたいっていうならいいと思う</p><p>今回のバイトでは使わなかったが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A3%A5%B8%A5%A7%A5%C3%A5%C8">ウィジェット</a>やタイムラインなどを使うなら、勉強以上の効果を得られるんじゃないかな<br />
headerや<a class="keyword" href="http://d.hatena.ne.jp/keyword/sidebar">sidebar</a>もデフォルトがあるから便利かな</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: MacでDocker構築・laradockを使ってみる
BASENAME: 2017/08/08/161555
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 08/08/2017 16:15:55
CATEGORY: Docker
CATEGORY: Laravel
CATEGORY: Laradock
CATEGORY: バイト日記
CATEGORY: 環境構築
-----
BODY:
<p><span style="font-size: 200%"><b>はじめに<b></span><br />
３ヶ月ぶりにバイトに来た<br />
(１ヶ月ぶりだと思ってたけど、社員さんに３ヶ月ぶりだねと言われて時の流れの早さに驚愕した)<br />
(それだけ卒業研究に集中していた証拠だろう)<br />
久しぶりすぎなので、まずは環境構築からしてほしいとのこと<br />
今作っているものは、Dockerでやることになったみたいなので、Dockerの構築をまずはしてほしいみたいなので<br />
ここに書いていこうと思う<br />
(リモートの人が２日前にこのシステムを作り、社員さん１人が手順書を見て環境構築に成功させた。)<br />
(成功した社員さんは今日出社しておらず、他の社員さんに情報共有はされておらず。)<br />
(自分以外の数人も同時に環境構築に取り掛かる)</p><p><span style="font-size: 200%"><b>Docker構築手順</b></span></p><p>まずは下記のリンクにアクセスして、これの手順に 従っていくみたい<br />
<iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fdocs.docker.com%2Fdocker-for-mac%2Finstall%2F" title="Install Docker for Mac" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://docs.docker.com/docker-for-mac/install/">docs.docker.com</a></cite></p><br />
<p>英語やんけー<br />
英語は苦手なんですよね</p><p>Docker for <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>で実行するために必要なものが全部入っているみたい<br />
安定verと開発中のやつ(次期搭載機能)？があるみたい<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac%20OS%20X">Mac OS X</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/El%20Capitan">El Capitan</a> 10.11以上で<a class="keyword" href="http://d.hatena.ne.jp/keyword/MMU">MMU</a>仮想のサポートが必要みたい(4GB以上のRAMが必要)</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<p>とりあえず【Get Docker for <a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>[Stable]】をクリックしてDocker.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dmg">dmg</a>をダウンロード<br />
Docker.<a class="keyword" href="http://d.hatena.ne.jp/keyword/dmg">dmg</a>をダブルクリックして起動</p><p>サイトと同じクジラさんが出てきました！<br />
クジラさんをドラック＆ドロップでApplicationsフォルダに入れます<br />
クジラさんの横のApplicationsフォルダをダブルクリックすればFinderが起動する<br />
たくさんのアプリの中にDocker(クジラのアイコン)があるのでダブルクリック</p><br />
<p>"Docker"を検証中...　が長い<br />
家だったら動画とか見るんだけど、バイト中だとやることないよね<br />
こういう時に、ブログのはじめにとかを書いて行く</p><br />
<br />
<p>検証が終わると、質問のダイアログが出てくるので、開くを選択<br />
クジラさんが笑いながらWELCOMEって言ってくれてる笑<br />
(真顔でNextをクリック)</p><br />
<p>クジラさんがめっちゃムカつく顔で、アクセスの権限をくれみたいなことを言ってくるので<br />
OKをクリックして、ログ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%D1%A5%B9">インパス</a>ワードを入力<br />
そしたら上のメニューバーにクジラさんのアイコンが出てきた！</p><p>ドキュメントには「インストールが成功したぜ！」ってメッセージが出ると書いてあったが、<br />
何も出ない。。。<br />
まぁ、どんどん進めていきましょう</p><br />
<p>まずはAbout Dockerで最新バージョンか確認しよう！だって<br />
でも最新バージョンが何かわからん。調べるのは面倒だからメモして終わりにしよう<br />
Version 17.06.0-ce-mac19 (18663)<br />
他にも色々文字列があるけど、なんの情報かわからないから、ここに載せておくのはやめにしよう</p><p>よーわからんけど、「Docker is running」ってなってるし成功したのだろう<br />
次の作業に移ろう</p><br />
<p><span style="font-size: 200%"><b>Laradock</b></span></p><p>今回はLaravelを使ってるみたいだから、Laradockというのを使うみたい<br />
下のサイトを見て、なんとなくどんなものか把握した</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.tam-tam.co.jp%2Ftipsnote%2Fprogram%2Fpost11885.html" title="Laravel開発環境をLaradockで構築する ｜ Tips Note by TAM" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.tam-tam.co.jp/tipsnote/program/post11885.html">www.tam-tam.co.jp</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Fniisan-tokyo%2Fitems%2Fd4485b8bb4fbfcfcc6be" title="Laravel使った開発にLaradockを使うというのはどうだろう - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/niisan-tokyo/items/d4485b8bb4fbfcfcc6be">qiita.com</a></cite></p><br />
<p>とりあえず<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>からプロジェクトをクローン<br />
そして、プロジェクトのルート<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リに移動！</p><p>laradockという<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リがある<br />
laradockに移動して、workspaceのコンテナを作成＆起動を行う</p>
<pre class="code" data-lang="" data-unlink>$ cd laradock
$ docker-compose up -d apache2 postgres</pre><p><br />
エラーｷﾀ━━━(ﾟ∀ﾟ).━━━!!!</p>
<pre class="code" data-lang="" data-unlink>ERROR:
        Can&#39;t find a suitable configuration file in this directory or any
        parent. Are you in the right directory?

        Supported filenames: docker-compose.yml, docker-compose.yaml</pre><p>laradockの中身を見てみたら空だった<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>の方を見ても空</p><p>ようわからんから、自分でlaradockを<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>から落としてこよう</p>
<pre class="code" data-lang="" data-unlink>$ git clone https://github.com/Laradock/laradock.git</pre><p><br />
もう一回実行だ！<br />
わーお。警告だらけ。エラーは１つだけだった</p>
<pre class="code" data-lang="" data-unlink>ERROR: The Compose file &#39;./docker-compose.yml&#39; is invalid because:</pre><p><br />
軽く調べたら、.envファイルを作成すればいいらしい<br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2Fkiida510%2Fitems%2Fcc31453f8034ceb73487" title="Dockerで超簡単にlaravel環境を構築する方法 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/kiida510/items/cc31453f8034ceb73487">qiita.com</a></cite></p><br />
<p>さっきのコマンドを打ったら、ビルドされ始めました！<br />
(今ちょうど前の席のパートナーさんが同じ質問を社員さんにしている笑)<br />
(パートナーさん：Gitから落として、コマンド打ったらymlがないってエラー出たんすけど！)</p><br />
<p>ビルドが終わった<br />
Apache2だけエラーになってる。。。</p>
<pre class="code" data-lang="" data-unlink>$ docker ps</pre><p>Apache2が起動していないね。。。</p><br />
<p>とりあえず先に進む<br />
そして、あとで詰まったら戻ってくる(絶対につまるけどね)</p><br />
<p>workspaceのdocker内でcomposerをinstallするらしい</p>
<pre class="code" data-lang="" data-unlink>$ docker exec -ti laradock_workspace_1 bash
root@hogehogehoge:/var/www# composer install</pre><p><br />
色々インストールされてるー(棒)</p><p>インストール完了！<br />
これでローカルホストに接続すれば、サイトが見れるらしい<br />
接続！</p><p>「このサイトにアクセスできません」</p><p>だよねー<br />
多分Apache2が入っていないのが問題(Apache2がないという問題だけだといいが。。)</p><br />
<p>とりあえずApache2のエラーを調べよう</p>
<pre class="code" data-lang="" data-unlink>Creating laradock_apache2_1 ...
Creating laradock_apache2_1 ... error


ERROR: for laradock_apache2_1  Cannot start service apache2: driver failed programming external connectivity on endpoint laradock_apache2_1 (c824ad2dbb1568399aca31dedf9bfa572e679c98470c7bea3ba45ecc19c34cfa): Error starting userland proxy: Bind for 0.0.0.0:80: unexpected error (Failure EADDRINUSE)

ERROR: for apache2  Cannot start service apache2: driver failed programming external connectivity on endpoint laradock_apache2_1 (c824ad2dbb1568399aca31dedf9bfa572e679c98470c7bea3ba45ecc19c34cfa): Error starting userland proxy: Bind for 0.0.0.0:80: unexpected error (Failure EADDRINUSE)
ERROR: Encountered errors while bringing up the project.</pre><p><br />
軽く調べた感じ、80ポートはもう使ってるからエラーが起きたみたい<br />
でも、このDockerの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のポート番号を指定する方法がわからん<br />
もう少し調べてみよう</p><br />
<p>会社の手順書には<a href="http://localhost:8001/public">http://localhost:8001/public</a>にアクセスできればOKって書いてる<br />
ビルドした時に8001に<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>がなるようになってるっぽいから、やっぱりymlとかに書いてあるのだろうか<br />
パートナーさんがさっき質問してたから、ymlが<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>に上がっていない問題の場合なら、社員さんが解決してくれるだろう</p><p>僕は自分で入れるlaradockを自分で入れるパターンだと信じて、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のポート番号を指定する方法を調べていこう</p><br />
<br />
<p>やっぱ、色々調べたけど、<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>のlaradock<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リが空なのが原因だと思う。。。<br />
社員さんに聞いてみたけど、まだ解決していないみたい<br />
とりあえずcomposer updateしといてと言われた<br />
(心が折れたのを感じた)</p><br />
<p>１時間の休憩中にSlackで他の人のチャンネルの内容を読んでいたら、<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>に載っているREADME.mdの手順書は間違いで、正しい内容をSlackに載せてあった<br />
(laradock<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リの中身が空になっていのはミスみたい)<br />
このチャンネルは誰でも見れるようになっているが、チャンネル名はユーザの名前(<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a>の場合、チャンネル名はchannel_takagi_<a class="keyword" href="http://d.hatena.ne.jp/keyword/toru">toru</a>)で、その人に質問したい内容などを書く場所<br />
それは気づかないっすよ。。。<br />
社員さんには、<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>のREADME.mdを読んでやってと言われたので、社員さんの中でも情報共有がうまくされていなかったみたい</p><br />
<p>新しい手順書通りやるが、やっぱりlaradockを<a class="keyword" href="http://d.hatena.ne.jp/keyword/GitHub">GitHub</a>から持ってくるみたいなので<br />
さっきのApache2のエラーが復活<br />
結局この戦いになるのか。。。</p><p>このエラーはやっぱりポートが埋まっている問題だった(当たり前だろ！)<br />
解決方法は、上記の方でコピーして作成した.envファイルをいじる<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/APACHE">APACHE</a>_HOST_HTTP_PORT<br />
ってのがあるから、それをApache2で使いたいポート番号に指定してあげれば大丈夫<br />
これでdocker-composer up -d apache2が通る<br />
(ずっとdocker-compose.ymlのポート番号をいじってた)</p>
<pre class="code" data-lang="" data-unlink>Creating laradock_apache2_1 ...
Creating laradock_apache2_1 ... error</pre><p><br />
今度こそうまくいってくれ！<br />
workspaceにログインして、composer install</p>
<pre class="code" data-lang="" data-unlink>Do not run Composer as root/super user! See https://getcomposer.org/root for details
Composer could not find a composer.json file in /var/www
To initialize a project, please create a composer.json file as described in the https://getcomposer.org/ &#34;Getting Started&#34; section</pre><p>なんでやねーん！<br />
Apache2入れる前はできてたじゃないですか</p><br />
<p>なんかよくわからないけど、できた<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a>:8001にアクセスして見ると。。。</p><p>「このサイトにアクセスできません」</p><br />
<p>なんでやねーん！<br />
色々調べた結果、docker-compose.ymlで<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のポートを変な風に書き換えてたのが問題<br />
.envで書き換えた8001:8001　になっていた。<br />
.envで書き換えた8001:80 に書き換えることで治りました</p><br />
<p>これで完璧だ<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/localhost">localhost</a>:8001にアクセス</p><p>「Whoops, looks like something went wrong.」</p><br />
<p><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2FYU81%2Fitems%2Fd1b2100aae53d2088a2c" title="Hello Laravel 5! しようとしたら一瞬つまづいた時の対応 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/YU81/items/d1b2100aae53d2088a2c">qiita.com</a></cite></p><br />
<br />
<p>よーし環境構築完了</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: HEIFという画像フォーマットが今後主流になるらしい！？
BASENAME: 2017/06/25/203356
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 06/25/2017 20:33:56
CATEGORY: 気になる話題
-----
BODY:
<p>今回も<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>を見ていたら、HEIFがすごいぞ！ってつぶやきがあったので、調べてみた</p><br />
<br />
<p><span style="font-size: 150%"><b>HEIFとは？</b></span><br />
High Efficiency Image File Formatの略<br />
(エイチ・イー・アイ・エフ、ヒーフって呼ぶらしい)</p><br />
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MPEG">MPEG</a>によって開発された画像フォーマットの標準規格<dl>
  <dt><a class="keyword" href="http://d.hatena.ne.jp/keyword/MPEG">MPEG</a></dt>
  <dd>
    Moving Picture Experts Groupの略<br>
    ビデオとオーディオに対して符号を付与する基準の開発責任を負ったISO/IECのワーキンググループ
  </dd>
</dl></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/JPEG">JPEG</a>に変わるかもしれないものらしい</p><br />
<p><span style="font-size: 150%"><b><a class="keyword" href="http://d.hatena.ne.jp/keyword/JPEG">JPEG</a>と比較しての利点</b></span><br />
</p>

<ul>
<li>PEGのおよそ半分のサイズ</li>
<li>解像度が高い</li>
<li>画像の色は最大１６ビットカラー(<a class="keyword" href="http://d.hatena.ne.jp/keyword/JPEG">JPEG</a>は８ビットカラー)</li>
<li>一連の画像にすることができる(GIFの代わりになる可能性も)</li>
<li>透明度サポート</li>
<li>いつでも編集を元に戻すことができる(画像を変更したり再保存することはない)</li>
</ul><p></p><p><span style="font-size: 150%"><b>なぜ話題になった？</b></span><br />
WWDC2017(<a class="keyword" href="http://d.hatena.ne.jp/keyword/Worldwide%20Developers%20Conference">Worldwide Developers Conference</a>)のiOS11から画像の保存を<a class="keyword" href="http://d.hatena.ne.jp/keyword/JPEG">JPEG</a>からHEIFにする！<br />
って言ったことで話題になったみたい</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apple">Apple</a>の最新のiDevicesにはHVEC、つまりHEIFのためのハードウェアサポートが組み込まれている<br />
だからシステムやバッテリーに負荷をかけずに画像を超高速で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A8%A5%F3%A5%B3%A1%BC%A5%C9">エンコード</a>してデコードできる</p><br />
<br />
<br />
<p><span style="font-size: 150%"><b>参考資料</b></span></p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.cultofmac.com%2F487808%2Fheif-vs-jpeg-image-files%2F" title="HEIF: Everything you need to know about the JPEG-killing image format" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.cultofmac.com/487808/heif-vs-jpeg-image-files/">www.cultofmac.com</a></cite></p><br />
<p><a href="http://photolog.aiko15.com/10141/">&#x300C;HEIF&#x300D;&#x3063;&#x3066;&#x306A;&#x306B;&#xFF1F;&#x9AD8;&#x753B;&#x8CEA;&#x3067;&#x8EFD;&#x91CF;&#x5316;&#xFF01;iOS11&#x304B;&#x3089;&#x5909;&#x308F;&#x308B;iPhone&#x5199;&#x771F;&#x306E;&#x4FDD;&#x5B58;&#x5F62;&#x5F0F;&#x3092;&#x8ABF;&#x3079;&#x3066;&#x307F;&#x305F; | &#x3055;&#x304F;&#x3063;&#x3068;&#x3075;&#x3049;&#x3068;&#x3089;&#x3044;&#x3075;</a><iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fphotolog.aiko15.com%2F10141%2F" title="「HEIF」ってなに？高画質で軽量化！iOS11から変わるiPhone写真の保存形式を調べてみた - さくっとふぉとらいふ" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://photolog.aiko15.com/10141/">photolog.aiko15.com</a></cite></p><br />
<p><a href="https://ja.wikipedia.org/wiki/Moving_Picture_Experts_Group">Moving Picture Experts Group - Wikipedia</a></p>

-----
COMMENT:
AUTHOR: kurowasi2525
IP: 49.98.147.20
DATE: 01/22/2018 09:43:31
コメントありがとうございます。
画像系を専門でやっているわけではないので、正しいことが知りたい場合は他の人に聞いてもらえるとありがたいです。
本当に申し訳ありません。

ここからは、エンジニアの卵としての意見です。
HEIC 変換さんがその画像をどのように利用するかによって変わるのではないかと思っています。
webなどで利用し、表示の速さを優先するならjpg
高画質な画像として後で再利用したいなどであればpngだと思います。

-----
COMMENT:
AUTHOR: HEIC　変換
EMAIL: bisyoujyohennshinn@yahoo.co.jp
URL: https://www.fonepaw.jp/heic-converter/
IP: 47.52.138.5
DATE: 01/21/2018 23:18:33
HEICの変換をしたいのですが、jpgとpng、どちらのほうがいいですか
-----
--------
AUTHOR: kurowasi2525
TITLE: floatもflexも古い？Grid Layout Moduleの時代が来るらしい
BASENAME: 2017/06/14/031853
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 06/14/2017 03:18:53
CATEGORY: CSS
CATEGORY: 気になる話題
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614014028.png
-----
BODY:
<p><span style="font-size: 150%"><b>はじめに</b></span><br />
大学３年生の時に、小学校の同窓会に行ったらWeb系の会社をやっている人間がいて、<br />
数件の案件を手伝わせていただいたときがあった</p><p>その時にレイアウトの指導をしてもらった際、<br />
自分はfloatを使っていた</p><p><b>『やっぱりfloat使うよね。<span style="font-size: 130%">時代は<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>なんだよ。</span>float使っているのはださいよ』</b><br />
と言われ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>を教えていただき自分は<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>の魅力にやられ信者になった</p><br />
<p>それからサイトを見て<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>で書かれたコードを笑い、<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>を崇める日々が続いた<br />
(おしゃれなサイトは大体<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>を使ってる)</p><br />
<p>そんな僕が<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>を見ていると、<span style="font-size: 130%">『<a class="keyword" href="http://d.hatena.ne.jp/keyword/flex">flex</a>は古い。時代はGrid Layoutだ』</span>みたいな記事を見たので<br />
1時間ほど調べた情報を書いていこうと思う</p><br />
<p><span style="font-size: 150%"><b>利点</b></span><br />
・聖杯レイアウト問題というのを解決できるらしい<br />
(Web業界にいたことはないので、初めて聞いた)</p><p><div style="margin-left: 30px"><br />
<b>聖杯レイアウト問題とは</b><br />
List ApartにMatthew Levine氏がIn Search of the Holy Grailというコラムを発表したらしい<br />
彼が発表したのは<br />
ヘッダ、フッタ、メインコンテンツ、両側のサイドバーの４つのセクションで構成された３カラムレイアウト</p>

<ul>
<li>中央のコンテンツは可変、両側のサイドバーは固定の幅</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A1%BC%A5%AF%A5%A2%A5%C3%A5%D7">マークアップ</a>ではコンテンツは、2つのサイドバーより上に記述される</li>
<li>コンテンツとサイドバーはそれぞれの内容にかかわらず、同じ高さ</li>
<li>最小限の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A1%BC%A5%AF%A5%A2%A5%C3%A5%D7">マークアップ</a>しか必要にならないこと</li>
<li>コンテンツの量が少なかったとしても、フッターはページの下部に固定されること</li>
</ul><p>下記の画像がわかりやすい？<br />
<span style="font-size: 130%"><a href="http://coliss.com/wp-content/uploads-201602/2016040912-02.gif">http://coliss.com/wp-content/uploads-201602/2016040912-02.gif</a><span></p><p></div></p><br />
<br />
<p>・アイテム間の余白調整が手軽<br />
・簡潔に書ける</p><br />
<p><span style="font-size: 150%"><b>対応ブラウザ</b></span></p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Chrome">Chrome</a> 57 (2017年3月)</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a> 52 (2017年3月)</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Safari">Safari</a> 10.1  (2017年3月)</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/iOS">iOS</a> <a class="keyword" href="http://d.hatena.ne.jp/keyword/Safari">Safari</a> 10.3 (2017年3月)</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/Internet%20Explorer%2010">Internet Explorer 10</a> (2017年3月)</li>
<li>Edge 12 (2017年3月)</li>
</ul><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614014028.png" alt="f:id:kurowasi2525:20170614014028p:plain" title="f:id:kurowasi2525:20170614014028p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p>2011年頃？に生まれ技術らしい<br />
だが、最近にモダンなブラウザが一気に採用し、<br />
使っても大丈夫な感じになった<br />
(これから流行っていくのかな？)</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<br />
<p><span style="font-size: 150%"><b>用語</b></span></p><p><dl>
  <dt style="font-size: 130%">グリッドトラック</dt>
  <dd>列・行のこと<br><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614015330.png" alt="f:id:kurowasi2525:20170614015330p:plain" title="f:id:kurowasi2525:20170614015330p:plain" class="hatena-fotolife" itemprop="image"></span></dd>
  <dt style="font-size: 130%">グリッドライン</dt>
  <dd>列・行を分割した線<br><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614015653.png" alt="f:id:kurowasi2525:20170614015653p:plain" title="f:id:kurowasi2525:20170614015653p:plain" class="hatena-fotolife" itemprop="image"></span></dd>
  <dt style="font-size: 130%">グリッドアイテム</dt>
  <dd>グリッドコンテナ直下の子要素<br><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614015926.png" alt="f:id:kurowasi2525:20170614015926p:plain" title="f:id:kurowasi2525:20170614015926p:plain" class="hatena-fotolife" itemprop="image"></span></dd>
</dl></p><br />
<p><span style="font-size: 150%"><b>STEP1 <a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A1%BC%A5%AF%A5%A2%A5%C3%A5%D7">マークアップ</a></b></span></p><p>index.html</p>
<pre class="code lang-html" data-lang="html" data-unlink><span class="synIdentifier">&lt;</span><span class="synStatement">head</span><span class="synIdentifier">&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;</span><span class="synStatement">link</span><span class="synIdentifier"> </span><span class="synType">rel</span><span class="synIdentifier">=</span><span class="synConstant">&quot;stylesheet&quot;</span><span class="synIdentifier"> </span><span class="synType">href</span><span class="synIdentifier">=</span><span class="synConstant">&quot;reset.css&quot;</span><span class="synIdentifier">&gt;</span>
<span class="synPreProc">  </span><span class="synIdentifier">&lt;</span><span class="synStatement">link</span><span class="synIdentifier"> </span><span class="synType">rel</span><span class="synIdentifier">=</span><span class="synConstant">&quot;stylesheet&quot;</span><span class="synIdentifier"> </span><span class="synType">href</span><span class="synIdentifier">=</span><span class="synConstant">&quot;style.css&quot;</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">head</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;container&quot;</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;header&quot;</span><span class="synIdentifier">&gt;</span>header<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;main&quot;</span><span class="synIdentifier">&gt;</span>main<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;aside&quot;</span><span class="synIdentifier">&gt;</span>aside<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;nav&quot;</span><span class="synIdentifier">&gt;</span>nav<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
    <span class="synIdentifier">&lt;</span><span class="synStatement">div</span><span class="synIdentifier"> </span><span class="synType">class</span><span class="synIdentifier">=</span><span class="synConstant">&quot;footer&quot;</span><span class="synIdentifier">&gt;</span>footer<span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
  <span class="synIdentifier">&lt;/</span><span class="synStatement">div</span><span class="synIdentifier">&gt;</span>
<span class="synIdentifier">&lt;/</span><span class="synStatement">body</span><span class="synIdentifier">&gt;</span>
</pre><p>reset.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a></p>
<pre class="code lang-css" data-lang="css" data-unlink><span class="synComment">/****************************************************************</span>
<span class="synComment">                        共通部分</span>
<span class="synComment">****************************************************************/</span>
<span class="synComment">/*reset*/</span>
<span class="synStatement">body</span><span class="synSpecial">,</span> <span class="synStatement">div</span><span class="synSpecial">,</span> <span class="synStatement">dl</span><span class="synSpecial">,</span> <span class="synStatement">dt</span><span class="synSpecial">,</span> <span class="synStatement">dd</span><span class="synSpecial">,</span> <span class="synStatement">ul</span><span class="synSpecial">,</span> <span class="synStatement">ol</span><span class="synSpecial">,</span> <span class="synStatement">li</span><span class="synSpecial">,</span> <span class="synStatement">h1</span><span class="synSpecial">,</span> <span class="synStatement">h2</span><span class="synSpecial">,</span> <span class="synStatement">h3</span><span class="synSpecial">,</span> <span class="synStatement">h4</span><span class="synSpecial">,</span> <span class="synStatement">h5</span><span class="synSpecial">,</span> <span class="synStatement">h6</span><span class="synSpecial">,</span> <span class="synStatement">pre</span><span class="synSpecial">,</span> <span class="synStatement">form</span><span class="synSpecial">,</span> 
<span class="synStatement">fieldset</span><span class="synSpecial">,</span> <span class="synStatement">input</span><span class="synSpecial">,</span> <span class="synStatement">textarea</span><span class="synSpecial">,</span> <span class="synStatement">p</span><span class="synSpecial">,</span> <span class="synStatement">blockquote</span><span class="synSpecial">,</span> <span class="synStatement">th</span><span class="synSpecial">,</span> <span class="synStatement">td</span><span class="synIdentifier">{</span>
    <span class="synType">margin</span>: <span class="synConstant">0</span>;
    <span class="synType">padding</span>: <span class="synConstant">0</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">html</span><span class="synIdentifier">{</span>
<span class="synIdentifier">}</span>
<span class="synStatement">h1</span><span class="synSpecial">,</span> <span class="synStatement">h2</span><span class="synSpecial">,</span> <span class="synStatement">h3</span><span class="synSpecial">,</span> <span class="synStatement">h4</span><span class="synSpecial">,</span> <span class="synStatement">h5</span><span class="synSpecial">,</span> <span class="synStatement">h6</span><span class="synIdentifier">{</span>
    <span class="synType">font-size</span>: <span class="synConstant">100%</span>;
    <span class="synType">font-weight</span>: <span class="synConstant">normal</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">ol</span><span class="synSpecial">,</span> <span class="synStatement">ul</span><span class="synIdentifier">{</span>
    <span class="synType">list-style</span>:<span class="synConstant">none</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">fieldset</span><span class="synSpecial">,</span> <span class="synStatement">img</span><span class="synIdentifier">{</span>
    <span class="synType">border</span>:<span class="synConstant">0</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">table</span><span class="synIdentifier">{</span>
    <span class="synType">border-collapse</span>: <span class="synConstant">collapse</span>;
    <span class="synType">border-spacing</span>:<span class="synConstant">0</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">caption</span><span class="synSpecial">,</span> <span class="synStatement">th</span><span class="synIdentifier">{</span>
    <span class="synType">text-align</span>: <span class="synConstant">left</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">address</span><span class="synSpecial">,</span> <span class="synStatement">caption</span><span class="synSpecial">,</span> <span class="synStatement">cite</span><span class="synSpecial">,</span> <span class="synStatement">code</span><span class="synSpecial">,</span> <span class="synStatement">dfn</span><span class="synSpecial">,</span> <span class="synStatement">em</span><span class="synSpecial">,</span> <span class="synStatement">strong</span><span class="synSpecial">,</span> <span class="synStatement">th</span><span class="synSpecial">,</span> <span class="synStatement">var</span><span class="synIdentifier">{</span>
    <span class="synType">font-style</span>: <span class="synConstant">normal</span>;
    <span class="synType">font-weight</span>: <span class="synConstant">normal</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">img</span> <span class="synIdentifier">{</span>
   <span class="synType">vertical-align</span>: <span class="synConstant">bottom</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">html</span> <span class="synIdentifier">{</span>
    <span class="synType">font-size</span>: <span class="synConstant">10px</span>;
    <span class="synType">font-size</span>: <span class="synConstant">62.5%</span>;
<span class="synIdentifier">}</span>
<span class="synStatement">a</span> <span class="synIdentifier">{</span>
    <span class="synType">color</span>: <span class="synConstant">#000</span>;
    <span class="synType">text-decoration</span>: <span class="synConstant">none</span>;
<span class="synIdentifier">}</span>

<span class="synComment">/****************************************************************</span>
<span class="synComment">                        今回だけ</span>
<span class="synComment">****************************************************************/</span>
<span class="synIdentifier">.container</span> <span class="synIdentifier">{</span>
    <span class="synType">background-color</span>: <span class="synConstant">#FF0000</span>;
    <span class="synType">font-size</span>: <span class="synConstant">20px</span>;
    <span class="synType">height</span>: <span class="synConstant">100</span>vh;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.header</span> <span class="synIdentifier">{</span>
    <span class="synType">background-color</span>: <span class="synConstant">#0000FF</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.main</span> <span class="synIdentifier">{</span>
    <span class="synType">background-color</span>: <span class="synConstant">#FFFF00</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.aside</span> <span class="synIdentifier">{</span>
    <span class="synType">background-color</span>: <span class="synConstant">#FF00FF</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.nav</span> <span class="synIdentifier">{</span>
    <span class="synType">background-color</span>: <span class="synConstant">#00FFFF</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.footer</span> <span class="synIdentifier">{</span>
    <span class="synType">background-color</span>: <span class="synConstant">#008000</span>;
<span class="synIdentifier">}</span>
</pre><p><br />
style.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a></p>
<pre class="code lang-css" data-lang="css" data-unlink><span class="synIdentifier">.container</span> <span class="synIdentifier">{</span>
    <span class="synType">display</span>: grid;
<span class="synIdentifier">}</span>
</pre><p><span style="font-size: 130%">diplay: grid;</span>を指定することで、<br />
コンテナである</p>
<pre class="code" data-lang="" data-unlink>&lt;div class=&#34;container&#34;&gt;&lt;/div&gt;</pre><p>の大きさに合わせて<br />
グリッドアイテムの大きさが均等になったと思います</p><br />
<p><span style="font-size: 110%">指定なし</span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614021518.png" alt="f:id:kurowasi2525:20170614021518p:plain" title="f:id:kurowasi2525:20170614021518p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p><span style="font-size: 110%">grid指定</span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614021541.png" alt="f:id:kurowasi2525:20170614021541p:plain" title="f:id:kurowasi2525:20170614021541p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<br />
<p><span style="font-size: 150%"><b>STEP2 コンテナを設定しよう</b></span></p><p>style.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a></p>
<pre class="code lang-css" data-lang="css" data-unlink><span class="synIdentifier">.container</span> <span class="synIdentifier">{</span>
    <span class="synType">display</span>: grid;
    <span class="synComment">/*以下の行を追加*/</span>
    <span class="synType">grid</span>-template-<span class="synType">columns</span>: <span class="synConstant">100px</span> <span class="synConstant">1</span>fr <span class="synConstant">200px</span>;
    <span class="synType">grid</span>-template-rows: <span class="synConstant">600px</span> <span class="synConstant">1</span>fr <span class="synConstant">300px</span>;
<span class="synIdentifier">}</span>
</pre><p>2行を追加したことにより、<br />
columは3行になったと思います</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614022035.png" alt="f:id:kurowasi2525:20170614022035p:plain" title="f:id:kurowasi2525:20170614022035p:plain" class="hatena-fotolife" itemprop="image"></span></p><p><dl>
  <dt>grid-template-columns: 100px 1fr 200px;</dt>
  <dd>columnの長さを設定している</dd>
  <dt>grid-template-rows: 600px 1fr 300px</dt>
  <dd>rowsの長さをしている</dd>
</dl><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614023118.png" alt="f:id:kurowasi2525:20170614023118p:plain" title="f:id:kurowasi2525:20170614023118p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p><dl>
  <dt>1frとは？</dt>
  <dd>コンテナからpxや%を引いた値<br>上記の例でウィンドウのwidthが980pxの場合、<br>1fr = 980px - (100px + 200px) = 680pxとなる</dd>
<dl>


<span style="font-size: 150%"><b>STEP3 グリッドアイテムの大きさを設定しよう！</b></span>

<br>
style.<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a>

</p>
<pre class="code lang-css" data-lang="css" data-unlink><span class="synIdentifier">.header</span> <span class="synIdentifier">{</span>
    <span class="synType">grid</span>-column-start: <span class="synConstant">1</span>;
    <span class="synType">grid</span>-column-end: <span class="synConstant">4</span>;

    <span class="synType">grid</span>-row-start: <span class="synConstant">1</span>;
    <span class="synType">grid</span>-row-end: <span class="synConstant">auto</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.main</span> <span class="synIdentifier">{</span>
    <span class="synType">grid</span>-column-start: <span class="synConstant">2</span>;
    <span class="synType">grid</span>-column-start: <span class="synConstant">auto</span>;

    <span class="synType">grid</span>-row-start: <span class="synConstant">2</span>;
    <span class="synType">grid</span>-row-end: <span class="synConstant">auto</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.aside</span> <span class="synIdentifier">{</span>
    <span class="synType">grid</span>-column-start: <span class="synConstant">1</span>;
    <span class="synType">grid</span>-column-end: <span class="synConstant">auto</span>;

    <span class="synType">grid</span>-row-start: <span class="synConstant">2</span>;
    <span class="synType">grid</span>-row-end: <span class="synConstant">auto</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.nav</span> <span class="synIdentifier">{</span>
    <span class="synType">grid</span>-column-start: <span class="synConstant">3</span>;
    <span class="synType">grid</span>-column-end: <span class="synConstant">auto</span>;

    <span class="synType">grid</span>-row-start: <span class="synConstant">2</span>;
    <span class="synType">grid</span>-row-end: <span class="synConstant">auto</span>;
<span class="synIdentifier">}</span>

<span class="synIdentifier">.footer</span> <span class="synIdentifier">{</span>
    <span class="synType">grid</span>-column: <span class="synConstant">1</span> / <span class="synConstant">4</span>;

    <span class="synType">grid</span>-row: <span class="synConstant">3</span>;
<span class="synIdentifier">}</span>
</pre><p><br />
headerだけ見てみると</p><p><dl>
  <dt>grid-column-start: 1;</dt>
  <dd>カラム方向のグリッド始まりを1本目に指定している<br>(横の大きさの最初を指定)</dd>
  <dt>grid-column-end: 4</dt>
  <dd>カラム方向のグリッド終わりを4本目に指定している<br>(横の大きさの終わりを指定)<br><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614031153.png" alt="f:id:kurowasi2525:20170614031153p:plain" title="f:id:kurowasi2525:20170614031153p:plain" class="hatena-fotolife" itemprop="image"></span></dd>
  <dt>grid-row-start: 1;</dt>
  <dd>ロウ方向のグリッド始まりを1本目に指定している<br>(縦の大きさの最初を指定)</dd>
  <dt>grid-row-end: auto;</dt>
  <dd>ロウ方向のグリッド終わりを2本目に指定している<br>(縦の大きさの最後を指定)<br><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614031156.png" alt="f:id:kurowasi2525:20170614031156p:plain" title="f:id:kurowasi2525:20170614031156p:plain" class="hatena-fotolife" itemprop="image"></span></dd>
</dl></p><br />
<p>autoを指定することで、startで指定したグリッドラインの次のグリッドラインを指定することができる</p><p>省略した書き方も可能<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614025350.png" alt="f:id:kurowasi2525:20170614025350p:plain" title="f:id:kurowasi2525:20170614025350p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>ブラウザで表示したらこんな感じになると思います<br />
(わかりやすさ重視で適当に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D4%A5%AF%A5%BB%A5%EB">ピクセル</a>指定したら、めちゃくちゃださい感じになってしまった笑)</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170614/20170614025525.png" alt="f:id:kurowasi2525:20170614025525p:plain" title="f:id:kurowasi2525:20170614025525p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p><span style="font-size: 150%"><b>最後に</b></span><br />
Grid Layoutはすごくわかりやすく、使いやすかったです<br />
grid-column-gapなどでグリッドアイテム通しの幅を指定できたりもします<br />
(アイテム間の距離を指定って結構面倒なんだよね)</p><p>他にも色々プロパティはあるので興味があったら調べてみてください</p><br />
<p>Grid Layout...本当にサンプルをコピーしただけでしたが、僕は<span style="font-size: 130%">結構気に入りました</span><br />
知っていて損ではない技術だと思います</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: laravelで「次回から自動でログイン」ってどうやるん？CookieとSessionの違いって？
BASENAME: 2017/05/30/223726
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 05/30/2017 22:37:26
CATEGORY: Laravel
CATEGORY: バイト日記
-----
BODY:
<p><span style="font-size: 150%">序章</span></p><p>今日のバイトは<br />
「次回から自動でログイン」を実装してくれ<br />
という内容だった</p><br />
<p>laravelには<b>Auth::attempt()</b>というものがあるらしい<br />
第一引数に<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CF%A2%C1%DB%C7%DB%CE%F3">連想配列</a>でメールアドレスやパスワードを渡すことで認証をしてくれるらしい<br />
そして、第二引数はtrue, falseの論理値を取る<br />
trueを与えることでログイン維持(Remember me)機能を有効にすることができ、ユーザが自分でログアウトしない限り認証が持続するらしい</p><br />
<p><span style="font-size:120%">らしい...</span><span style="font-size:90%">らしい...</span><span style="font-size:60%">らしい...</span></p><br />
<p>そうです。<br />
今回のシステムではこのメソッドは使われていませんでした。<br />
僕はlaravelを勉強したわけでもなければ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE%A1%BC">プログラマー</a>歴が長いわけではないので、<br />
意図はわかりませんでした。<br />
多分、環境の問題(laravelのバージョン・<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>などが古い)とかセキュリティ上の問題などがあったんだと思います。</p><br />
<br />
<br />
<p><span style="font-size: 150%">今回のシステム</span><br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/PostgreSQL">PostgreSQL</a>にはハッシュ化されたパスワードが入っている<br />
↓<br />
ログイン画面からメールアドレスとパスワードが送られてくる<br />
↓<br />
メールアドレスの情報からユーザの情報を引っ張ってくる<br />
↓<br />
引っ張ってきた情報のハッシュ化されたパスワードとログイン画面から送られてきた文字列のパスワードを<br />
Hash::check()で比較する<br />
↓<br />
DBから引っ張ってきた情報からパスワード情報を破棄してSessionにいれる</p><br />
<p><span style="font-size: 150%">考えたこと</span><br />
Sessionの長さを変えられんか？<br />
　→session.<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>内のlifetimeの値で変わる<br />
　→VerifyCsrfToken@addCookieToResponseで登録してるみたい<br />
　→でも僕がやりたことはこいつじゃ無理そう</p><p>　※Sessionの有効期限は<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>.ini <a class="keyword" href="http://d.hatena.ne.jp/keyword/gc">gc</a>_maxlifetimeで管理されているみたい</p><br />
<p>どうにかしてRemember me機能を使う<br />
　→無理でした</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/cookie">cookie</a>に情報を残す<br />
　→先輩エンジニアさんもこれでいいのではとおっしゃってた</p><br />
<p>今回は<a class="keyword" href="http://d.hatena.ne.jp/keyword/cookie">cookie</a>にid情報だけ残すことにしました</p><p>別の先輩エンジニアさんが、<a class="keyword" href="http://d.hatena.ne.jp/keyword/cookie">cookie</a>にid情報以外に、<br />
他の偽情報を入れることでどの情報が正しい情報かわからなくする方法がある<br />
とおっしゃっていたので、適当に他の情報も作っておいた</p><br />
<br />
<p><span style="font-size:150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a>とSessionの違い</span><br />
先輩エンジニアさんがいろいろ話しているときに、<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a>とSessionって何が違うんだっけと思ったので調べた<br />
(大学1年の時に調べたのに忘れてた...)</p><p><dl>
  <dt><a class="keyword" href="http://d.hatena.ne.jp/keyword/Cookie">Cookie</a></dt>
  <dd>keyとvalueをブラウザに保存</dd>
  <dt>Session</dt>
  <dd>keyをブラウザ、valueをサーバに保存</dd>
</dl></p><p><span style="font-size: 150%"><b>参考資料の一部</b></span><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.1x1.jp%2Fblog%2F2014%2F04%2Flararavel-artisan-should-know-auto-login-by-auth.html" title="Laravel ユーザなら知っておくべきAuthオートログインのこと" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.1x1.jp/blog/2014/04/lararavel-artisan-should-know-auto-login-by-auth.html">www.1x1.jp</a></cite><br />
<a href="https://readouble.com/laravel/5.1/ja/hashing.html">&#x30CF;&#x30C3;&#x30B7;&#x30E5; 5.1 Laravel</a><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fwww.kaasan.info%2Farchives%2F1602" title="PHP Session有効期限を延ばす方法" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://www.kaasan.info/archives/1602">www.kaasan.info</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Ftnamao.hatenablog.com%2Fentry%2F2015%2F07%2F08%2F164000" title="Laravel 5.1 入門記 その6（Request 編） - 日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://tnamao.hatenablog.com/entry/2015/07/08/164000">tnamao.hatenablog.com</a></cite><br />
<iframe src="https://hatenablog-parts.com/embed?url=http%3A%2F%2Fohs30359.hatenablog.com%2Fentry%2F2015%2F09%2F04%2F235027" title="セッションとクッキーの違い - エンジニアだけどブログを始めてみた" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://ohs30359.hatenablog.com/entry/2015/09/04/235027">ohs30359.hatenablog.com</a></cite></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: テスト工程の扱いによってプロジェクトが炎上する説
BASENAME: 2017/05/28/150406
STATUS: Draft
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 05/28/2017 15:04:06
-----
BODY:
<p><span style="font-size: 150%"><b>はじめに</b></span></p><p>僕は今、2社でバイトをしている<br />
バイトなのでシステムの要件などをわからない状態でテストや保守などを行うことが多い<br />
そんな僕から見ていて思ったのが、テスト工程がプロジェクトの炎上を引き起こしているのではないかという説</p><br />
<p>IT業界に長くいる方からすれば、当たり前だ！そんなわけない！って思う人がいると思います<br />
僕はPMをやったことがあるわけでもなければ、IT業界に長くいるわけでもない<br />
今回は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BE%F0%CA%F3%B2%CA">情報科</a>の学生で2社でバイトをしている人間から見たプロジェクトについて話していきたいと思う<br />
IT業界の長い人に、こんな意見・下のやつはこんなことを思っているのかという参考程度に見てもらえると嬉しい</p><br />
<br />
<p><span style="font-size:150%"><b>前提知識</b></span><br />
<span style="font-size:130%">Ａ社<span><br />
<ul>
  <li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D9%A5%F3%A5%C1%A5%E3%A1%BC%B4%EB%B6%C8">ベンチャー企業</a></li>
  <li>社員・派遣系・バイト含め30人程度</li>
  <li>受託開発が主</li>
  <li>テストは主に派遣系やバイトがやっている</li>
</ul></p><p><span style="font-size:130%">Ｂ社</span><br />
<ul>
  <li>一部上場企業</li>
  <li>社員・派遣系・バイト含め100人以上</li>
  <li>自社開発が主</li>
  <li>テスト専門の部署？が存在する(社員・派遣系・バイト)</li>
</ul></p><br />
<br />
<br />
<p><span style="font-size:150%"><b>Ａ社であったこと</b></span></p><br />
<p>あるシステムの納期が明日に迫っていた<br />
だが、テストで見つかったバグがすべて除ききれていない状態<br />
できるだけバグを取り除いてリリースしようという感じだった</p><br />
<p>自分が担当したバグの内容は<br />
Ａページで情報を登録するとＣページでその情報が表示されるはずだが、されないというバグ</p><p>まずはバグ報告書通りの手順を行うと、同じ現象が起きた</p><br />
<p>ＡページやＣページやDBを見てもおかしいところは存在しない<br />
テスト実行者が間違った解釈をしていると思い、テストケースを見てみるがバグ報告書と同じ手順だった<br />
どうしても原因がわからなく(何点か原因らしき仮説はあった)、そのシステムの責任者？の社員さんに聞きに行くことにした</p><br />
<br />
<br />
<br />
<p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">今日のバイトは精神的にきつかった<br>環境構築に3時間近くかかり(ダンプファイルになぜか必要なカラムが入っていないなどなど)、<br>明日リリースのシステムのバグを全力で4時間修正していて、原因がわからなくて、PM的な人に聞いてみたらテストケースに手順が一つ抜けていてバグではなかったという</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/861876375791124480">2017年5月9日</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: 【アスペクト指向JavaScriptフレームワーク】Cerny.jsの英語ドキュメント翻訳
BASENAME: 2017/05/25/232834
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 05/25/2017 23:28:34
CATEGORY: Cerny.js
CATEGORY: アスペクト指向
CATEGORY: JavaScript
-----
BODY:
<p>Cerny.jsを翻訳した<br />
Qiitaにあげたのだが、最近<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%AC%A5%A4%A5%C9%A5%E9%A5%A4%A5%F3">ガイドライン</a>系で問題になっていて、消されてもおかしくない内容なのでこちらでもあげることにした</p><br />
<br />
<p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2FKurowasi%2Fitems%2Fefa25f3e74b9e04fdf89" title="【アスペクト指向フレームワーク】Cerny.jsのドキュメントを翻訳した - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/Kurowasi/items/efa25f3e74b9e04fdf89">qiita.com</a></cite></p><br />
<br />
<br />
<br />
<p><span style="font-size: 200%">概要</span><br />
<span style="font-size: 150%">導入</span><br />
Cerny.jsは大規模な開発チームの<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>プロジェクトの開発を容易にすることを目的として<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>ライブラリ<br />
以下の解決を提供する目標を達成しようとする</p>

<ul>
<li>メソッド呼び出しをインターセプションする</li>
<li>関数呼び出しの引数と戻り値の型チェック</li>
<li>依存関係の管理</li>
<li>ロギング</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に対するオブジェクトの検証</li>
<li>プログラミングの規約</li>
<li>辞書</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>をテキストやHTML形式で表示</li>
<li>簡単な設定</li>
<li>良いドキュメント</li>
</ul>
-----
EXTENDED BODY:
<p></p><br />
<br />
<p><span style="font-size: 150%">ライブラリーポリシー</span><br />
Cerny.jsのプログラミングインターフェースは時間とともに一定に保たれている<br />
すべてのpublic関数は文書化されており、文書化された関数のみがpublicであり、その<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>とセマンティックスは維持されている<br />
文書化されていない関数は変更の対象かもしれません<br />
ドキュメントからインターフェースの概要を知ることができる<br />
ドキュメントは、ライブラリのバージョンに固有である<br />
以前にリリースしたドキュメントはアクセスしやすくなっている<br />
もしwww機能を使用ないくなったら、ドキュメントで廃止予定とマークされる</p><br />
<p><span style="font-size: 150%">ライセンス</span><br />
Cerny.jsは<a class="keyword" href="http://d.hatena.ne.jp/keyword/BSD%A5%E9%A5%A4%A5%BB%A5%F3%A5%B9">BSDライセンス</a>の下で配布される</p><br />
<p><span style="font-size: 150%">著者について</span><br />
Robert Cernyによって書かれている</p><p><span style="font-size: 150%"></span></p>

<ul>
<li>質の高い<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>に関する情報を提供してくれたDouglas Crockfordに感謝します。</li>
<li>Cerny.jsの開発をしている間、Ant、JsUnit、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rhino">Rhino</a>を使わせていただきました。</li>
<li>Cerny.jsに規約プログラミングを組み込むことを提案してくれて、Norman Harebottle IIIありがとう</li>
</ul><p><span style="font-size: 150%">ダウンロード</span></p><p>Cerny.jsは３つの数字のバージョンでリリースされていて、x.y.zのように３つの区切られている<br />
最初の数字のxはライブラリの大きな変更で増加し、yは<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>の拡張で増加し、バグ修正でzが増加する<br />
リリースノートは今のところ配布されているもののみ利用できる</p><br />
<p><span style="font-size: 150%">デモ</span><br />
Cerny.jsライブラリのいくつかの機能の一連のデモで実際にやってみせていて、右のメニューからアクセスできる<br />
すべてのデモはCerny.js 1.3.以下で動く<br />
すべてのデモページで、デモとCerny.jsライブラリーの出力したログを受け取るコンソールを見ることができる<br />
コンソールをクリックして、拡大することができる<br />
もう一つのコンソールをクリックすると、縮んで余白のバーに戻る<br />
ログ出力は、ライブラリに付属しているインターセプタのLogIndenterとTracerによって作成される</p><br />
<p><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>のデモ</span><br />
このページは、Cerny.jsライブラリによって提供させる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>検証のデモ<br />
それは入力文書から<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%BD%CA%B8%B2%F2%C0%CF">構文解析</a>されたオブジェクトを、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>ガイドのFamily schemaに対して検証する<br />
最初に表示された文書は有効である<br />
Validateボタンをクリックして確認できる<br />
検証レポートは空になるだろう、それはエラーメッセージはないということを含んでいる<br />
入力されている文書をいじくりまわすことで、検証の効果を見ることができる<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を勉強してFamilyの意味と、それにそむく方法を学ぶ</p><br />
<p><span style="font-size: 150%">型チェックデモ</span><br />
このページはCerny.jsの型チェック機能のデモ<br />
署名はCERNY.signatureによって指定される<br />
実行時の型チェックは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>によって実行される<br />
タイプエラーは赤色でコンソールに記録される<br />
次のコードは、DateUtils.isPastDateという単純な日付の関数の一部を定義している<br />
さらに下に、この関数呼び出しに関数を入力でき、タイプ違反の検出を観察できる</p><br />
<br />
<br />
<p><span style="font-size: 150%">ドキュメント</span><br />
これはCerny.jsライブラリのコア機能を提供するファイルである<br />
コア機能とは、インターセプション、型チェック、ロギング、依存関係の宣言、構成と辞書など<br />
Cerny.jsライブラリを使うためには、あなたのページにこのファイルを含める必要がある<br />
この設定ファイル(cerny.conf.jsのコピー)を事前に含める必要がある</p><p>いくつかの使用協定<br />
<br />
</p>

<ul>
<li>もし現在の関数かメンバが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>で上書きされた場合、メンバの新しい名前はアンダースコアに古い名前が続き構成されている。例えばinsertBeforeが_insertBefore</li>
<li>もし単純な名前が不可能な場合、キーワード制限のため名前はアンダースコアで処理される。例えば_delete</li>
<li>もし関数が任意の多くの引数を取る場合、これらのパラメータのドキュメントは「引数」と呼ばなけらればならない</li>
<li>もし関数のドキュメントで、戻り値がしていされていない場合、関数はundefinedを返す</li>
</ul><p><br />
<span style="font-size: 150%">用途</span><br />
なし</p><p><span style="font-size: 150%">利用</span><br />
すべて、ただしCERNY.console.*</p><p><span style="font-size: 150%">機能</span></p><p><b>CloningException</b></p><p>複数例外のコンストラクタ<br />
type(string): クローン化できない方<br />
return(object): 例外</p><p><b>ContractViolation</b></p><p>契約違反のコンストラクタ<br />
message(string): <a class="keyword" href="http://d.hatena.ne.jp/keyword/%BC%AB%C1%B3%B8%C0%B8%EC">自然言語</a>による違反の性質<br />
return(object): 違反</p><p><b>Dictionary</b></p><p>辞書は用語と定義の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%C3%A5%D4%A5%F3%A5%B0">マッピング</a><br />
定義は波括弧({})のついた用語である変数を含むことできる<br />
単語を辞書で検索し、lookupを用いて定義を得ることができる<br />
どんな文字列でもevaluateによって評価される<br />
辞書は辞書のパスを示すを含む文字列の配列を保持することを含まれるプロパティを含むかもしれない<br />
obj(object): 拡張されるobj<br />
return(obj): obj</p><p><b>Logger</b></p><p>ロガーを作成する<br />
いつもカテゴリーに、正確に一つのロガーが存在する<br />
name(string): カテゴリーの名前<br />
return(object): 名前によって識別されたカテゴリーのロガー</p><p><b>check</b></p><p>exprがtrueと評価されているかどうかを調べる<br />
もしCERNY.ContractViolationがスローしない場合<br />
事前条件、事後条件、不変条件でのみ使用される<br />
expr(boolean): 評価する式<br />
message(string): 契約違反に追加するメッセージ</p><br />
<p><b>clone</b></p><p>オブジェクトをクローンする<br />
いくつかの制限があるケースのほとんどで動作する<br />
<br />
<br />
</p>

<ul>
<li>カスタムタイプは、クローンメソッドを提供する。このメソッドはパラメータなしで呼ばれ、結果が返される</li>
<li>循環参照は取扱できない: 無限<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BA%C6%B5%A2">再帰</a>！</li>
<li>一部のクローンをサポートしている、もしオブジェクトツリーで何かが参照されていて、それがクローンできない場合は、コンソールにメッセージが表示され、参照プロパティはundefinedになる</li>
</ul><p> subject(any): クローンする値<br />
 return(any): 値のクローン</p><br />
<p><b>dump</b></p><p>ロギングの目的で値をダンプする<br />
変数の値を返す<br />
変数の値の後にその型を中括弧で返す<br />
変数が文字列の場合、値はシングルコードで囲まれる<br />
value(any): ダンプする値<br />
return(string): ログングに便利な文字列</p><p><b>empty</b></p><p>empty関数</p><p><b>evaluate</b></p><p>文字列を評価する<br />
文字列の中のすべての変数を、辞書の定義によって置き換える<br />
str(string): 評価する文字列<br />
context(undefined, string): 評価が行われるコンテキスト、用語;<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BA%C6%B5%A2">再帰</a>を避ける<br />
return(string): 評価された文字列</p><p><b>getResource</b></p><p>リソースの取得<br />
location(string): リソースの場所<br />
return(string): リソースの内容</p><p><b>identity</b></p><p>引数を返す<br />
arg(any): 引数<br />
return(any): 引数を返す</p><p><b>intercept</b></p><p>インターセプションのためのオブジェクトの計記法<br />
CERNY.Configuration.Interception.activeまたは渡されたインターセプタだけに依存して、同じ効果で複数回呼ぶことができる<br />
この関数は<a class="keyword" href="http://d.hatena.ne.jp/keyword/IE">IE</a>のウィンドウオブジェクトでは機能しない</p><p>既存のオブジェクトメソッドをオーバーライドした場合<br />
この関数でインターセプションが既にインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>ルされていて、この関数を再び使ってメソッドを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>すると、古いメソッドがインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>ルされ、情報がログに記録される<br />
これは残念ですが、インターセプションがいつも同じ効果を持つ必要がある<br />
回避策：CERNY.methodを使用してメソッドを追加します(どちらにも最適ですが、オー<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D0%A5%E9">バラ</a>イドするときは絶対)<br />
obj(object,function)：<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>するメソッドのオブジェクト<br />
arguments(undefined,string,<a class="keyword" href="http://d.hatena.ne.jp/keyword/RegExp">RegExp</a>,Array): 文字列かどの関数を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>するかを指定する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a>。もし指定されない場合、すべての関数が<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>される。もしくはインターセプタの配列、存在しない場合はインターセプタが使用され、複数の配列が与えられている場合、最後のものが使用される<br />
return(Array)：<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>された関数の名前の配列</p><p><b>isPresent</b></p><p>ランタイム中に式が存在するかどうかをチェックする<br />
exp(string)：チェックする式、文字列<br />
return(boolean)：文字列が何も参照しないか文字列がundefinedを参照している場合はfalse</p><p><b>joinFunctions</b></p><p>Join関数は1つの関数として機能する。新しい関数は最後の関数の戻り値を返す<br />
arguments(function)：結合する関数<br />
return(function)：新しい関数</p><p><b>load</b></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を読み込む<br />
この関数はrequreで呼ばれる<br />
さまざまな環境(ブラウザ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Rhino">Rhino</a>[RHI])で実装がことなる<br />
デフォルトのランタイム環境はブラウザ<br />
location(undefined,string)：読み込む<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>の場所</p><p><b>loadData</b></p><p>いくつかのデータを読み込み、オブジェクト、配列、関数、プリミティブ値にすることができる<br />
location(string)：データの場所<br />
return(any)：評価されたデータ</p><p><b>lookup</b></p><p>辞書から用語を検索する<br />
1.5より前：用語が見つからない場合、undefinedを返す<br />
1.5で気をつける：用語が見つからない場合、エラーを投げる<br />
term(文字列)：検索する用語<br />
return(undefined,string)：辞書内の用語の値、または用語が不明の場合はundefined</p><p><b>method</b></p><p>関数をメソッドとしてオブジェクトにattachする<br />
実際の関数の周りに自由にたくさんの関数を作成することができる<br />
関心事の分離を目指している<br />
インターセプターは最後の関数から始まる関数にラップされる<br />
依存関係に関して配列を埋めるとき「自然順序」が可能になる<br />
したがって、より基本的なインターセプタ(例えば LogIndenter)が最初にプッシュされる<br />
obj(object)：関数をattachするobj<br />
name(string)：関数がオブジェクトに知られている名前<br />
func(function)：attachする関数<br />
interceptors(undefined,Array)：使用するインターセプタ。デフォルトはCERNY.Configuration.Interception.active</p><p>namespace</p><p>CERNYに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%BE%C1%B0%B6%F5%B4%D6">名前空間</a>を作成する<br />
この関数は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Yahoo%21">Yahoo!</a> UI Library[<a class="keyword" href="http://d.hatena.ne.jp/keyword/YUI">YUI</a>]からインスピレーションを受けている<br />
name(string)：作成する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%BE%C1%B0%B6%F5%B4%D6">名前空間</a>の名前<br />
parentNameSpace(undefined,object)：親の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%CC%BE%C1%B0%B6%F5%B4%D6">名前空間</a>、デフォルトはCERNY</p><p><b>object</b></p><p>プロトタイプ継承[DCP]<br />
この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>はDouglas Crockfordによって開発された<br />
obj(object)：新しいオブジェクトのプロトタイプになるオブジェクト<br />
return(object)：新しいオブジェクト</p><p><b>post</b></p><p>関数呼び出しが成功したかどうか決めるために満たすべき条件を指定する<br />
事後条件は、CERNY.checkへの一連の呼び出しである関数<br />
thisは呼び出された関数と同じ意味を持つ<br />
事前条件は次のパラメーターが渡される：<br />
　1. 戻り値<br />
　2. 呼び出されたオブジェクトの古いバージョン、その後<br />
　3. 呼び出しの引数<br />
func(function)：事後条件が指定されるための関数<br />
post(function)：事後条件</p><p><b>pre</b></p><p>funcへの呼び出しが成功するかどうかを判断するために満たす必要がある条件を指定する<br />
これらの条件は事前条件と呼ばれる一つの関数で収集される　<br />
事前条件は、消費者への関数の意図を伝える機能の作者をサポートする<br />
事前条件はCERNY.checkへの一連の呼び出しである関数である<br />
事前条件は呼び出しの引数と呼ばれた関数と同じ意味を持つthisが渡される<br />
func(function)：事前条件が指定されるための関数<br />
pre(function)：事前条件</p><p><b>require</b></p><p>式の存在を確認する<br />
式をカタログで検索して読み込む<br />
カタログに宣言されている外部依存関係を解決する<br />
script(string)：式を必要とする<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a><br />
arguments(undefine,string)：さらに実行するために必要な式<br />
return(Array)：0以上のアイテムを持つ式が見つからない配列</p><p><b>signature</b></p><p>関数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>を指定する<br />
指定される型はどれか１つ文字列("boolean", "string", "number", "object", "function", "undefined", "null", "any")か関数、実際の値はinstanceofでテストされる<br />
将来、オブジェクトの型として指定することが可能で、プロトタイプチェーンはオブジェクトよって検査される<br />
さらに未来、Cerny<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を使用することができる<br />
func(function)：<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>を指定する関数<br />
returnType(string,function,Array)：戻り値の型<br />
arguments(undefined,string,function,Array)：パラメータの型</p><br />
<p><span style="font-size: 150%">Ant tasks</span><br />
Cerny.jsはAntタスクのいくつかの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>定義が付属する<br />
それらのほとんどはWebアプリケーションの開発をサポートする<br />
これらのタスクの一つを使うためには、それぞれのAntファイルをAnt<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リに配置する必要がある<br />
さらに、cerny.conf.jsを作り、Antが見つかる場所を教える必要がある</p>
<pre class="code" data-lang="" data-unlink>&lt;project name=&#34;ourapp&#34; default=&#34;build&#34; basedir=&#34;.&#34;&gt;
  ...
  &lt;!-- Prepare using the Cerny.js ant tasks  --&gt;
  &lt;property name=&#34;cerny.js.configuration&#34; location=&#34;conf/ant/cerny.conf.js&#34; /&gt;
  &lt;import file=&#34;vendor/tools/cerny.js/ant/merge.xml&#34; /&gt;

  &lt;target name=&#34;build&#34;&gt;

    &lt;!-- Use the merge-css task --&gt;
    &lt;merge-css src-file=&#34;css/style.css&#34; dest-file=&#34;build/docroot/css/style.css&#34; /&gt;
    ...
  &lt;/target&gt;
  ...
&lt;/project&gt;</pre><p><b>前提条件</b><br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>で使うにはAntをインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>ルし設定する必要がある<br />
bsf.jarとjs.jarのクラスパスが必要<br />
詳細についてはAnt Webページのライブラリ依存関係を読んで</p><br />
<p><b>Reference</b><br />
jsdoc<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>ライブラリの<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>ドキュメントを含む<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>ドキュメントを作成する<br />
ドキュメントは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に準拠している<br />
ライブラリのドキュ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E1%A5%F3%A5%C8%A5%B9">メントス</a>タイルはCerny.jsで使われるものに準拠している必要がある<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>ドキュメントは人間が使うことを目的としてものではなく、あとで処理するための基礎となる</p>
<pre class="code" data-lang="" data-unlink>&lt;jsdoc
    src-dir=&#34;js&#34;
    dest-dir=&#34;build/docs&#34; /&gt;</pre><p><br />
merge-catalog<br />
１つの大きなカタログを作成するために、ソースファイル内のすべてのinclude文を処理する<br />
これにより、開発時に複数のカタログを管理し、本番用のカタログを１つ作成することができる</p>
<pre class="code" data-lang="" data-unlink>&lt;merge-catalog
    src-file=&#34;js/catalog.json&#34;
    dest-file=&#34;build/docroot/js/catalog.json&#34; /&gt;</pre><p><br />
merge-<a class="keyword" href="http://d.hatena.ne.jp/keyword/css">css</a><br />
ソースファイルのすべての@import文を、インポートされたファイルの内容で置き換える<br />
相対的URLを含む<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%BF%A5%A4%A5%EB%A5%B7%A1%BC%A5%C8">スタイルシート</a>を置き換えて省略する<br />
このタスクでは複数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>ファイルを維持したまま、１つのファイルに展開することができ、HTTP要求の数が減る</p>
<pre class="code" data-lang="" data-unlink>&lt;merge-css
    src-file=&#34;css/style.css&#34;
    dest-file=&#34;build/docroot/css/style.css&#34; /&gt;</pre><p><br />
merge-js<br />
1つのページに必要なすべての機能を含む<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>ファイルを作成する　<br />
Cerny.jsによって提供された依存関係管理機能の使用方法に依存する<br />
全てのrequireされた<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>内およびカタログ内で宣言された依存情報に基づいた正しい順番で連結する</p>
<pre class="code" data-lang="" data-unlink>&lt;merge-js
    expression=&#34;OURAPP.pages.Search&#34;
    dest-file=&#34;build/docroot/js/pages.Search.js&#34;
    catalog-file=&#34;js/catalog.json&#34;
    base-dir=&#34;.&#34;/&gt;</pre><p><span style="font-size: 150%">Configuration</span><br />
このドキュメントはCerny.jsライブラリの設定の導入を提供する<br />
この設定は、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を変更なしにCerny.jsのいくつかの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%B9%A5%DA%A5%AF%A5%C8">アスペクト</a>の動作を簡単に適応させることができる<br />
このように、例えばログレベルの調整、アクティブなインターセプタを指定、依存関係を管理ができることによって、私たちはHTMLページ内に手動で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>をインポートすることを避けることができる</p><br />
<br />
<p><b>設定ファイルの作成</b><br />
このライブラリーはデフォルトの設定ファイルが備え付けてあり、自分たちの設定をテンプレートとして使うことができる<br />
それはcerny.conf.jsと呼ばれ、cerny.jsの同じ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リに存在する<br />
このファイルをアプリケーション<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C7%A5%A3%A5%EC%A5%AF%A5%C8">ディレクト</a>リにコピーし、cerny.js<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>の前にページにincludeしよう<br />
設定ファイルの前に、Cerny.jsライブラリからすべての出力を受け取るPopupWindowコンソールを準備する</p>
<pre class="code" data-lang="" data-unlink>&lt;script type=&#34;text/javascript&#34; src=&#34;vendor/cerny.js/console/console.js&#34; &gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;vendor/cerny.js/console/PopupWindow.js&#34; &gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;ourapp/cerny.conf.js&#34; &gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;vendor/cerny.js/cerny.js&#34; &gt;&lt;/script&gt;</pre><p><b>設定ファイルの構造</b><br />
この設定ファイルは３つのパーツで構成されている<br />
CERNY.Configurationオブジェクト、CERNY.configure関数、CERNY.print関数を定義する</p>
<pre class="code" data-lang="" data-unlink>CERNY.Configuration = {
    Logger: {
        &#34;indentStr&#34;: &#34;  &#34;,
        &#34;CERNY&#34;: &#34;OFF&#34;,
        &#34;CERNY.require&#34;: &#34;FATAL&#34;,
        &#34;CERNY.load&#34;: &#34;ERROR&#34;,
        &#34;NONE&#34;: &#34;TRACE&#34;
    },

    // The catalog is used to resolve dependencies, which are stated in
    // a script by the means of CERNY.require.
    Catalog: {
        &#34;cerny.js.path&#34;:&#34;{configure-manually}&#34;,
        &#34;CERNY.js.Array&#34;:&#34;{cerny.js.path}/js/Array.js&#34;,
        &#34;CERNY.js.Date&#34;:&#34;{cerny.js.path}/js/Date.js&#34;,
        &#34;CERNY.js.Number&#34;:&#34;{cerny.js.path}/js/Number.js&#34;,
        &#34;CERNY.js.String&#34;:&#34;{cerny.js.path}/js/String.js&#34;,
        &#34;CERNY.js.doc.Generator&#34;:&#34;{cerny.js.path}/js/doc/Generator.js&#34;,
        &#34;CERNY.js.doc.Schema&#34;:&#34;{cerny.js.path}/js/doc/Schema.js&#34;,
        &#34;CERNY.json.HtmlPrettyPrinter&#34;:&#34;{cerny.js.path}/json/HtmlPrettyPrinter.js&#34;,
        &#34;CERNY.json.Printer&#34;:&#34;{cerny.js.path}/json/Printer.js&#34;,
        &#34;CERNY.json.TextPrettyPrinter&#34;:&#34;{cerny.js.path}/json/TextPrettyPrinter.js&#34;,
        &#34;CERNY.schema&#34;:&#34;{cerny.js.path}/schema/schema.js&#34;,
        &#34;CERNY.text.DateFormat&#34;:&#34;{cerny.js.path}/text/DateFormat.js&#34;,
        &#34;CERNY.text.NumberFormat&#34;:&#34;{cerny.js.path}/text/NumberFormat.js&#34;,
        &#34;CERNY.util&#34;:&#34;{cerny.js.path}/util/util.js&#34;,
    },
    Interception: {
        active: []
    }
};

CERNY.configure = function() {
    var active = CERNY.Configuration.Interception.active;
    active.push(CERNY.Interceptors.LogIndenter);
    // active.push(CERNY.Interceptors.Profiler);
    active.push(CERNY.Interceptors.Tracer);
    // active.push(CERNY.Interceptors.TypeChecker);
    // active.push(CERNY.Interceptors.ContractChecker);
};

// We are printing to the PopupWindow console
CERNY.print = function(message) {

    // A generic console that works in all browsers
    CERNY.console.PopupWindow.print(message);

    // Firebug
    // console.log(message);

    // JsUnit with xbDebug
    // debug(message);

    // Rhino shell
    // print(message);
};</pre><p><b>依存管理</b><br />
Cerny.jsはカタログを使って、定義<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>の場所にマップする<br />
このカタログはcerny.conf.jsのCERNY.Configuration.Catalogに定義されている<br />
Cerny.js 2以降、カタログを複数のファイルに分けることが可能<br />
カタログファイルを使うためには、CERNY.COnfiguration.Catalogにincludeプロパティに含める必要がある</p>
<pre class="code" data-lang="" data-unlink>CERNY.Configuration = {
    ...
    Catalog: {
        &#34;include&#34;: [&#34;catalog.json&#34;]
    }
    ...
};</pre><p>カタログは整形式<a class="keyword" href="http://d.hatena.ne.jp/keyword/JSON">JSON</a>ドキュメントでなけらばならない<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/YUI">YUI</a>も利用するwebアプリケーションのカタログは次のようになる<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>{&#34;include&#34;: [&#34;{cerny.js.path}/catalog.json&#34;],
 &#34;cerny.js.path&#34;: &#34;/ourapp/vendor/cerny.js/js&#34;,

 // Declaring dependencies of the YUI library
 &#34;yui.path&#34;: &#34;/ourapp/vendor/yui/build&#34;,
 &#34;YAHOO&#34;: &#34;{yui.path}/yahoo/yahoo.js&#34;,
 &#34;YAHOO.util.Dom&#34;: &#34;YAHOO,{yui.path}/dom/dom.js&#34;,
 &#34;YAHOO.util.Event&#34;: &#34;YAHOO,{yui.path}/event/event.js&#34;,
 &#34;YAHOO.widget.Calendar&#34;: &#34;YAHOO,YAHOO.util.Event,YAHOO.util.Dom,{yui.path}/calendar/calendar.js&#34;,
  ...
}</pre><p></p><p><b>依存関係宣言</b></p><p>上記のカタログでは、Cerny.jsを使って<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B5%A1%BC%A5%C9%A5%D1%A1%BC%A5%C6%A5%A3">サードパーティ</a>製のライブラリーの依存関係を宣言することができる<br />
独自の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>では、CERNY.require関数を呼び出すことを元にして依存関係を記述する<br />
最初のパラメータは、現在の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>で定義された必要な式の名前<br />
その後、いくつかの必要な式は文字列として渡すことができる<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>CERNY.require(&#34;OURAPP.somePackage&#34;, // the requiring expression
              &#34;CERNY.js.Array&#34;,
              &#34;YAHOO.widget.Calendar&#34;);

CERNY.namespace(&#34;somePackage&#34;, OURAPP);

// Code starts here</pre><p><br />
カタログ経由で依存関係を解決されない場合、例外が投げられ、詳細な情報はCERNY.requireカテゴリに記録される<br />
これはカタログが正しく構成されていないことを示す<br />
Cerny.js 1.3からCerny.loadの実装は<a class="keyword" href="http://d.hatena.ne.jp/keyword/XMLHttpRequest">XMLHttpRequest</a>を使用して<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を取得する<br />
すべてのモダンなブラウザで動く<br />
他の実行環境にも適用できる</p><br />
<br />
<p><b>CERNY.Configurationのリファレンス</b><br />
Logger<br />
カテゴリロガーの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%C3%A5%D4%A5%F3%A5%B0">マッピング</a>をログレベルまで保持する<br />
特定のカテゴリーは一般のカテゴリーより優先される<br />
CERNYがOFFに設定されている場合、TRACEを設定することによって、CERNY.schemaのための例外を作成することができる<br />
そのエントリの順序は問わない</p><p>indentStr<br />
ライブラリの使用者はロギングのインデントで使用される文字列を指定できる<br />
この機能はLogIndenterインターセプタと連携して利用できるようになる<br />
Configurationにオプションがない場合、２つのスペースが利用される<br />
HTMLをロギングする時、identStrを"  "に設定する必要がある<br />
もう一つの方法として<a class="keyword" href="http://d.hatena.ne.jp/keyword/CSS">CSS</a>の空白を保持する機能を使用すること</p><p>ROOT<br />
このカテゴリーはすべての他のカテゴリーのトッ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%EC%A5%D9">プレベ</a>ルとして使用される<br />
configurationからのカテゴリの欠如は、OFFに設定すると解釈される</p><p>NONE<br />
この特別なカテゴリーはメンバーロガーでロガーが保持していないオブジェクトに<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>がインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>ルされている場合に使われる<br />
ログの出力が失われるのを避けるのと、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>されたオブジェクトに重要なカテゴリーを持つロガーをインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>ルするには、このカテゴリーをTRACEにすることをおすすめする<br />
Catalog<br />
CERNY.require文が現在の<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>コンテキストでまだ定義されていない式を参照する場合、カタログが参照される<br />
カタログは欠落している式の定義を保持するファイルへの参照(URL)を提供するだろう<br />
その後、このファイルを読み込もうとする試みはCERNY.loadによって行われる<br />
このメカニズムにより、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE">プログラマ</a>はページに必要な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>を手動でインポートすることから解放される(依存関係管理を参照)</p><p>Interception<br />
active<br />
アクティブなインターセプタの配列を保持する<br />
CERNY.configureは、configurationファイルを読むときにインターセプタが定義されておらず、参照できないため、関数CERNY.configureにのみ書き込むことができる</p><p><span style="font-size: 150%">Contracts</span><br />
バージョン1.4からCerny.jsは<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>による契約(design by contract)によるプログラミングをサポートする<br />
この技法は作者と消費者の間の使用契約を明示することによってオブジェクトや関数の文書化を改善するのに役立つ<br />
このガイドではCerny.jsの助けを使って<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>で<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%C0%CC%F3%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0">契約プログラミング</a>を始めることができる立場に立ってる</p><p><b>Preconditions</b></p><br />
<p>関数は、呼び出しが成功する状態を満たすかチェックする機能である事前条件を持つことが出来る<br />
事前条件はCERNY.preを使って指定される<br />
チェックには、CERNY.check関数を用いて実行する必要がある<br />
チェックの最初の引数はTrueかFalseで評価される式でないといけない<br />
二つ目の引数は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%BC%AB%C1%B3%B8%C0%B8%EC">自然言語</a>での違反を述べる性質のメッセージ<br />
このメッセージは人間のためのもの<br />
式がfalseと評価する場合、チェックは失敗したと言いCERNY.ContractViolationは投げられる<br />
実際の関数呼び出しの引数は事前条件の渡される<br />
thisキーワードを使うことも可能<br />
thisは関数が呼び出されるオブジェクトを参照する<br />
次のコードは事前条件の仕様を説明している<br />
例のために、二つの数字を割る関数を定義する<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>var NewMath = {};

(function() {

    // Shorten some names
    var check = CERNY.check;
    var pre = CERNY.pre;
    var method = CERNY.method;

    // The new division
    function divide(a,b) {
      return a / b;
    }

    // For contracts to be enforced, it is necessary
    // that a function is subject to interception. Therefore
    // CERNY.method must be used.
    method(NewMath, &#34;divide&#34;, divide);

    // The precondition for a division
    pre(divide, function(a,b) {
       check(b !== 0, &#34;b may not be 0&#34;);
    });

})();</pre><p><br />
<b>事後条件</b></p><br />
<p>事後条件はCERNY.postを使用して指定される<br />
事後条件自体は、オブジェクトのクローン、戻り値、呼び出しの引数をこの順序で受け取る<br />
クローンはメソッド呼び出しの前にオブジェクトの状態を保持し、通常oldと呼ばれる<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>(function() {

    // Defined a set with a remove method, which returns true on a
    // remove ...
    function remove(element) {
       ...
    }

    // The postcondition for a remove
    post(remove, function(old, result, element) {
       check(result === true &amp;&amp; old.length === this.length + 1,
             &#34;result may not be true when no element was removed&#34;);
       check(result === false &amp;&amp; old.length === this.length,
             &#34;result may not be false, when an element was removed&#34;);
       check(!this.contains(element),
             &#34;element is still in the set&#34;);
    });

})();</pre><p><br />
<b>Invariants</b></p><br />
<p>オブジェクトには、そのオブジェクトに対してtrueでなければならない条件を指定するinvariantと呼ばれるメソッドがある<br />
invariantは他のメソッド呼び出しの後に呼ばれ、オブジェクトの特定の状態を強調する<br />
次のカレンダーイベントを導入し、終了日が開始日より前でないことを指定する例を見てみましょう<br />
またこの例は、invariantの概念の説明に役立つだけで、他の面では多くの意味を持たないかもしれない<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>(function() {
    var check = CERNY.check;
    var method = CERNY.method;
    var signature = CERNY.signature;

    function Event(start, end) {
       this.start = start;
       this.end = end;
    }

    function setStart(start) {
       this.start = start;
    }
    signature(setStart, &#34;undefined&#34;, Date);
    method(Event.prototype, &#34;setStart&#34;, setStart);

    function setEnd(end) {
       this.end = end;
    }
    signature(setEnd, &#34;undefined&#34;, Date);
    method(Event.prototype, &#34;setEnd&#34;, setEnd);

    // This invariant guarantees a certain state in the object,
    // which then can be considered true.
    Event.prototype.invariant = function() {
       check(this.start.getTime() &lt;= this.end.getTime(),
             &#34;start must be before end&#34;);
    }
})();</pre><p><br />
<b>Enforcing contracts</b></p><br />
<p>契約を強制するにはContractChecker<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>をアクティブ化する必要がある<br />
さらなる詳細については、インターセプションガイドを参照する<br />
契約違反はFATALレベルで記録されるため、ROOTカテゴリーに応じて設定する<br />
更にブラウザのコンソールに例外として表示される<br />
契約チェックに参加する方法は、インターセプションの対象となる必要がある<br />
したがって、CERNY.methodを使ってオブジェクトにアタッチする必要がある。または、CERNY.interceptをオブジェクトに対して呼び出す必要がある<br />
契約は開発期間中のみ実施させるべき<br />
正しく動く最終製品では、時間がかかり、タスクに貢献しないためContractCheckerを有効にするべきではない<br />
一方開発レベルだけ必要なたくさんのチェックは省略されるため、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B7%C0%CC%F3%A5%D7%A5%ED%A5%B0%A5%E9%A5%DF%A5%F3%A5%B0">契約プログラミング</a>を使って開発された製品は高速に動く</p><br />
<p><b>Limitations</b></p><p>現在、invariantsをチェックする時に継承はサポートされていない<br />
CERNY.cloneの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%EB%A5%B4%A5%EA%A5%BA%A5%E0">アルゴリズム</a>はとても素朴で改善が必要なため、古いもののサポートは弱い<br />
これらはたやすくない<br />
契約を削除する<br />
生産的な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>から契約を削除するのは容易くない</p><br />
<br />
<p><span style="font-size: 150%">Interception</span></p><br />
<p>このドキュメントは、Cerny.jsによって提供されているメソッド呼び出しをインターセプションするメカニズムの概要を与える<br />
メソッド呼び出しインターセプションは、関数の実際の呼び出しの前と後に関数呼び出しを可能にする<br />
このように、実行時間を簡単にプロファイルしたり、実際の引数や戻り値を記録したりすることができる<br />
インラインログイング<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%C8%A5%E1%A5%F3%A5%C8">ステートメント</a>とは異なり、インターセプションはコードを邪魔することなく、オンデマンドでオンとオフを切り替えることができる<br />
インターセプションは型チェックでさえ可能性を広げる</p><p><b>インターセプションの設定</b></p><br />
<p>アクティブなインターセプタのリストは配列のCERNY.Configuration.Interception.activeに保持される<br />
この配列はcerny.conf.js<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>のCERNY.configure関数を使ってこの配列を埋めなければならない<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>CERNY.configure = function() {
    var interceptors = CERNY.Configuration.Interception.active;
    interceptors.push(CERNY.Interceptors.LogIndenter);
    interceptors.push(CERNY.Interceptors.Tracer);
    // interceptors.push(CERNY.Interceptors.TypeChecker);
    // interceptors.push(CERNY.Interceptors.ContractChecker);
    interceptors.push(CERNY.Interceptors.Profiler);
}</pre><p></p><p>この場合、Cerny.jsに付属している３つのインターセプタがインターセプタ配列にプッシュされる<br />
Cerny.jsに付属されているオブジェクトを使って、次の関数にラップされる<br />
Cerny.jsによって提供されているオブジェクトに付属している次の関数にラップされる。これについてはすぐに学ぶ<br />
より基本的なインターセプタ、例えばLogIndenterは最初にプッシュされ、あとのインターセプタはその恩恵を受けることができる<br />
LogIndenterの場合、ログ出力のプロファイリング文とトレース文が正しいインデントの結果になる</p><br />
<br />
<p><b>既存のコードにインターセプションをインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC">トー</a>ル</b></p><p>例を挙げるなら　既存の<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>コードがあり、パフォーマンスの問題が発生したとする<br />
免疫を与えられた後、私たち<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE%A1%BC">プログラマー</a>の一人は　認める・許す　Snailオブジェクトの可能性があること</p><p>免疫を与えられた後、私たち<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE%A1%BC">プログラマー</a>の一人は、問題を引き起こしているSnailオブジェクトの可能性があることを認める<br />
これを知って、Snailが定義された後に次の行を追加し、SnailのログレベルをTRACEに上げる</p>
<pre class="code" data-lang="" data-unlink>CERNY.intercept(Snail);</pre><p></p><p>ログ出力を見て、メソッドがSlowを呼び出す実際の時間を知ることができる<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>Wed Jan 17 2007 18:39:40 GMT+0100 (CET), TRACE: start | OURAPP.snail.move
Wed Jan 17 2007 18:39:40 GMT+0100 (CET), TRACE:   start | OURAPP.snail.slime
Wed Jan 17 2007 18:39:40 GMT+0100 (CET), TRACE:   stop: 600 ms | OURAPP.snail.slime
Wed Jan 17 2007 18:39:40 GMT+0100 (CET), TRACE: stop: 800 ms | OURAPP.snail.move</pre><p><br />
Snailはmoveで800ミリ秒を費やし、そのうちslimeの呼び出しに600ミリ秒を費やしていると私たちは気づいた<br />
今や私たちはアプリケーションの中ですべてSnailが動いているので、パフォーマンスの問題がどこから来るのか知っている<br />
CERNY.interceptは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>する関数の名前を文字列または<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a>で指定するために使うオプション引数を取る<br />
上記の例のように、オブジェクト以外のパラメータがない場合は、オブジェクト(hasownProperty)に直接アタッチされているすべてのメソッドが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>用に用意されている<br />
これはプロトタイプのメソッドを必要とせず、インターセプションを別々に準備する必要がある<br />
これを行う方法の例と、省略可能な引数の使用方法を示している<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>CERNY.intercept(Snail.prototype, /^get.*/, /^set.*/, &#34;giveBirth&#34;);</pre><p><br />
インターセプションのオブジェクトはメンバーロガーにロガーが格納されている場合、インターセプタはロガーにロギングする<br />
オブジェクトにロガーがアタッチされていない場合、ロガーはカテゴリーNONEになる<br />
そういうわけで、NONEカテゴリは設定ファイルで常にTRACEに設定され、ログ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%C8%A5%E1%A5%F3%A5%C8">ステートメント</a>が失われないようにすることを推奨する</p><br />
<p><b>カスタマイズされたインターセプタの作成</b></p><br />
<p>インターセプタはbeforeメソッドとafterメソッドを持つオブジェクトである<br />
Cerny.jsに付属するProfilerを見ていきましょう<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>CERNY.Interceptors.Profiler = {
    before: function(call) {
        call.logger.trace(&#34;start&#34;);
        call.start = new Date();
    },
    after: function(call) {
        call.logger.trace(&#34;stop: &#34; + (new Date().getTime() - call.start.getTime()) + &#34; ms&#34;);
    }
}</pre><p></p><p>インターセプタの両方のメソッドは、関数呼び出し特有のオブジェクトが渡されるパラメータ呼び出しがある<br />
実際の関数呼び出しで情報転送するために使用できる<br />
上記の例では、現在時刻がcallオブジェクトのstartプロパティに格納されていることがわかる<br />
更に、callオブジェクトには、使用可能なloggerが用意されている<span style="font-size: 150%"></span></p><br />
<br />
<p><span style="font-size: 150%">ロギング</span></p><br />
<p>このドキュメントはCerny.jsに付属しているロギング機能を使用可能にする<br />
ロガーを取得して、cerny.conf.js設定ファイルでログレベルを調整する方法を示し、私たちが興味があるメッセージのみを見ることができる</p><br />
<p><b>ロガー取得</b></p><br />
<p>ログ<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%C8%A5%E1%A5%F3%A5%C8">ステートメント</a>を出力するため、ロガーオブジェクトを取得する必要がある<br />
私たちのコードに次の行を含むことで、達成することができる<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>OURAPP.doSomething = function() {
   var logger = CERNY.Logger(&#34;OURAPP.doSomething&#34;);
   // do something
   ...
   logger.debug(&#34;myvar: &#34; + CERNY.dump(myvar&#34;));
   ...
}</pre><p><br />
<b>設定</b></p><p>CERNY.loggerは文字列でロガーのカテゴリと呼ばれる１つのパラメータを取る<br />
そのカテゴリはドットで区切られた階層のパスを示す名前のリスト<br />
始まりに近い名前ほど、階層の中で高くなる<br />
設定で高いレベルのロガーを無効にできるが、特定のロガーの出力はまだ取得できる<br />
ロガー設定の方法の例はこのようになる</p>
<pre class="code" data-lang="" data-unlink>CERNY.Configuration = {
    Logger: {
        &#34;OURAPP&#34;: &#34;OFF&#34;,
        &#34;OURAPP.doSomething&#34;: &#34;DEBUG&#34;
    },
    ...
}</pre><p><b>ログレベル</b></p><br />
<p>ログレベルは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Log4j">Log4j</a>やその派生物から慣れ親しんでいる標準レベル<br />
それらはOFF, FATAL, ERROR, WARN, INFO, DEBUG, TRACEである<br />
ロガーはこれらのレベルごとに小文字の対応する機能を持っている<br />
これらのレベルの目的は、プロジェクトポリシーを対象とする<br />
生産レベルと開発レベルの一般的な区別は共通している<br />
その境界は通常、厳密には定義されていない<br />
いくつかのチームではINFOが最初の開発レベルであり、ほかのチームはDEBUG</p><p><span style="font-size: 150%">Schema</span></p><p>このドキュメントはCerny.jsライブラリの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>概念の紹介に役立つ<br />
Cerny<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>オブジェクトを検証することができる<br />
オブジェクトが検証に合格した場合、特定の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%C8%A5%E1%A5%F3%A5%C8">ステートメント</a>がオブジェクトに当てはまることを確かめることができる<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を使用すると、オブジェクトに関する特定の事実が与えられ、チェックする必要がある、よって簡単なコードを書くことができる<br />
これにより、読みやすく、保守性が良い<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>コードになる<br />
一方、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を使わない場合、現在取り組んでいるデータ構造についての前提データに散在しており、同じ前提データが複数回チェックされる可能性がある</p><p><b>簡単な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a></b></p><p>Cerny<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>は<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>オブジェクト自体である<br />
簡単な<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>の定義のために、いくつかの前提条件は必要ない</p>
<pre class="code" data-lang="" data-unlink>Firefox = {
    vendor: &#34;Firefox&#34;
};</pre><p><br />
このコードは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を定義する<br />
オブジェクトがその<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に準拠するためには、メンバにvendorが必要であり、そのメンバの値は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a>でなければならない<br />
言い換えれば、<a class="keyword" href="http://d.hatena.ne.jp/keyword/firefox">firefox</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>はvendorという名前の制約で束縛されていて、値は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%C6%A5%E9%A5%EB">リテラル</a>文字列<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a>である</p><br />
<br />
<p><b>検証の実行</b></p><br />
<p>バリデーションの実行するために、自分たちのページにCERNY.schemaを読み込む<br />
この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>はCERNY.schema.validateとCERNY.schema.isValid関数を提供する<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に対して現在のブラウザの検証のためのコードは次のとおりである</p>
<pre class="code" data-lang="" data-unlink>var report = CERNY.schema.validate(window.navigator, Firefox);
var isFirefox = CERNY.schema.isValid(report);</pre><p></p><p>最初の行は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に対してwindow.navigatorオブジェクトの実際の検証を実行する<br />
検証の結果は、report変数に格納される<br />
二行目は結果を検証し、バリデーションエラーが起こらなかった場合trueを返し、他の場合falseを返す<br />
この検証の結果をisFirefoxに格納する</p><p><b>いくつかの制約を使った<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a></b></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>は一つの制約で構成されている<br />
複数の制約を使った<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を見ていきましょう<br />
次のコードはPersonと呼ばれる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を定義する</p>
<pre class="code" data-lang="" data-unlink>Person = {
    firstName: nonEmptyString,
    middleName: optional(nonEmptyString),
    lastName: nonEmptyString,
    dateOfBirth: optional(pastIsoDate)
};</pre><p></p><br />
<p>Person<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>は複数の制約を持つだけではなく、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Firefox">Firefox</a><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>からわかるように、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%C6%A5%E9%A5%EB">リテラル</a>文字列ではなく関数であるという制約も制約もされている<br />
firstName制約の場合、その関数はnonEmptyStringと呼ばれる<br />
オブジェクトの検証には、firstNameメンバはtrueか適切なエラーメッセージが返すnonEmptyStringにパラメータとして渡される<br />
動いているPerson<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>が見れる、次のコードを見ていきましょう<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>var csp = {
    firstName: &#34;Charles&#34;,
    middleName: &#34;Sanders&#34;,
    lastName: &#34;Peirce&#34;,
    dateOfBirth: &#34;1839-09-10&#34;,
};
var report = CERNY.schema.validate(csp, Person);</pre><p><br />
nonEmptyString関数の他に、dateOfBirthの可能な値で過去にあるyyyy-mm-ddの形式の日付に制限するpastIsoDateと呼ばれる関数がある<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>コードで表すと<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>pastIsoDate = function(value) {
    var dateValue = Date._parse(value, CERNY.text.DateFormat.ISO);
    if (dateValue &amp;&amp; dateValue.getTime() &lt; new Date().getTime()) {
        return true;
    }
    return CERNY.schema.printValue(value) +
           &#34; must be an ISO date string (yyyy-mm-dd) for a past date.&#34;;
}</pre><p></p><p>このコードはCerny.jsライブラリによって提供されているいくつかの関数を必要とするが、これらの依存関係の宣言は明快な指示のために省略される<br />
関数の名前は中間の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE">プログラマ</a>に彼らが何をするかヒントを与える<br />
pastIsoDate関数は、csp.dateOfBirth("1839-09-10")の値の検証をしている間、束縛されているvalueという一つのパラメータを取る<br />
valueが文字列で正しいフォーマットの過去の日付を参照する場合、trueを返し、他の場合はエラーメッセージを返す<br />
上記の例では、pastIsoDateはtrueを返す<br />
失敗の場合エラーメッセージを返すことは、理解しやすいレポートを生成することに役立つ<br />
もう一つのオプションは、一般的なエラーメッセージを生成するfalseを返す<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D7%A5%ED%A5%B0%A5%E9%A5%DE">プログラマ</a>は関数のドキュメントや<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%BD%A1%BC%A5%B9%A5%B3%A1%BC%A5%C9">ソースコード</a>を調べて何が悪いのかを理解を得る力になる</p><br />
<p><b>検証レポート</b></p><p>ここまで、すべてのサンプルオブジェクトは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>の確認<br />
次のオブジェクトを見てみましょう</p>
<pre class="code" data-lang="" data-unlink>var notAPerson = {
    firstName: &#34;&#34;,
    middleName: &#34;Sanders&#34;,
    lastName: &#34;Peirce&#34;,
    dateOfBirth: &#34;1839-9-10&#34;
};
var report = CERNY.schema.validate(notAPerson, Person);</pre><p>notAPersonオブジェクトはPerson<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>の制約をすべて満たさない<br />
firstNameが空であるのは失敗で、dateOfBirthの値はISO日付表記法の文字列ではない<br />
validate呼び出しによって返されたエラーレポートは次のようになる</p>
<pre class="code" data-lang="" data-unlink>{
    firstName: &#34;&#39;&#39; (string) must be a non empty string.&#34;,
    dateOfBirth: &#34;&#39;1839-9-10&#39; (string) must be an ISO date string (yyyy-mm-dd) for a past date.&#34;
}</pre><p>私たちが簡単に見れることができるように、エラーメッセージを解釈し、それに従って行動する人間が必要<br />
しかし、これはできるだけ簡単にしようとする<br />
検証レポートは<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>と同じ構造に従っている</p><br />
<p><b>制約の定義</b><br />
</p>

<ul>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%C6%A5%E9%A5%EB">リテラル</a>値</li>
<li>関数</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a></li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a></li>
</ul><p><br />
Person<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を見直した場合、middleName制約はオプションだと気づくだろう<br />
オプション関数はCerny.jsライブラリのschema.js<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>に含まれている<br />
それは、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>の操作を用意にするサポート機能である<br />
現在のバージョンに既に含まれているいくつかのサポート関数があり、フィードバックが利用可能になった将来はさらに多くが追加される</p><p><b>複合<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a></b></p><p>上記の通り、制約は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>として定義することもできる<br />
どのように動くか何の意味があるのか、次の例を見ていく</p>
<pre class="code" data-lang="" data-unlink>arrayOf = CERNY.schema.arrayOf;
Family = {
    mother: Person,
    father: Person,
    children: arrayOf(Person, 1)
};</pre><p><br />
Family<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>はmother、father、childrenという名前の３つの制約から構成されていて、最初の２つはPersonと定義され、後者は少なるとも１つの要素を持つPerson型のアイテムの配列である<br />
次のファミリーはFamily<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に従う<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>familyOfCsp = {
    mother: {
        firstName: &#34;Sarah&#34;,
        middleName: &#34;Hunt&#34;,
        lastName: &#34;Mills&#34;
    },
    father: {
        firstName: &#34;Benjamin&#34;,
        lastName: &#34;Peirce&#34;
    },
    children: [csp]
}</pre><p><br />
<b><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>でのthisの使い方</b></p><p>オブジェクト内でthisキーワードを使うと、オブジェクトの複数のメンバを参照する制約を公式化できる<br />
終了日が開始日の後であるかどうかをチェックする次のEvent<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>について考えよう</p>
<pre class="code" data-lang="" data-unlink>Event = {
    startDate: isoDate,
    endDate: function (value) {
        var endDate = Date._parse(value,
                                  CERNY.text.DateFormat.ISO);
        if (endDate === null) {
            return &#34;Must be a string of format (YYYY-MM-DD)&#34;;
        }

        var startDate = Date._parse(this.startDate,
                                    CERNY.text.DateFormat.ISO);

        // No need to check start for not null because of startDate
        // constraint
        if (endDate.before(startDate)) {
            return &#34;Must be after start date&#34;;
        }
        return true;
    }
}</pre><p><br />
この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に従う<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%B9%A5%BF%A5%F3%A5%B9">インスタンス</a>の例を次に示す</p>
<pre class="code" data-lang="" data-unlink>lifeOfCsp = {
     startDate: &#34;1839-09-10&#34;,
     endDate: &#34;1914-04-19&#34;
}</pre><p><br />
<b>オブジェクトの境界を超える</b></p><br />
<p>最後のセクションでは、似たオブジェクトの他のメンバを参照する検証<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%C8%A5%E1%A5%F3%A5%C8">ステートメント</a>をどのように学んだ<br />
これは、兄弟のメンバを参照する<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%C6%A1%BC%A5%C8%A5%E1%A5%F3%A5%C8">ステートメント</a>でもうまくいく<br />
人の生年月日が母親の前でないことを保証する次の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を見てください<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>Child = {
    firstName: nonEmptyString,
    lastName: nonEmptyString,
    dateOfBirth: function(value) {
        // Date check of value omitted ...

        var dobMother = Date._parse(this.mother.dateOfBirth,
                                    CERNY.text.DateFormat.ISO);
        if (dob.before(dobMother)) {
            return &#34;Must be after mother&#39;s date of birth&#34;;
        }
     },
     mother: Person
}</pre><p></p><p>オブジェクトツリーの違うブランチに存在するオブジェクトにあるメンバを参照したい場合、どのように進めばいい？<br />
この目的のためにvalidate関数は、_parentと呼ばれる一時的なメンバを使って渡されたオブジェクトを補強する<br />
thisプロパティの助けを借りて、オブジェクトツリーの任意の場所にアクセスすることが可能<br />
familyの例をまた見てみましょう<br />
前の例とは異なり、Person<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>はmotherメンバを持たない<br />
しかし家族の中では、子供は母親の前には生まれないというルールにPersonはまだ従うべき<br />
_parentプロパティはこの目的に役立つ<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>Child = {
    // ... just like Person
    dateOfBirth: function(value) {
        // Date check of value omitted ...

        var dobMother = Date._parse(this._parent.mother.dateOfBirth,
                                    CERNY.text.DateFormat.ISO);

        // Compare it and print meaningful error message like in the
        // previous example
    }
};</pre><p><br />
<b>概要</b></p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>のフレキシブルで動的性質により、コードとの相互作用が可能なデータ構造をどのように描いているかを簡潔に記述することができる<br />
これらの記述は、Cerny.jsライブラリのCERNY.schemaパッケージを使って検証された<br />
この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AF%A5%EA%A5%D7%A5%C8">スクリプト</a>は、オブジェクトが私たちの記述に従っているかどうか、人間が読めるレポートを作成する、短くて簡単な検証関数を提供する<br />
制約は名前と値で構成されている<br />
値は<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%EA%A5%C6%A5%E9%A5%EB">リテラル</a>、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%B5%B5%AC%C9%BD%B8%BD">正規表現</a>、関数、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>で出来ている<br />
検証結果は<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>オブジェクトであり、オブジェクトが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>に準拠している場合は空である<br />
他の場合、違反していない制約と同じ位置にエラーメッセージが見つかるはず<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>パッケージをさらに改善するために、コードの重複を避けるため、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B9%A5%AD%A1%BC%A5%DE">スキーマ</a>を拡張と連鎖制約関数の２つの機能を追加する必要がある</p><br />
<br />
<br />
<p><span style="font-size: 150%">型チェック</span></p><p>バージョン1.2からのCerny.jsは関数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>を指定するメカニズムを提供する<br />
これにより、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>がドキュメント化されることによってコードの品質が改善される<br />
さらに、実行中に呼ばれた関数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>はインターセプションを経由してチェックされている可能性が広がる<br />
このドキュメントは使い方の特性を示している</p><br />
<p><b>関数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>の指定</b></p><p>関数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>を指定する時、CERNY.signature関数を呼び出す必要がある<br />
最初に引数は指定された<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>の関数でなければならない<br />
2つ目の引数は戻り値の型<br />
3つ目から始まる引数は与えられたパラメータの型<br />
次のサンプルを見てみましょう<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>function parseIsoDate(isoDateString) {
  // Do what&#39;s necessary to parse the date out of isoDateString
  return parsedDate;
}
CERNY.signature(parseIsoDate, Date, &#34;string&#34;);</pre><p>このサンプルは、String型の一つのパラメータを取り、Dateを返すparseisoDate関数を定義する<br />
サンプルの目的には何も貢献しないから関数の実装は省く<br />
パラメータの型、または戻り値は関数か文字列のどちらかである<br />
関数の場合、値は型に対してinstanceofを使ってテストされる<br />
型が文字列で指定されている場合、意味のある値のリストは：boolean, function, number, object, string, undefined, null, any<br />
最後の値anyは、型チェックが行われないことを意味し、任意の値が許可される<br />
物をより柔軟にするために、型の組み合わせは配列に入れて、複合系として使用することができる<br />
次のサンプルの場合、検索関数はプリミティブ文字列か<a class="keyword" href="http://d.hatena.ne.jp/keyword/RegExp">RegExp</a>型のオブジェクトをパラメータとして受け取り、配列を返す<br />
<br />
</p>
<pre class="code" data-lang="" data-unlink>CERNY.signature(someSearch, Array, [&#34;string&#34;, RegExp]);</pre><p><br />
関数がnullを返す可能性がある場合、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>で明示的に宣言する必要がある<br />
parseIsoDateの作者が例外を投げる代わりにnullを返すことを選ぶ場合(文字列をDate型にパースできない場合)、このように<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>を宣言する必要がある</p>
<pre class="code" data-lang="" data-unlink>CERNY.signature(parseIsoDate, [&#34;null&#34;, Date], &#34;string&#34;);</pre><p>関数呼び出しが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>で宣言されたパラメータより多くの引数をもっていた場合、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>を超えたすべての引数は最後のパラメータの型に対してチェックされる</p><br />
<br />
<p><b>型チェックの有効化</b></p><br />
<p>型チェックはインターセプションメカニズムに基づいている<br />
型チェックを有効にするのは、Cerny.jsライブラリで設定する<br />
特に、有効なインターセプタの配列をTypeCheckerインターセプタにpushしなければならない<br />
ここに、cerny.conf.jsの断片がある</p>
<pre class="code" data-lang="" data-unlink>CERNY.configure = function() {
    var active = CERNY.Configuration.Interception.active;
    active.push(CERNY.Interceptors.LogIndenter);
    active.push(CERNY.Interceptors.TypeChecker);
};</pre><p>メソッドを<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>対象にするには、CERNY.method関数を使用してメソッドをオブジェクトにアタッチするか、すべてのメソッドが割り当てられた後にオブジェクトのCERNY.interceptを呼び出す必要がある<br />
それだけで、型チェックが実行される<br />
型エラーはFATALレベルのロガーに報告される<br />
これらのメッセージを表示するには、それに応じてロギングを設定する必要がある<br />
TypeCheckerが有効化されると、ログレベルが設定され、メソッドが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%F3%A5%BF%A1%BC%A5%BB%A5%D7%A5%C8">インターセプト</a>の対象になり、呼び出し時に関数の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>はチェックされ、型エラーが報告される<br />
次に出力例を示す</p>
<pre class="code" data-lang="" data-unlink>1173824346796, FATAL: arg 0: Type error: Tue Mar 13 2007 23:19:06 GMT+0100 (object) should be of type string | NONE</pre><p><br />
<b>型チェックを使う時</b></p><br />
<p>型チェックは大きなチームの<a class="keyword" href="http://d.hatena.ne.jp/keyword/JavaScript">JavaScript</a>プロジェクトの開発を簡単にするメカニズムである<br />
それは、作者と関数の利用者の間のコミュニケーションを改善する<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%B7%A5%B0%A5%CD%A5%C1%A5%E3">シグネチャ</a>の助けを借りて、利用者は関数の使い方の追加情報を受け取る<br />
型チェックの導入は関数を使用して作成されたエラーについて早期に利用者に知らせるだろう<br />
型チェックは開発中にいつも有効にして、チームメンバーはそのメリットを得る<br />
生産中はそれを無効にすることができる</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: WannaCryとかいうランサムウェアが話題らしい
BASENAME: 2017/05/14/224339
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 05/14/2017 22:43:39
CATEGORY: 気になる話題
CATEGORY: ランサムウェア
-----
BODY:
<p>この<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%F3%A5%B5%A5%E0%A5%A6%A5%A7%A5%A2">ランサムウェア</a>はIT速報の記事で知った<br />
研究室のメンバーが<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%F3%A5%B5%A5%E0%A5%A6%A5%A7%A5%A2">ランサムウェア</a>の研究をしているので、少し読んだが調べることはしなかった<br />
だが、今日<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>ではWannaCryのツイートが多く、研究室の先生のブログでも取り上げられていたので、調べてみることにした<br />
その結果を書いていこうと思う</p><p><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%F3%A5%B5%A5%E0%A5%A6%A5%A7%A5%A2">ランサムウェア</a>ってなんだ？</span><br />
特徴として、身代金を要求してくる<br />
『お前の大事な画像やファイルを暗号化した！直してほしければ金払え！』みたいな感じ</p><p><span style="font-size: 150%">WannaCry</span><br />
画面をロックし制御不能にし、今までの作業はすべて中断する(あるサイトに書いてあったが本当？)<br />
基本的にOfficeやプログラム、データベース等<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%DE%A5%A4%A5%AF%A5%ED%A5%BD%A5%D5%A5%C8">マイクロソフト</a>系のありとあらゆるファイルが暗号化され使用不能になる<br />
暗号化されるファイル一覧については以下のサイトで記載されていました<br />
<iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fd.hatena.ne.jp%2FKango%2F20170513%2F1494700355" title=" 世界各地で発生したランサムウェア WannaCry 2.0 の感染事案についてまとめてみた - piyolog" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://d.hatena.ne.jp/Kango/20170513/1494700355">d.hatena.ne.jp</a></cite></p><p>5月12日から全世界的に被害が拡大しているみたいで、<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%A3%A5%C3%A5%B7%A5%F3%A5%B0%A5%E1%A1%BC%A5%EB">フィッシングメール</a>を通じてPCに感染するらしい<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> SMBの<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C8%BC%E5%C0%AD">脆弱性</a>を利用</p>

<ul>
<li>CVE-CVE-2017-0144</li>
</ul><p><span style="margin-left: 60px"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a> SMBのリモートでコードを実行される<a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C8%BC%E5%C0%AD">脆弱性</a><span></p><br />
<p>問題の経路を通じて、ご自身のイントラのサーバ上にファイルがダウンロードされ、それを実行することによりそれぞれの端末が暗号化<br />
その際に脅迫文となるファイルが作成され金を要求してくる</p>

<ol>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%C0%C8%BC%E5%C0%AD">脆弱性</a>を利用して侵入</li>
<li>サービスプロセスとして不正なファイル実行</li>
<li>実際の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%E9%A5%F3%A5%B5%A5%E0%A5%A6%A5%A7%A5%A2">ランサムウェア</a>として振る舞う不正なファイルを作成</li>
<li>脅迫状の表示</li>
<li>ファイルの暗号化(WNCRYファイル)</li>
</ol><p><span style="font-size: 150%">誰がこれを仕掛けた？</span><br />
Shadow Brokersと呼ばれる<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%CF%A5%C3%A5%AB%A1%BC">ハッカー</a>集団が今年4月に米国の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%F1%B2%C8%B0%C2%C1%B4%CA%DD%BE%E3%B6%C9">国家安全保障局</a>(<a class="keyword" href="http://d.hatena.ne.jp/keyword/NSA">NSA</a>：National Security Agency)からハッキングツールや攻撃コードを盗んだらしい</p><p><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/IPA">IPA</a>の会見</span><br />
注意喚起をするために会見を開いた。3月15日に修正プログラムが配布され、WannaCryの亜種だと考えているらしい。<br />
日本での被害事例はなし(<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A5%EC%A5%F3%A5%C9%A5%DE%A5%A4%A5%AF%A5%ED">トレンドマイクロ</a>の記事だと被害が出てると言ってた)</p><p><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/IPA">IPA</a>による対策方法</span></p>

<ul>
<li>不審なメールを開かない</li>
<li>添付ファイルは開かない</li>
<li>不審なアドレスにアクセスしない</li>
<li>何かあれば即急にシステム管理者に相談</li>
<li>事前にバックアップ</li>
<li>サポート終了後の古い<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>についても修正プログラムがが配布されているから更新をしよう</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%A6%A5%A4%A5%EB%A5%B9%C2%D0%BA%F6">ウイルス対策</a>ソフトの更新</li>
<li>感染したら<a class="keyword" href="http://d.hatena.ne.jp/keyword/IPA">IPA</a>の情報相談安心窓口等に相談</li>
</ul>
-----
--------
AUTHOR: kurowasi2525
TITLE: 【第二話】先生のありがたいお言葉
BASENAME: 2017/05/02/234517
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 05/02/2017 23:45:17
CATEGORY: 体験談
-----
BODY:
<p><span style="font-size: 150%"><b>書こうと思った理由</b></span><br />
先日ゼミで発表があり、１チームがあまり良いとは言えない発表だった<br />
先週までの成果、今週の成果、来週までの目標のみで5分ほどだった<br />
しかも、発表の一週間前に先生から『やったことのモチベーションをちゃんと書け』と言われたのだが、<br />
それもなかった</p><p>初めて先生に怒っている姿を見た<br />
そこで話してくださった内容が印象的だったので、残しておこうと思う</p><br />
<p><span style="font-size: 150%"><b>先生のお言葉</b></span><br />
ルールを変えることは強制力を働かせるということ<br />
これは最後の手段ということだ<br />
世の中は効率が高いことが大好きである<br />
効率が高いということはうまくいく方法を最初に取るということ<br />
仕事が辛いと言っている人の半分くらいは自業自得<br />
怒られないとやらない人だから、上司は面倒だけど怒っている<br />
最初から全力を出す。そしてもっと頑張れと言われた時に、これ以上は出来ませんと言えばいい。<br />
それを繰り返せば、上司はこの人は最初から全力を出す人だとわかってもらえて、怒らなくなる。<br />
普通の人なら、怒るのが無駄だとわかるから<br />
もう少し頑張れると人に思われることはよくない<br />
だからまずい。一回目でできないのは</p><br />
<br />
<p><span style="font-size: 150%"><b>最後に</b></span><br />
自分で取った議事録の内容をブログにしているので、少しニュアンスが違うかも<br />
自分は結構好きな言葉でした</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: VMwareを使ってCentOS7でインターネット接続までの環境構築
BASENAME: 2017/04/28/021143
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 04/28/2017 02:11:43
CATEGORY: CentOS7
CATEGORY: VMware
CATEGORY: 環境構築
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014028.png
-----
BODY:
<p>今回の記事は、ちょっと前に大学の大きなサーバに仮想環境を構築したよって話</p><br />
<p><span style="font-size: 200%"><b>なぜ構築することになった？</b></span><br />
背景として、僕が所属している研究室だけ大学のサーバに仮想環境を構築することが許されている<br />
(先生がサーバ担当者だから僕たちのために許可をもらってくれたらしい)<br />
だが、僕は一年生の時に研究室でCentOS6.5のしょぼいWebサーバを構築したので、勉強するだけならそれで十分だった</p><p>最近<a class="keyword" href="http://d.hatena.ne.jp/keyword/Google%A5%AB%A5%EC%A5%F3%A5%C0%A1%BC">Googleカレンダー</a>の内容をSlackにつぶやくシステムを作った<br />
<iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2FKurowasi%2Fitems%2Fa9e5a4f4ab828e490139" title="【Node.js】Google CalendarAPIで取得した内容をSlackにつぶやく - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/Kurowasi/items/a9e5a4f4ab828e490139">qiita.com</a></cite></p><br />
<p>自分で作っといてなんだが、以外と便利<br />
このシステムとwena wristの組み合わせはとても最高</p><br />
<p>話を戻すと、常時動かしている自作PC1号機には余計な仕事をさせたくなかったので、<br />
このシステムは自作PC2号機(メイン)で動かしていた</p><p>このシステムのためだけにメイン機を常時起動は嫌だったので、<br />
大学のサーバで動かしてもらうことを決意した</p><br />
<br />
<p><span style="font-size: 200%"><b>環境構築</b></span></p><p>まずはContOS7のインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%EB">トール</a></p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014028.png" alt="f:id:kurowasi2525:20170428014028p:plain" title="f:id:kurowasi2525:20170428014028p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014043.png" alt="f:id:kurowasi2525:20170428014043p:plain" title="f:id:kurowasi2525:20170428014043p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014052.png" alt="f:id:kurowasi2525:20170428014052p:plain" title="f:id:kurowasi2525:20170428014052p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014059.png" alt="f:id:kurowasi2525:20170428014059p:plain" title="f:id:kurowasi2525:20170428014059p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014103.png" alt="f:id:kurowasi2525:20170428014103p:plain" title="f:id:kurowasi2525:20170428014103p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>今回はこんな感じ</p><p>一番驚いたのは2階にある大学のサーバが4階の研究室のPCに入っているISOファイルを使ってインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%EB">トール</a>できること<br />
ほとんどの人が普通だろ！って思うんでしょうが、僕は不思議な気持ちになりました</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014108.png" alt="f:id:kurowasi2525:20170428014108p:plain" title="f:id:kurowasi2525:20170428014108p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170428/20170428014112.png" alt="f:id:kurowasi2525:20170428014112p:plain" title="f:id:kurowasi2525:20170428014112p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p>インス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%EB">トール</a>完了！</p><p><span style="fint-size: 150%">Proxy設定</span><br />
/etc/<a class="keyword" href="http://d.hatena.ne.jp/keyword/yum">yum</a>.conf　を修正</p>
<pre class="code lang-conf" data-lang="conf" data-unlink><span class="synComment">#Distroverpkegの1行下に追加</span>
proxy=http://000.11.222.33:80
</pre><p>CentOS7からネットワークの設定方法が変わったみたい<br />
CentOS7からの推奨ネットワークマネージャー　TUIを使用</p>
<pre class="code" data-lang="" data-unlink>$ nmtui
Edit a connection 
 ↳ens192</pre><p><span style="font-size: 150%">IPv4CONFIGURATION</span>を<Manual>に変更<br />
<span style="font-size: 150%">Address</span>を『000.111.222/24』に設定<br />
　※末尾のビット数は初期で32に設定されているため24へ変更<br />
<span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Gateway">Gateway</a></span>を『000.111.22.333』に設定<br />
<span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/DNS">DNS</a> servers</span>を『000.111.22.33』を追加<br />
<span style="font-size: 150%">Require <a class="keyword" href="http://d.hatena.ne.jp/keyword/IPv4">IPv4</a>～～～～</span>を有効にする<br />
<span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/IPv6">IPv6</a></span><Ignore>に変更<br />
<span style="font-size: 150%">Automatically connect</span>を有効化する</p><p>Automatically connectを有効にすることで<a class="keyword" href="http://d.hatena.ne.jp/keyword/NIC">NIC</a>が自動で有効になってくれる<br />
※<a class="keyword" href="http://d.hatena.ne.jp/keyword/NIC">NIC</a>(Network Interface Card)：ざっくり言うとLAN(俗に言うインターネット)に接続する際に<br />
必要なカード(基盤のようなもの)</p><br />
<p>これで終了！<br />
以下はシステムを動かすときに入れたものや、他の時にいれたやつを記載</p><p><span style="font-size: 150%"><b><a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>関係</b></span></p>
<pre class="code" data-lang="" data-unlink>$ yum install -y http://dev.mysql.com/get/mysql-community-release-17-5.noarh.rpm
$ yum install -y mysql-community-server</pre><p><span style="font-size: 150%"><b><a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>関係</b></span></p>
<pre class="code" data-lang="" data-unlink>$ yum install -y php</pre><p><span style="font-size: 150%"><b><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>関係</b></span></p>
<pre class="code" data-lang="" data-unlink>$ yum instal -y httpd
$ firewall-cmd --permanent --add-service=http
$ systemctl enable httpd</pre><p><span style="font-size: 150%"><b>Git関係</b></span></p>
<pre class="code" data-lang="" data-unlink>$ yum install git
$ git config --global http.proxy http://000.11.222.33:80
$ git config --global https.proxy http://000.11.222.33:80
$ git config --global http.sslVerify false</pre><p><span style="font-size: 150%"><b>NVM関係</b></span></p>
<pre class="code" data-lang="" data-unlink>$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.26.1/install.sh | bash
$ source ~/.bashrc</pre><p><br />
以上！<br />
作成してから2週間くらいたったが、今のところ何の問題もなく動いてくれています</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: 【第一話】社会人になっても使えそうなエンジニア経験談
BASENAME: 2017/04/19/230841
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 04/19/2017 23:08:41
CATEGORY: 体験談
-----
BODY:
<p>今日バイト先で褒められた内容を書いていこうと思う<br />
気をつける点を記録することで、また正解を選ぶことができると思うからである</p><p>今回学んだことは２点</p>

<ul>
<li>送られてくる情報に無駄な情報はない</li>
<li>自分の先の工程を想像する</li>
</ul><p>とても当たり前なことですが、重要だと再認識しました。<br />
新社会人には基礎が大事だと思うのでメモメモ</p><p>今回の仕事は『システムの画像が古かったり、ダサいものを<a class="keyword" href="http://d.hatena.ne.jp/keyword/Excel">Excel</a>にまとめて提出して』でした。</p><p>自分に仕事が来るまでの経緯はこんな感じ</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170419/20170419225525.png" alt="f:id:kurowasi2525:20170419225525p:plain" title="f:id:kurowasi2525:20170419225525p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p>上記の経緯が把握できたのは開発部のCさんが送ってくださったメールからである<br />
内容はこんな感じ</p>
<pre class="code" data-lang="" data-unlink>高木徹さん。

システムを触って古い画像などを見つけてExcelにまとめてください。

今日一日で終わらせるのを目標にしてください。
午前中は会社にいます。

開発部　C

&gt;&gt;開発部　Bさん
&gt;&gt;
&gt;&gt;わかりました。
&gt;&gt;バイトの日程を確認しときます
&gt;&gt;
&gt;&gt;開発部　C
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt;&gt;開発部　Cさん
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;いつも通りDさんに修正してもらって
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;画像の洗い出しはバイトでもいいのでExcelにまとめて
&gt;&gt;&gt;&gt;レビューは私がします。
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;開発部　B
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;開発部　Bさん
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;システムの画像をどうにかしてくれませんか？
&gt;&gt;&gt;&gt;&gt;&gt;・○○の画像(画像が荒い)
&gt;&gt;&gt;&gt;&gt;&gt;・○○の画像(画像が古臭い)
&gt;&gt;&gt;&gt;&gt;&gt;など
&gt;&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt;&gt;営業部　A</pre><p><br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Excel">Excel</a>のフォーマットは自由だったので、全部の画像を保存し、『変更が必要なもの』『自分では判断できないもの』『絶対に大丈夫なもの』の３シートに分けてCさんに提出した</p><p>Cさん曰く、シートは多いと確認が面倒とのこと<br />
当たり前だが、１つのシートにまとめすぎるのはよくないが、綺麗にまとめることが可能であればシートは少ない方が確認しやすいみたい<br />
(当たり前と言えば当たり前か。。。　クラス図の設計と同じ感じかな？(笑)<br />
一つのシートに表現することに。。。</p><br />
<p>自分なりにフォーマットを考えた結果</p>

<ul>
<li><span style="font-size: 150%"><b>元の画像の列</b></span></li>
</ul><p>　　　　理由を言わなくてもわかりますよね笑</p>

<ul>
<li><span style="font-size: 150%"><b>変更が必要か『○』『△』『×』で表現する列</b></span></li>
</ul><p>　　　　これなら変更が必要なものかわかりやすいかなと思い<br />
　　　　（最初は変更が必要な画像だけをまとめた<a class="keyword" href="http://d.hatena.ne.jp/keyword/Excel">Excel</a>ファイルを提出ということだったので、<br />
　　　　　変更が必要ないものを貼るのは見づらくするだけだと思ったのですが、<br />
　　　　　自分の判断だけでシステムの出来が変わるのが嫌だったので、<br />
　　　　　上の人にも判断してもらえるように、全ての画像を貼りました。<br />
　　　　　ダメだという指摘を受けなかったので、今回は正解かな？)</p>

<ul>
<li><span style="font-size: 150%"><b>ダメな理由を書く列</b></span></li>
</ul><p>　　　　Dさんもこの<a class="keyword" href="http://d.hatena.ne.jp/keyword/Excel">Excel</a>ファイルを見ると思ったので、<br />
　　　　直すべき理由(画像がダサい、画質が悪いなど)が書いてあれば、<br />
　　　　修正すべき点を考えたり、経緯を理解したり、誰かに聞いたりしなくても済むと思った</p>

<ul>
<li><span style="font-size: 150%"><b>Dさんが作成してくれた画像を貼る列</b></span></li>
</ul><p>　　　　開発の人がどこの画像をどの画像に変更すれば良いかわかりやすくなると思ったのと、<br />
　　　　比較しやすければBさんがレビューしたやすいと思い、この形にした</p><br />
<br />
<p>社会人の人からしたら当たり前だわって感じだと思います。<br />
ですが、学校では１言われたことを１０やってくる方法をあまり教えてくれないと思う(教えてくれてるのかも。。。)</p><p>今回、１言われたことを１０やろうと思って、－１０になったりしなかったのはよかった<br />
午前中には終わらせたかったが、午前には終わらせることができなかったが、<br />
昼休憩後にはOKをもらえたのはよかった</p><p>今日中に終わらせてねって言われたものを８０％くらいのクオリティーで〆切の半分くらいで出した<br />
１００％のものを〆切付近で渡すより<br />
８０％のものを〆切の半分で提出したほうがいいのかも</p><br />
<p>そんな試行錯誤を繰り返すバイトの日々です</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: SQL文でのINDEX句、CONSTRAINT句について
BASENAME: 2017/04/18/224826
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 04/18/2017 22:48:26
CATEGORY: MySQL
CATEGORY: SQL
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170418/20170418223851.png
-----
BODY:
<p>バイトで開発環境を構築している際に、DBのテーブルがうまく作成されていないことに気づき、<a class="keyword" href="http://d.hatena.ne.jp/keyword/SQL">SQL</a>文を見てみるとみたことないのが。。。<br />
DBの勉強は本当の基礎しかやってこなかったので、皆さんは知っている内容だと思う</p><p><span style="font-size: 150%">INDEX</span><br />
データの検索速度を向上させるために、どの行がどこにあるかを示す索引のことらしい<br />
目的のデータが見つかるまですべての行を１行ずつ調べるよりも、<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170418/20170418223851.png" alt="f:id:kurowasi2525:20170418223851p:plain" title="f:id:kurowasi2525:20170418223851p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>索引を利用して目的の行の場所を見つけてから、そのデータを読み取ったほうが効率的だよねって感じらしい</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170418/20170418223853.png" alt="f:id:kurowasi2525:20170418223853p:plain" title="f:id:kurowasi2525:20170418223853p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>テーブルが大きいほど、効果が大きくなるみたい</p><p><b>基本構文</b></p>
<pre class="code" data-lang="" data-unlink>CREATE INDEX インデックス名 ON テーブル名(列名 ASC);　※指定しなくてもASC</pre><p><b>重複を許さない</b></p>
<pre class="code" data-lang="" data-unlink>CREATE UNIQUE INDEX インデックス名 ON テーブル名(列名 ASC);</pre><p><b>降順</b></p>
<pre class="code" data-lang="" data-unlink>CREATE INDEX インデックス名 ON テーブル名(列名 DESC);</pre><p><b>インデックスの削除</b></p>
<pre class="code" data-lang="" data-unlink>DROP INDEX インデックス名;</pre><p><br />
<span style="font-size: 150%">インデックスの利用</span><br />
　<b>パフォーマンスの向上</b><br />
　　表の結合条件に使用される列に対してインデックスを作成するとパフォーマンスが向上<br />
　　値の分布が大きな(異なる値が多い)列に対してインデックスを作成するとパフォーマンスが向上<br />
　<b>パフォーマンス低下</b><br />
　　値の分布が小さな列に対してインデックスを作成するとパフォーマンスが低下<br />
　　テーブルを更新すると、インデックスも更新される。よって、更新頻度が高い場合にインデックスを利用するとパフォーマンス低下</p><br />
<br />
<p><span style="font-size: 150%">CONSTRAINT</span><br />
英語で『強制、圧迫、束縛、制約するもの、窮屈な感じ』という意味らしい</p><p>CONSTRAINT句はインデックスに似ているらしく、違う点としては、他のテーブルとのリレーションシップも設定できる<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>は、関連データのテーブルにまたがる相互参照を可能にする外部キーと、この分散したデータの整合性を維持するために役立つ外部キー制約をサポートする</p><p><b>基本構文</b></p>
<pre class="code" data-lang="" data-unlink>CONSTRAINT 制約の名前　制約</pre><p>記述例</p>
<pre class="code" data-lang="" data-unlink>
  CONSTRAINT `制約の名前`
    FOREIGN KEY (`このテーブルの列名を外部キーに設定`)
    REFERENCES `データベース名`.`テーブル名` (`カラム名`)
    ON DELETE NO ACTION　←親テーブルの削除時何もしない
    ON UPDATE NO ACTION　←親テーブルの更新時何もしない
</pre><p><br />
もしよろしければ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: MAMP3.5.1 Apache couldn&#39;t be started.
BASENAME: 2017/04/18/221140
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 04/18/2017 22:11:40
CATEGORY: Apache
CATEGORY: MAMP
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170425/20170425163958.png
-----
BODY:
<p>今日のバイトで新しいプロジェクトの開発環境構築を行うことになり、<a class="keyword" href="http://d.hatena.ne.jp/keyword/MAMP">MAMP</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のバージョンを変えたら以下のエラーを吐くように</p>
<pre class="code" data-lang="" data-unlink>エラー
Apache couldn&#39;t be started.
Please check your MAMP installation and configuration.</pre><p><br />
最初に結論を書く<br />
僕の解決法は<span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/MAMP">MAMP</a>のバージョンを最新にする</span></p><br />
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MAMP">MAMP</a>のバージョンが古いことにより、PDOなどが古くて新しい<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>に対応してなかったのかと思う(適当)</p><br />
<p>僕の最初の環境はMAMP3.5.1　PHP5.5.9　この条件だとサーバの起動はできた<br />
しかし、MAMP3.5.1　PHP5.5.38にすると冒頭に書いたエラーが発生</p><br />
<p>MAMP3系のエラーで既にバイト仲間が苦しんでいて、4系に再インストールすることで解決させていたことを知っていたので、僕もバージョンアップさせる<br />
<span style="background-color: #dbdbdb;padding: 5px 10px 5px 10px;border-radius: 5px;margin: 10px">bin/<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>/</span>を見てみるとPHP5.5.38が最初から入っている！！！</p><br />
<p>MAMP4.1.1　PHP5.5.38で起動<br />
勝ち確だと思っていたら冒頭のエラーが発生<br />
その後</p>
<pre class="code" data-lang="" data-unlink>MySQLデータベースをアップグレートしてください
MySQLデータベースのアップグレードが必要です。
速やかにアップグレードを実行してください。
メニューの「ツール」＞「MySQLデータベースをアップグレード」からアップグレード可能です。</pre><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>と<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>の問題なのかなと思い<br />
DBのバックアップをとり、指示通りに<a class="keyword" href="http://d.hatena.ne.jp/keyword/MySQL">MySQL</a>をアップグレード</p><p>起動してみるが、やっぱり冒頭のエラー</p><br />
<p>アップデートした際に<span style="background-color: #dbdbdb;padding: 5px 10px 5px 10px;border-radius: 5px;margin: 10px">/conf/<a class="keyword" href="http://d.hatena.ne.jp/keyword/apache">apache</a>/<a class="keyword" href="http://d.hatena.ne.jp/keyword/httpd">httpd</a>.conf</span>を昔のプロジェクトのに変えてたので、<br />
4.1.1をインストールした際に作成された<a class="keyword" href="http://d.hatena.ne.jp/keyword/httpd">httpd</a>.confに変更したら起動に成功した</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/MAMP">MAMP</a>をアップデートしてからもエラーが発生したのは<a class="keyword" href="http://d.hatena.ne.jp/keyword/httpd">httpd</a>.confファイルが古かったからか、昔の案件の<a class="keyword" href="http://d.hatena.ne.jp/keyword/httpd">httpd</a>.confファイルがおかしかったのが原因だと思う</p><br />
<br />
<p>※2017/4/25(火)　追記<br />
今日バイトでプロジェクトが変わり、PHP5.5.9に変えたところ冒頭のエラーがまた出た<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MAMP">MAMP</a>のバージョンが古いことによるエラーだと思っていたが、どうやらそうではないらしい<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/MAMP">MAMP</a>にはバージョンごとに使える<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>が限られているっぽい<br />
MAMP4.1.1の場合はこんな感じ？<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170425/20170425163958.png" alt="f:id:kurowasi2525:20170425163958p:plain" title="f:id:kurowasi2525:20170425163958p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<p>今回もどっかで調べてきた内容ではないので、確定情報ではないです。</p>
<pre class="code" data-lang="" data-unlink>Additional PHP versions
for MAMP PRO 4.1.1 (Mac OS X)</pre><p>って書いてあるし、多分そうだと思われる</p><br />
<p>もしよろしければ、<a class="keyword" href="http://d.hatena.ne.jp/keyword/Twitter">Twitter</a>のフォロー、Kyashお願いします！</p><p><iframe src="https://hatenablog-parts.com/embed?url=https%3A%2F%2Ftwitter.com%2FTTrpbm" title="高木徹 (@TTrpbm) | Twitter" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://twitter.com/TTrpbm">twitter.com</a></cite></p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20180616/20180616200734.jpg" alt="f:id:kurowasi2525:20180616200734j:plain" title="f:id:kurowasi2525:20180616200734j:plain" class="hatena-fotolife" itemprop="image"></span></p>

-----
--------
AUTHOR: kurowasi2525
TITLE: 【Node.js】GoogleAPIのOAuth2の認証が1時間で切れてしまう問題
BASENAME: 2017/03/01/162605
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 03/01/2017 16:26:05
CATEGORY: Node.js
CATEGORY: Google API
-----
BODY:
<p><a href="https://developers.google.com/google-apps/calendar/quickstart/nodejs">https://developers.google.com/google-apps/calendar/quickstart/nodejs</a>のサンプルでは<br />
<span style="color: #286f2c"><b>.credentials/calendar-nodejs-quickstart.<a class="keyword" href="http://d.hatena.ne.jp/keyword/json">json</a></b></span><br />
</p>
<pre class="code" data-lang="" data-unlink>{
    &#34;access_token&#34;: &#34;アクセストークン&#34;,
    &#34;refresh_token&#34;: &#34;アクセストークンを更新するためのトークン&#34;,
    &#34;token_type&#34;: &#34;Bearer&#34;,
    &#34;expiry_date&#34;: アクセストークンが使えなくなる期限
}</pre><p>を作成し、このファイルを更新せずに認証に使っている<br />
この認証は１時間で使えないようになってしまう</p><br />
<p>ニコ生で放送中に優秀なエンジニアさんが来てくださり、その方に助けてもらいながら解決することができました<br />
本当にありがとうございました！</p><p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Flive.nicovideo.jp%2Fwatch%2Flv291909297%3Fnicorepo_community_live_broadcast%26ref%3Dzero_mynicorepo" title="GoogleカレンダーAPIとSlack APIを使ったプログラミング" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://live.nicovideo.jp/watch/lv291909297?nicorepo_community_live_broadcast&ref=zero_mynicorepo">live.nicovideo.jp</a></cite></p><br />
<p>解決策としては<span style="font-size: 150%"><b>refreshAccessToken()</b></span>メソッドを利用する<br />
<iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fstackoverflow.com%2Fquestions%2F37286529%2Frefresh-token-of-google-api-do-not-work-properly-in-nodejs" title="Refresh token of google api do not work properly in nodejs" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://stackoverflow.com/questions/37286529/refresh-token-of-google-api-do-not-work-properly-in-nodejs">stackoverflow.com</a></cite><br />
authorize()メソッドの中を修正する</p>
<pre class="code lang-javascript" data-lang="javascript" data-unlink>fs.readFile(TOKEN_PATH, <span class="synIdentifier">function</span>(err, token) <span class="synIdentifier">{</span>
    <span class="synStatement">if</span> (err) <span class="synIdentifier">{</span>
        getNewToken(oauth2Client, callback);
    <span class="synIdentifier">}</span> <span class="synStatement">else</span> <span class="synIdentifier">{</span>
        oauth2Client.credentials = JSON.parse(token);
        oauth2Client.refreshAccessToken(<span class="synIdentifier">function</span>(err, tokens) <span class="synIdentifier">{</span>
            <span class="synStatement">if</span> (err) <span class="synIdentifier">{</span>
                console.log(err);
                <span class="synStatement">return</span>;
            <span class="synIdentifier">}</span>
            oauth2Client.credentials = tokens;
            storeToken(tokens);
        <span class="synIdentifier">}</span>);
        callback(oauth2Client);
    <span class="synIdentifier">}</span>
<span class="synIdentifier">}</span>);
</pre><p><br />
これで解決！のはず。。。</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: tomcatプロジェクトのコンテキスト定義を更新の操作が失敗しました
BASENAME: 2017/02/24/203748
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/24/2017 20:37:48
CATEGORY: Eclipse
CATEGORY: 環境構築
CATEGORY: バイト日記
-----
BODY:
<p>昨日のバイト先で長時間積んだことがありました<br />
それは<a class="keyword" href="http://d.hatena.ne.jp/keyword/eclipse">eclipse</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/tomcat">tomcat</a>プロジェクトでコンテキスト定義を更新した際に、以下のメッセージが出てきました</p>
<pre class="code" data-lang="" data-unlink>操作が失敗しました
Path must include project and resource name: \パス名</pre><p>社員さんに聞いても、同じバイト仲間に聞いてもわからず<br />
調べても記事が少なく、解決策がない</p><br />
<p>結局自分の環境で成功した解決策は<a class="keyword" href="http://d.hatena.ne.jp/keyword/eclipse">eclipse</a>の展開フォルダの場所を変えるでした<br />
バイト仲間はCドラ直下に展開しても大丈夫でした<br />
ですが、僕はCドラ直下でダメでしたが、/User/ユーザ名/に再展開したら解決しました</p><p>結局権限の問題だったのかな？<br />
バイト仲間も同じような環境のPCのはずなので、ちゃんとした原因はよくわかりませんでした</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Windows環境でApache+PHP+MySQL環境を整える
BASENAME: 2017/02/16/203233
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/16/2017 20:32:33
CATEGORY: Apache
CATEGORY: PHP
CATEGORY: MySQL
CATEGORY: 環境構築
IMAGE: https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170216/20170216201224.png
-----
BODY:
<p>前回の記事でも書いたがSlack <a class="keyword" href="http://d.hatena.ne.jp/keyword/Bot">Bot</a>を利用した鍵管理システムの開発を行っている<br />
<iframe src="http://kurowasi2525.hatenablog.com/embed/2017/02/13/222027" title="Slack Botを利用した鍵管理システム - エンジニアの卵の成長日記" class="embed-card embed-blogcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 190px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://kurowasi2525.hatenablog.com/entry/2017/02/13/222027">kurowasi2525.hatenablog.com</a></cite></p><p>今までは<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>で行っていたのですが、メイン機でもやりたいと思いGitからCloneしてから気づいた。。。<br />
そう。<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>メイン機に<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>が入っていないことを<br />
今まで<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>や<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>環境系の開発は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Mac">Mac</a>でやっていたことを</p><br />
<p>と、いうことで僕の嫌いな環境構築を行っていきたいと思います<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Windows">Windows</a>ということでかなり躓きました</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<br />
<p><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>のインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%EB">トール</a></span></p><p>以下のサイトを見てください笑<br />
ダウンロードして展開してパスを通すだけ<br />
<iframe src="//hatenablog-parts.com/embed?url=https%3A%2F%2Fwww.adminweb.jp%2Fapache%2Finstall%2F" title="Apacheインストール - Apache入門" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="https://www.adminweb.jp/apache/install/">www.adminweb.jp</a></cite></p><br />
<p><span style="font-size: 150%"><a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%EB">トール</a></span></p><p>以下のサイトを見て下さい笑<br />
<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>と同じくダウンロードして展開してパスを通すだけ<br />
<iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fwebkaru.net%2Fphp%2Fwindows-php-instal%2F" title="PHPのダウンロードとインストール - Windows環境 - PHP入門 - Webkaru" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://webkaru.net/php/windows-php-instal/">webkaru.net</a></cite></p><br />
<br />
<p>ここまでは順調でした<br />
躓いたのはここから先</p><br />
<p>研究室メンバーが書いた、<a class="keyword" href="http://d.hatena.ne.jp/keyword/mysql">mysql</a>_connection()を使えるようにしたい(なぜそれを使った)<br />
PDOを使えるようにしたい。ただそれだけでした<br />
どっかで見たサイトに従って以下のように変更した<br />
<br />
</p>

<ul>
<li>展開した<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>フォルダの中にある<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>.ini-developmentをコピーして<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>.iniファイルに変更</li>
<li><a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>.iniファイルを変更</li>
</ul><pre class="code" data-lang="" data-unlink>;extension=php_mysql.dll
;extension=php_pdo_mysql.dll
↓
extension=php_mysql.dll
extension=php_pdo_mysql.dll</pre>
<ul>
<li>展開した<a class="keyword" href="http://d.hatena.ne.jp/keyword/Apache">Apache</a>フォルダの中にある<a class="keyword" href="http://d.hatena.ne.jp/keyword/httpd">httpd</a>.confに以下のコードを追加</li>
</ul><pre class="code lang-conf" data-lang="conf" data-unlink>LoadModule php5_module <span class="synConstant">&quot;C:/PHPのパス/php5apache2_4.dll&quot;</span>
PHPIniDir <span class="synConstant">&quot;C:/PHPのパス/&quot;</span>
&lt;IfModule dir_module&gt;
DirectoryIndex index.html index.php
&lt;/IfModule&gt;
</pre><p><br />
これで大丈夫だと言っているが、だめだ...<br />
調べても<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のパスがおかしいというばかり<br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170216/20170216201224.png" alt="f:id:kurowasi2525:20170216201224p:plain" title="f:id:kurowasi2525:20170216201224p:plain" class="hatena-fotolife" itemprop="image"></span></p><p>Loaded Configuration FileがPHPIniDir "C:/<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のパス/"で指定したパスじゃないか！<br />
あっているじゃないか！<br />
そう思っていた</p><br />
<p>これはインス<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%EB">トール</a>した<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>のバージョンが悪いと思い、ふと<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a> -vを叩いた<br />
指定されたモジュールが見つかりません<br />
は？パスは？</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170216/20170216201511.png" alt="f:id:kurowasi2525:20170216201511p:plain" title="f:id:kurowasi2525:20170216201511p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<br />
<p>Cドラ直下に<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>フォルダなんて作った覚えはないぞ？</p><p>いろんなサイトでCドラ直下に<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>のパスがいっていたとう記事を見ていたが、<br />
そんなわけ(笑)って感じで流していたのが原因でした<br />
すみませんでした！！！</p><p><a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>.iniのextensionのパスを展開したフォルダへのパスに変更</p>
<pre class="code" data-lang="" data-unlink>extension_dir = &#34;C:\展開したPHPのパス\ext&#34;</pre><p><br />
無事動きました<br />
サイトを巡回していて思ったのですが、phpinfo()を見てって書いてあるけど、どこ見ればいいん？<br />
って思ったので自分が今回うまくいくために見た場所<br />
正しいかどうかはわからないですが、参考までに</p><p><span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170216/20170216201224.png" alt="f:id:kurowasi2525:20170216201224p:plain" title="f:id:kurowasi2525:20170216201224p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170216/20170216202404.png" alt="f:id:kurowasi2525:20170216202404p:plain" title="f:id:kurowasi2525:20170216202404p:plain" class="hatena-fotolife" itemprop="image"></span><br />
<span itemscope itemtype="http://schema.org/Photograph"><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kurowasi2525/20170216/20170216202406.png" alt="f:id:kurowasi2525:20170216202406p:plain" title="f:id:kurowasi2525:20170216202406p:plain" class="hatena-fotolife" itemprop="image"></span></p><br />
<br />
<p><span style="font-size: 150%">※追記</span><br />
準備が完了したので、さぁ今までのコードが正常するかテストだ！と思い<br />
Slackの<a class="keyword" href="http://d.hatena.ne.jp/keyword/API">API</a>を叩いた際にこんなエラーが</p><p>Warning: file_get_contents(): Unable to find the wrapper "<a class="keyword" href="http://d.hatena.ne.jp/keyword/https">https</a>" - did you forget to enable it when you configured <a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>? in <a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>ファイルのパス on line 32</p><br />
<p>これの解決策は<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a>.iniを以下のように変更するだけみたい</p>
<pre class="code" data-lang="" data-unlink>;extension=php_openssl.dll
↓
extension=php_openssl.dll</pre>
-----
--------
AUTHOR: kurowasi2525
TITLE: CakePHPでvalidateErrorを自分で設定する【message】
BASENAME: 2017/02/15/000407
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/15/2017 00:04:07
CATEGORY: CakePHP
CATEGORY: Validation
CATEGORY: バイト日記
-----
BODY:
<p>今日はバレンタインでしたね<br />
僕はいつも通りバイトでした</p><p>午前中は<a class="keyword" href="http://d.hatena.ne.jp/keyword/CakePHP">CakePHP</a>の案件、午後は<a class="keyword" href="http://d.hatena.ne.jp/keyword/FuelPHP">FuelPHP</a>の案件をやったのですが、やっぱり<a class="keyword" href="http://d.hatena.ne.jp/keyword/FuelPHP">FuelPHP</a>最高ですね<br />
思わずつぶやいてしまいました</p><p><blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">今日はバレンタイン<br>駅前では恋人を待つ人ばかり<br>JKもたくさん歩いてる<br>世の中は恋愛で浮かれ気分<br><br>そんな中僕は<a class="keyword" href="http://d.hatena.ne.jp/keyword/CakePHP">CakePHP</a>の案件から<a class="keyword" href="http://d.hatena.ne.jp/keyword/FuelPHP">FuelPHP</a>の案件に戻された<br>実家のような安心感<br>僕は気づいてしまった<br><a class="keyword" href="http://d.hatena.ne.jp/keyword/FuelPHP">FuelPHP</a>が好きだ！<br><br>(やっぱり<a class="keyword" href="http://d.hatena.ne.jp/keyword/CakePHP">CakePHP</a>は糞だ)</p>&mdash; <a class="keyword" href="http://d.hatena.ne.jp/keyword/%B9%E2%CC%DA%C5%B0">高木徹</a> (@TTrpbm) <a href="https://twitter.com/TTrpbm/status/831460038300479488">2017年2月14日</a></blockquote><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></p><br />
<p>そんな話はさておき、今日新しく学んだことはvalidateErrorを自分で設定することです<br />
何を言ってんだこいつって思うと思います(自分でも何を言ってるかわからない)</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<p><a class="keyword" href="http://d.hatena.ne.jp/keyword/CakePHP">CakePHP</a>とvalidateは普通</p>
<pre class="code lang-php" data-lang="php" data-unlink><span class="synSpecial">&lt;?php</span>
    <span class="synType">public</span> <span class="synStatement">$</span><span class="synIdentifier">validate</span> <span class="synStatement">=</span> <span class="synType">array</span><span class="synSpecial">(</span>
        '<span class="synConstant">filedName</span>' <span class="synStatement">=&gt;</span> <span class="synType">array</span><span class="synSpecial">(</span>
            '<span class="synConstant">rule</span>' <span class="synStatement">=&gt;</span> '<span class="synConstant">date</span>',
            '<span class="synConstant">message</span>' <span class="synStatement">=&gt;</span> '<span class="synConstant">正しい形式にしてください</span>',
        <span class="synSpecial">)</span>,
    <span class="synSpecial">)</span>;
<span class="synSpecial">?&gt;</span>
</pre><p>こんな感じだと思います(うろ覚え)</p><br />
<p>ですが、入力された時だけValidateしたいときなど、自分でルールを書いたりしたい時もあると思います<br />
これが正しいのかわかりませんが、今日自分が実装した方法はこちら</p>
<pre class="code lang-php" data-lang="php" data-unlink><span class="synSpecial">&lt;?php</span>
    <span class="synType">public</span> <span class="synStatement">$</span><span class="synIdentifier">validate</span> <span class="synStatement">=</span> <span class="synType">array</span><span class="synSpecial">(</span>
        '<span class="synConstant">fieldName</span>' <span class="synStatement">=&gt;</span> <span class="synType">array</span><span class="synSpecial">(</span>
            '<span class="synConstant">rule</span>' <span class="synStatement">=&gt;</span> <span class="synType">array</span><span class="synSpecial">(</span>'<span class="synConstant">hoge</span>'<span class="synSpecial">)</span>,
        <span class="synSpecial">)</span>,
    <span class="synSpecial">)</span>;

    <span class="synType">public</span> <span class="synPreProc">function</span> hoge<span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">check</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">!empty</span><span class="synSpecial">(</span>this<span class="synType">-&gt;</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">Model</span>'<span class="synSpecial">][</span>'<span class="synConstant">value</span>'<span class="synSpecial">])</span> <span class="synStatement">||</span> <span class="synStatement">!empty</span><span class="synSpecial">(</span>this<span class="synType">-&gt;</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">Model</span>'<span class="synSpecial">][</span>'<span class="synConstant">value</span>'<span class="synSpecial">]))</span> <span class="synSpecial">{</span>
            <span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>test<span class="synSpecial">()</span>;
            <span class="synStatement">$</span><span class="synIdentifier">this</span><span class="synType">-&gt;</span>hello<span class="synSpecial">()</span>;
            <span class="synStatement">return</span> <span class="synConstant">0</span>;
        <span class="synSpecial">}</span>
        ModelName<span class="synType">-&gt;</span>invalidate<span class="synSpecial">(</span>'<span class="synConstant">fieldName</span>', '<span class="synConstant">message</span>'<span class="synSpecial">)</span>;
    <span class="synSpecial">}</span>
    <span class="synType">public</span> <span class="synPreProc">function</span> test<span class="synSpecial">()</span> <span class="synSpecial">{</span>
        ModelName<span class="synType">-&gt;</span>invalidate<span class="synSpecial">(</span>'<span class="synConstant">fieldName</span>', '<span class="synConstant">message</span>'<span class="synSpecial">)</span>;
    <span class="synSpecial">}</span>
    <span class="synType">public</span> <span class="synPreProc">function</span> hello<span class="synSpecial">()</span> <span class="synSpecial">{</span>
        ModelName<span class="synType">-&gt;</span>invalidate<span class="synSpecial">(</span>'<span class="synConstant">fieldName</span>', '<span class="synConstant">message</span>'<span class="synSpecial">)</span>;
    <span class="synSpecial">}</span>
<span class="synSpecial">?&gt;</span>
</pre><p><br />
こんな感じで自由にValidateできました<br />
もしかしたら、一番最初のコードの僕が普通だと思ってる形でいろいろできるのかもしれませんが、<br />
今日という限られた時間の中で実装するためにはこれが限界でした...</p>
<pre class="code lang-php" data-lang="php" data-unlink><span class="synSpecial">&lt;?php</span>
    Model<span class="synType">-&gt;</span>invalidate<span class="synSpecial">(</span>'<span class="synConstant">fieldName</span>', '<span class="synConstant">message</span>'<span class="synSpecial">)</span>;
<span class="synSpecial">?&gt;</span>
</pre><p>覚えておいて損はないかも</p>

-----
--------
AUTHOR: kurowasi2525
TITLE: Slack Botを利用した鍵管理システム
BASENAME: 2017/02/13/222027
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/13/2017 22:20:27
CATEGORY: Slack
CATEGORY: PHP
CATEGORY: MySQL
-----
BODY:
<p>今日は第20回のゼミがあり大学に行っていた</p><p>ゼミの内容は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Python">Python</a>で書くCompositeパターンと<a class="keyword" href="http://d.hatena.ne.jp/keyword/Flyweight">Flyweight</a>パターンの発表だ</p><p>それ関連の記事を貼っておくので良かったら見てください</p><p><iframe src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2FKurowasi%2Fitems%2F106ebd0f553d8a2f95bb" title="デザインパターンをJavaScriptとJavaでの実装を比較して理解する【随時更新】 - Qiita" class="embed-card embed-webcard" scrolling="no" frameborder="0" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;"></iframe><cite class="hatena-citation"><a href="http://qiita.com/Kurowasi/items/106ebd0f553d8a2f95bb">qiita.com</a></cite></p><p>その後、研究室の課題であるSlackを利用した鍵管理システムの作成をチームで行っていた</p>
-----
EXTENDED BODY:
<br />
<br />
<br />
<p> </p><p>課題の概要はWeb班と<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>班に分かれ、僕は<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>班<br />
1週間で<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>の仕様書を作成し、作成した仕様書をWeｂ班に渡す<br />
2週間でWeb班からもらったWebの仕様書を頼りにシステムの作成<br />
2週間でWeb班が作成した<a class="keyword" href="http://d.hatena.ne.jp/keyword/Android">Android</a>アプリを修正するというもの</p><p> </p><p>現在はWeb班からもらったWebアプリの仕様書を頼りにシステムを作成している最中だ<br />
13時～15時の予定でしたが、結局19時までシステムの作成を行っていた...</p><p>久しぶりにCentOS6.5を触ったのと大学のプロキシサーバに苦戦した<br />
環境構築の内容については後日Qiitaに投稿する予定だ</p><p> </p><p>今回はサーバ側を<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>で書いたので、それを載せようと思う<br />
バイトで<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>の<a class="keyword" href="http://d.hatena.ne.jp/keyword/%A5%D5%A5%EC%A1%BC%A5%E0%A5%EF%A1%BC%A5%AF">フレームワーク</a>を触ることはあるが、モダンな<a class="keyword" href="http://d.hatena.ne.jp/keyword/PHP">PHP</a>？なコードを書いて開発するのは初めてだったので、ｋｓコードだと思うが許してほしい</p><p>time.<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a></p>
<pre class="code lang-php" data-lang="php" data-unlink><span class="synSpecial">&lt;?php</span>
    <span class="synComment">//DBに値を登録</span>
    <span class="synStatement">$</span><span class="synIdentifier">db_info</span> <span class="synStatement">=</span> '<span class="synConstant">mysql:host=localhost;dbname=keybot;charset=utf8</span>';

    <span class="synStatement">try</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">db</span> <span class="synStatement">=</span> <span class="synPreProc">new</span> <span class="synIdentifier">PDO</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">db_info</span>, '<span class="synConstant">db</span>', '<span class="synConstant">hogehoge</span>'<span class="synSpecial">)</span>;
    <span class="synSpecial">}</span> <span class="synStatement">catch</span> <span class="synSpecial">(</span><span class="synIdentifier">PDOException</span> <span class="synStatement">$</span><span class="synIdentifier">e</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">exit</span><span class="synSpecial">(</span>'<span class="synConstant">データベース接続失敗。</span>'<span class="synStatement">.$</span><span class="synIdentifier">e</span><span class="synType">-&gt;</span>getMessage<span class="synSpecial">())</span>;
    <span class="synSpecial">}</span>

    <span class="synStatement">$</span><span class="synIdentifier">sql</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">db</span><span class="synType">-&gt;</span>prepare<span class="synSpecial">(</span>'<span class="synConstant">select * from time</span>'<span class="synSpecial">)</span>;
    <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>execute<span class="synSpecial">()</span>;

    <span class="synComment">//DBの値を取得</span>
    <span class="synStatement">$</span><span class="synIdentifier">sql</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">db</span><span class="synType">-&gt;</span>prepare<span class="synSpecial">(</span>'<span class="synConstant">select * from time</span>'<span class="synSpecial">)</span>;
    <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>execute<span class="synSpecial">()</span>;

    <span class="synStatement">$</span><span class="synIdentifier">data</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>fetch<span class="synSpecial">()</span>;

    <span class="synComment">//Slack APIの情報</span>
    <span class="synStatement">$</span><span class="synIdentifier">slackApiKey</span> <span class="synStatement">=</span> '<span class="synConstant">token code</span>';
    <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> &quot;<span class="synConstant">返却予定時間は『</span>&quot;;

    <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">hour</span>'<span class="synSpecial">]</span> <span class="synStatement">&lt;</span> <span class="synConstant">10</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synStatement">.</span>&quot;<span class="synConstant">0</span>&quot;<span class="synStatement">.$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">hour</span>'<span class="synSpecial">]</span><span class="synStatement">.</span>&quot;<span class="synConstant">:</span>&quot;;
    <span class="synSpecial">}</span> <span class="synStatement">else</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synStatement">.$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">hour</span>'<span class="synSpecial">]</span><span class="synStatement">.</span>&quot;<span class="synConstant">:</span>&quot;;
    <span class="synSpecial">}</span> 

    <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">minute</span>'<span class="synSpecial">]</span> <span class="synStatement">&lt;</span> <span class="synConstant">10</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synStatement">.</span>&quot;<span class="synConstant">0</span>&quot;<span class="synStatement">.$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">minute</span>'<span class="synSpecial">]</span>;
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synStatement">.</span>&quot;<span class="synConstant">』</span>&quot;;
    <span class="synSpecial">}</span> <span class="synStatement">else</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synStatement">.$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">minute</span>'<span class="synSpecial">]</span>;
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synStatement">.</span>&quot;<span class="synConstant">』</span>&quot;;
    <span class="synSpecial">}</span>

    <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synIdentifier">urlencode</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synSpecial">)</span>;
    <span class="synStatement">$</span><span class="synIdentifier">url</span> <span class="synStatement">=</span> &quot;<span class="synConstant">https://slack.com/api/chat.postMessage?token=</span><span class="synSpecial">${</span><span class="synIdentifier">slackApiKey</span><span class="synSpecial">}</span><span class="synConstant">&amp;channel=%23seminar_team_android&amp;text=</span><span class="synSpecial">${</span><span class="synIdentifier">message</span><span class="synSpecial">}</span><span class="synConstant">&amp;as_user=true</span>&quot;;
    <span class="synIdentifier">file_get_contents</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">url</span><span class="synSpecial">)</span>;

    <span class="synComment">//リダイレクト</span>
    <span class="synIdentifier">header</span><span class="synSpecial">(</span>'<span class="synConstant">location: index.html</span>'<span class="synSpecial">)</span>;
    <span class="synStatement">exit</span><span class="synSpecial">()</span>;
<span class="synSpecial">?&gt;</span>
</pre><p><br />
keylocation.<a class="keyword" href="http://d.hatena.ne.jp/keyword/php">php</a></p>
<pre class="code lang-php" data-lang="php" data-unlink><span class="synSpecial">&lt;?php</span>
    <span class="synComment">//DBから値をとってくる</span>
    <span class="synStatement">$</span><span class="synIdentifier">db_info</span> <span class="synStatement">=</span> '<span class="synConstant">mysql:host=localhost;dbname=keybot;charset=utf8</span>';

    <span class="synStatement">try</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">db</span> <span class="synStatement">=</span> <span class="synPreProc">new</span> <span class="synIdentifier">PDO</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">db_info</span>, '<span class="synConstant">db</span>', '<span class="synConstant">hogehoge</span>'<span class="synSpecial">)</span>;
    <span class="synSpecial">}</span> <span class="synStatement">catch</span> <span class="synSpecial">(</span><span class="synIdentifier">PDOException</span> <span class="synStatement">$</span><span class="synIdentifier">e</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">exit</span><span class="synSpecial">(</span>'<span class="synConstant">データベース接続失敗。</span>'<span class="synStatement">.$</span><span class="synIdentifier">e</span><span class="synType">-&gt;</span>getMessage<span class="synSpecial">())</span>;
    <span class="synSpecial">}</span>

    <span class="synStatement">$</span><span class="synIdentifier">sql</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">db</span><span class="synType">-&gt;</span>prepare<span class="synSpecial">(</span>'<span class="synConstant">select * from keylocation</span>'<span class="synSpecial">)</span>;
    <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>execute<span class="synSpecial">()</span>;

    <span class="synStatement">$</span><span class="synIdentifier">data</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>fetch<span class="synSpecial">()</span>;

    <span class="synComment">//Slack APIの情報</span>
    <span class="synStatement">$</span><span class="synIdentifier">slackApiKey</span> <span class="synStatement">=</span> '<span class="synConstant">token code</span>';
    <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> '';

    <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">keylocation</span>'<span class="synSpecial">]</span> <span class="synStatement">==</span> <span class="synConstant">0</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> '<span class="synConstant">鍵の所在は『守衛室』です。</span>';
    <span class="synSpecial">}</span> <span class="synStatement">else</span> <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">keylocation</span>'<span class="synSpecial">]</span> <span class="synStatement">==</span> <span class="synConstant">1</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> '<span class="synConstant">鍵の所在は『研究室』です。</span>';
    <span class="synSpecial">}</span> <span class="synStatement">else</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> '<span class="synConstant">鍵の所在は『不明』です。</span>';
    <span class="synSpecial">}</span>

    <span class="synStatement">$</span><span class="synIdentifier">message</span> <span class="synStatement">=</span> <span class="synIdentifier">urlencode</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">message</span><span class="synSpecial">)</span>;
    <span class="synStatement">$</span><span class="synIdentifier">url</span> <span class="synStatement">=</span> &quot;<span class="synConstant">https://slack.com/api/chat.postMessage?token=</span><span class="synSpecial">${</span><span class="synIdentifier">slackApiKey</span><span class="synSpecial">}</span><span class="synConstant">&amp;channel=%23seminar_team_android&amp;text=</span><span class="synSpecial">${</span><span class="synIdentifier">message</span><span class="synSpecial">}</span><span class="synConstant">&amp;as_user=true</span>&quot;;
    <span class="synIdentifier">file_get_contents</span><span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">url</span><span class="synSpecial">)</span>;

    <span class="synComment">//DBに値を登録</span>
    <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">keylocation</span>'<span class="synSpecial">]</span> <span class="synStatement">==</span> <span class="synConstant">0</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">sql</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">db</span><span class="synType">-&gt;</span>prepare<span class="synSpecial">(</span>'<span class="synConstant">update keylocation set keylocation = 1</span>'<span class="synSpecial">)</span>;
        <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>execute<span class="synSpecial">()</span>;
    <span class="synSpecial">}</span> <span class="synStatement">else</span> <span class="synStatement">if</span> <span class="synSpecial">(</span><span class="synStatement">$</span><span class="synIdentifier">data</span><span class="synSpecial">[</span>'<span class="synConstant">keylocation</span>'<span class="synSpecial">]</span> <span class="synStatement">==</span> <span class="synConstant">1</span><span class="synSpecial">)</span> <span class="synSpecial">{</span>
        <span class="synStatement">$</span><span class="synIdentifier">sql</span> <span class="synStatement">=</span> <span class="synStatement">$</span><span class="synIdentifier">db</span><span class="synType">-&gt;</span>prepare<span class="synSpecial">(</span>'<span class="synConstant">update keylocation set keylocation = 0</span>'<span class="synSpecial">)</span>;
        <span class="synStatement">$</span><span class="synIdentifier">sql</span><span class="synType">-&gt;</span>execute<span class="synSpecial">()</span>;
    <span class="synSpecial">}</span>

    <span class="synComment">//リダイレクト</span>
    <span class="synIdentifier">header</span><span class="synSpecial">(</span>'<span class="synConstant">location: index.html</span>'<span class="synSpecial">)</span>;
    <span class="synStatement">exit</span><span class="synSpecial">()</span>;
<span class="synSpecial">?&gt;</span>
</pre>
-----
--------
AUTHOR: kurowasi2525
TITLE: 初投稿
BASENAME: 2017/02/12/182536
STATUS: Publish
ALLOW COMMENTS: 1
CONVERT BREAKS: 0
DATE: 02/12/2017 18:25:36
CATEGORY: Node.js
CATEGORY: Migration
-----
BODY:
<p>これからエンジニアとして勉強したことがその日あったら、書いていこうと思います。</p>
<p>宜しくお願いします。</p>
<p> </p>
<p> </p>
<p>さて今日は昨日から始めたNode.jsでMigration機能を使ってみたいというのが一応終わりました。</p>
<p>色々なリスナーさんに助言を頂いたおかげて、一応完成までいけました</p>
<p><iframe class="embed-card embed-webcard" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="エンジニアの卵を育てるコミュ-ニコニコミュニティ" src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fcom.nicovideo.jp%2Fcommunity%2Fco3560405" frameborder="0" scrolling="no"></iframe><cite class="hatena-citation"><a href="http://com.nicovideo.jp/community/co3560405">com.nicovideo.jp</a></cite></p>
<p> </p>
<p> </p>
<p>Qiitaにそのまとめた記事を上げたので、よかったら見てください</p>
<p><iframe class="embed-card embed-webcard" style="display: block; width: 100%; height: 155px; max-width: 500px; margin: 10px 0px;" title="Node.jsを使ったMigration機能を使ってみた - Qiita" src="//hatenablog-parts.com/embed?url=http%3A%2F%2Fqiita.com%2FKurowasi%2Fitems%2F61600235a9552daa5c28" frameborder="0" scrolling="no"></iframe><cite class="hatena-citation"><a href="http://qiita.com/Kurowasi/items/61600235a9552daa5c28">qiita.com</a></cite></p>
-----
--------
